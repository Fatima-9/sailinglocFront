import{r as qf,a as zf}from"./vendor-DavUf6mE.js";import{r as D,u as rd,L as $,R as re,a as id,b as vi,B as $f,c as Hf,d as Ie}from"./router-C5tqCKHH.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var ga={exports:{}},_n={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pc;function Gf(){if(pc)return _n;pc=1;var s=qf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(c,d,m){var f,p={},x=null,j=null;m!==void 0&&(x=""+m),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(j=d.ref);for(f in d)n.call(d,f)&&!a.hasOwnProperty(f)&&(p[f]=d[f]);if(c&&c.defaultProps)for(f in d=c.defaultProps,d)p[f]===void 0&&(p[f]=d[f]);return{$$typeof:e,type:c,key:x,ref:j,props:p,_owner:i.current}}return _n.Fragment=t,_n.jsx=l,_n.jsxs=l,_n}var gc;function Wf(){return gc||(gc=1,ga.exports=Gf()),ga.exports}var r=Wf(),Sr={},xc;function Kf(){if(xc)return Sr;xc=1;var s=zf();return Sr.createRoot=s.createRoot,Sr.hydrateRoot=s.hydrateRoot,Sr}var Qf=Kf();/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xf={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jf=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),G=(s,e)=>{const t=D.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:c="",children:d,...m},f)=>D.createElement("svg",{ref:f,...Xf,width:i,height:i,stroke:n,strokeWidth:l?Number(a)*24/Number(i):a,className:["lucide",`lucide-${Jf(s)}`,c].join(" "),...m},[...e.map(([p,x])=>D.createElement(p,x)),...Array.isArray(d)?d:[d]]));return t.displayName=`${s}`,t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yc=G("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=G("Anchor",[["path",{d:"M12 22V8",key:"qkxhtm"}],["path",{d:"M5 12H2a10 10 0 0 0 20 0h-3",key:"1hv3nh"}],["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yf=G("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=G("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=G("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=G("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=G("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=G("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=G("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=G("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=G("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=G("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=G("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=G("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=G("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=G("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sp=G("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=G("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=G("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=G("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=G("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=G("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=G("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ip=G("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ap=G("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=G("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=G("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const op=G("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=G("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=G("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lp=G("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=G("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=G("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=G("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=G("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=G("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=G("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=G("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=G("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=G("Ship",[["path",{d:"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1 .6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"iegodh"}],["path",{d:"M19.38 20A11.6 11.6 0 0 0 21 14l-9-4-9 4c0 2.9.94 5.34 2.81 7.76",key:"fp8vka"}],["path",{d:"M19 13V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6",key:"qpkstq"}],["path",{d:"M12 10v4",key:"1kjpxc"}],["path",{d:"M12 2v3",key:"qbqxhf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=G("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=G("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=G("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=G("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=G("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=G("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=G("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=G("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=G("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=G("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=G("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),fp="/assets/Logo-CCi9SGbJ.png";function Jn(){const[s,e]=D.useState(!1),t=rd(),[n,i]=D.useState(!1),a=[{name:"Accueil",path:"/"},{name:"Bateaux",path:"/bateaux"},{name:"À propos",path:"/a-propos"},{name:"Contact",path:"/contact"}],l=p=>t.pathname===p,c=typeof window<"u"?localStorage.getItem("userPrenom"):null,d=typeof window<"u"?localStorage.getItem("userRole"):null,m=()=>{localStorage.removeItem("token"),localStorage.removeItem("userNom"),localStorage.removeItem("userPrenom"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("userTel"),window.location.href="/connexion"},f=()=>{window.scrollTo({top:0,behavior:"smooth"})};return r.jsx("header",{className:"bg-white shadow-sm fixed w-full top-0 z-50 border-b border-gray-100",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"flex justify-between items-center h-16",children:[r.jsx($,{to:"/",className:"flex items-center space-x-2",children:r.jsx("img",{src:fp,alt:"Logo SailingLoc",className:"h-9 w-auto"})}),r.jsx("nav",{className:"hidden md:flex space-x-8",children:a.map(p=>r.jsx($,{to:p.path,onClick:f,className:`px-3 py-2 text-sm font-medium transition-colors ${l(p.path)?"text-blue-600 border-b-2 border-blue-600":"text-gray-700 hover:text-blue-600"}`,children:p.name},p.name))}),r.jsx("div",{className:"hidden md:flex items-center space-x-4",children:c?r.jsxs(r.Fragment,{children:[r.jsx($,{to:"/favoris",className:"text-blue-600 hover:text-blue-800 px-4 py-2 text-sm font-medium transition-colors flex items-center",children:r.jsx(bc,{className:"h-5 w-5"})}),d==="proprietaire"&&r.jsx($,{to:"/gestion-bateaux",className:"text-blue-600 hover:text-blue-800 px-4 py-2 text-sm font-medium transition-colors flex items-center",children:"Gestion bateaux"}),d==="admin"&&r.jsx($,{to:"/admin",className:"bg-red-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-red-700 transition-colors shadow-sm flex items-center",children:"Dashboard Admin"}),r.jsxs("div",{className:"relative",children:[r.jsx("button",{onClick:()=>i(p=>!p),className:"bg-blue-600 text-white px-4 py-2 rounded-full text-sm font-medium hover:bg-blue-700 transition-colors shadow-sm flex items-center justify-center focus:outline-none",children:r.jsx(An,{className:"h-5 w-5"})}),n&&r.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-4 z-50 border border-gray-100",children:[r.jsxs("div",{className:"px-4 py-2 text-gray-700 text-sm mb-2",children:["Bienvenue ",r.jsx("span",{className:"font-bold text-blue-700",children:c})]}),r.jsx($,{to:"/mes-reservations",onClick:()=>i(!1),className:"block w-full text-left px-4 py-2 text-blue-600 hover:bg-blue-50 text-sm font-medium",children:"Mes Réservations"}),r.jsxs($,{to:"/profil",onClick:()=>i(!1),className:"w-full text-left px-4 py-2 text-blue-600 hover:bg-blue-50 text-sm font-medium flex items-center gap-2 border-t border-gray-100 mt-2",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6l4 2"})}),"Settings"]}),r.jsx("button",{onClick:m,className:"w-full text-left px-4 py-2 text-red-600 hover:bg-red-50 text-sm font-medium border-t border-gray-100 mt-2",children:"Déconnexion"})]})]})]}):r.jsxs(r.Fragment,{children:[r.jsx($,{to:"/connexion",className:"text-gray-700 hover:text-blue-600 px-4 py-2 text-sm font-medium transition-colors",onClick:f,children:"Connexion"}),r.jsx($,{to:"/inscription",className:"bg-orange-500 text-white px-6 py-2 rounded-full text-sm font-medium hover:bg-orange-600 transition-colors shadow-sm",onClick:f,children:"Inscription"})]})}),r.jsx("button",{className:"md:hidden p-2",onClick:()=>e(!s),children:s?r.jsx(It,{size:24}):r.jsx(lp,{size:24})})]}),s&&r.jsx("div",{className:"md:hidden border-t border-gray-100",children:r.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 bg-white",children:[a.map(p=>r.jsx($,{to:p.path,className:`block px-3 py-2 text-base font-medium ${l(p.path)?"text-blue-600 bg-blue-50":"text-gray-700 hover:text-blue-600 hover:bg-gray-50"}`,onClick:()=>{e(!1),f()},children:p.name},p.name)),r.jsx("div",{className:"mt-4 space-y-2",children:c?r.jsxs(r.Fragment,{children:[d==="proprietaire"&&r.jsx($,{to:"/gestion-bateaux",className:"block w-full text-center border border-blue-600 text-blue-600 px-3 py-2 rounded-full text-base font-medium hover:bg-blue-50 transition-colors flex items-center justify-center",onClick:()=>{e(!1),f()},children:"Gestion bateaux"}),d==="admin"&&r.jsx($,{to:"/admin",className:"block w-full text-center bg-red-600 text-white px-3 py-2 rounded-lg text-base font-medium hover:bg-red-700 transition-colors",onClick:()=>{e(!1),f()},children:"Dashboard Admin"}),r.jsx($,{to:"/favoris",className:"block w-full text-center border border-blue-600 text-blue-600 px-3 py-2 rounded-full text-base font-medium hover:bg-blue-50 transition-colors flex items-center justify-center",onClick:()=>{e(!1),f()},children:r.jsx(bc,{className:"h-5 w-5"})}),r.jsx($,{to:"/mes-reservations",className:"block w-full text-center border border-blue-600 text-blue-600 px-3 py-2 rounded-full text-base font-medium hover:bg-blue-50 transition-colors flex items-center justify-center",onClick:()=>{e(!1),f()},children:"Mes Réservations"}),r.jsxs("div",{className:"relative",children:[r.jsx("button",{onClick:()=>i(p=>!p),className:"block w-full text-center border border-blue-600 text-blue-600 px-3 py-2 rounded-full text-base font-medium hover:bg-blue-50 transition-colors flex items-center justify-center",children:r.jsx(An,{className:"h-5 w-5"})}),n&&r.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-4 z-50 border border-gray-100",children:[r.jsxs("div",{className:"px-4 py-2 text-gray-700 text-sm mb-2",children:["Bienvenue ",r.jsx("span",{className:"font-bold text-blue-700",children:c})]}),r.jsx("button",{onClick:m,className:"w-full text-left px-4 py-2 text-red-600 hover:bg-red-50 text-sm font-medium",children:"Déconnexion"})]})]})]}):r.jsxs(r.Fragment,{children:[r.jsx($,{to:"/connexion",className:"block w-full text-center border border-orange-500 text-orange-500 px-3 py-2 rounded-full text-base font-medium hover:bg-orange-50 transition-colors",onClick:()=>{e(!1),f()},children:"Connexion"}),r.jsx($,{to:"/inscription",className:"block w-full text-center bg-orange-500 text-white px-3 py-2 rounded-full text-base font-medium hover:bg-orange-600 transition-colors",onClick:()=>{e(!1),f()},children:"Inscription"})]})})]})})]})})}function pp(){const[s,e]=D.useState(""),t=typeof window<"u"?localStorage.getItem("userPrenom"):null,n=i=>{i.preventDefault(),console.log("Newsletter signup:",s),e(""),alert("Inscription réussie !")};return r.jsx("footer",{className:"bg-blue-900 text-white",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold mb-6",children:"MODE DE PAIEMENT"}),r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-8 h-8 bg-white rounded flex items-center justify-center",children:r.jsx(tp,{className:"h-5 w-5 text-blue-900"})}),r.jsx("span",{children:"Carte bancaire"})]})})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold mb-6",children:"INFORMATIONS"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx($,{to:"/",className:"block hover:text-blue-300 transition-colors",children:"Accueil"}),r.jsx($,{to:"/bateaux",className:"block hover:text-blue-300 transition-colors",children:"Bateaux"}),r.jsx($,{to:"/a-propos",className:"block hover:text-blue-300 transition-colors",children:"À propos"}),r.jsx($,{to:"/contact",className:"block hover:text-blue-300 transition-colors",children:"Contact"}),r.jsx($,{to:"/mentions-legales",className:"block hover:text-blue-300 transition-colors",children:"Mentions légales"}),r.jsx($,{to:"/politique-confidentialite",className:"block hover:text-blue-300 transition-colors",children:"Politique de confidentialité"}),r.jsx($,{to:"/cgu-cgv",className:"block hover:text-blue-300 transition-colors",children:"CGU / CGV"}),t?r.jsxs(r.Fragment,{children:[r.jsx($,{to:"/connexion",className:"block hover:text-blue-300 transition-colors",children:"Connexion"}),r.jsx($,{to:"/inscription",className:"block hover:text-blue-300 transition-colors",children:"Inscription"})]}):r.jsxs(r.Fragment,{children:[r.jsx($,{to:"/connexion",className:"block hover:text-blue-300 transition-colors",children:"Connexion"}),r.jsx($,{to:"/inscription",className:"block hover:text-blue-300 transition-colors",children:"Inscription"})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold mb-6",children:"RECEVEZ NOTRE NEWSLETTER"}),r.jsx("p",{className:"text-blue-200 mb-6 leading-relaxed",children:"Recevez nos offres et actualités directement dans votre boîte mail pour ne rien manquer de nos nouveautés."}),r.jsxs("form",{onSubmit:n,className:"space-y-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Qs,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"email",value:s,onChange:i=>e(i.target.value),placeholder:"Votre email",className:"w-full pl-10 pr-4 py-3 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsx("button",{type:"submit",className:"w-full bg-orange-500 text-white py-3 px-6 rounded-lg font-medium hover:bg-orange-600 transition-colors",children:"ENVOYER"})]})]})]}),r.jsx("div",{className:"border-t border-blue-800 mt-12 pt-8",children:r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center",children:[r.jsxs("div",{className:"flex space-x-6 mb-6 sm:mb-0",children:[r.jsx("a",{href:"#",className:"text-blue-200 hover:text-white transition-colors",children:r.jsx(sp,{size:28})}),r.jsx("a",{href:"#",className:"text-blue-200 hover:text-white transition-colors",children:r.jsx(rp,{size:28})}),r.jsx("a",{href:"#",className:"text-blue-200 hover:text-white transition-colors",children:r.jsx(mp,{size:28})}),r.jsx("a",{href:"#",className:"text-blue-200 hover:text-white transition-colors",children:r.jsx(ip,{size:28})})]}),r.jsx("p",{className:"text-blue-200",children:"© 2025 SailingLoc - Tous droits réservés"})]})})]})})}function Mn({rating:s,maxRating:e=5,size:t=16,interactive:n=!1,onRatingChange:i}){const a=Array.from({length:e},(l,c)=>{const d=c+1,m=d<=s,f=d-.5<=s&&s<d;return r.jsx("button",{type:"button",onClick:()=>n&&i&&i(d),className:`${n?"cursor-pointer hover:scale-110":"cursor-default"} transition-transform`,disabled:!n,children:r.jsx(Jr,{size:t,className:`${m||f?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},c)});return r.jsx("div",{className:"flex items-center space-x-1",children:a})}function vo({boat:s,viewMode:e="grid"}){return e==="list"?r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:r.jsxs("div",{className:"flex items-center space-x-6",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("img",{src:s.image,alt:s.nom,className:"w-32 h-24 object-cover rounded-lg"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:s.nom}),r.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[r.jsx(Mn,{rating:s.rating||0,size:16}),r.jsxs("span",{className:"text-sm text-gray-600",children:["(",s.reviews||0,")"]})]})]}),r.jsxs("div",{className:"flex items-center space-x-4 mb-3 text-sm text-gray-600",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(ut,{size:16}),r.jsx("span",{className:"capitalize",children:s.type})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(_i,{size:16}),r.jsxs("span",{children:[s.longueur,"m"]})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Xt,{size:16}),r.jsxs("span",{children:[s.capacite," pers."]})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(ut,{size:16}),r.jsx("span",{children:s.localisation})]})]}),s.description&&r.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-3",children:s.description})]}),r.jsxs("div",{className:"flex-shrink-0 text-right",children:[r.jsxs("div",{className:"text-2xl font-bold text-blue-600 mb-3",children:[s.prix_jour,"€",r.jsx("span",{className:"text-base font-normal text-gray-600",children:"/jour"})]}),r.jsx($,{to:`/bateaux/${s._id}`,className:"bg-orange-500 text-white px-6 py-2 rounded-full text-sm font-medium hover:bg-orange-600 transition-colors shadow-sm",children:"Réserver"})]})]})}):r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:s.image,alt:s.nom,className:"w-full h-56 object-cover"}),r.jsx("div",{className:"absolute top-4 left-4 bg-blue-600 text-white px-3 py-1 rounded-full text-sm font-medium",children:s.type})]}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 leading-tight",children:s.nom}),r.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[r.jsx(Mn,{rating:s.rating||0,size:16}),r.jsxs("span",{className:"text-sm text-gray-600",children:["(",s.reviews||0,")"]})]})]}),r.jsxs("div",{className:"flex items-center space-x-4 mb-4 text-sm text-gray-600",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(ut,{size:16}),r.jsx("span",{className:"capitalize",children:s.type})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Xt,{size:16}),r.jsxs("span",{children:[s.capacite," pers."]})]})]}),s.description&&r.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-4",children:s.description}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[s.prix_jour,"€",r.jsx("span",{className:"text-base font-normal text-gray-600",children:"/jour"})]}),r.jsx($,{to:`/bateaux/${s._id}`,className:"bg-orange-500 text-white px-6 py-2 rounded-full text-sm font-medium hover:bg-orange-600 transition-colors shadow-sm",children:"Réserver"})]})]})]})}function gp({boats:s,onReset:e,searchFilters:t}){const[n,i]=D.useState("nom"),[a,l]=D.useState("asc"),[c,d]=D.useState(!1),[m,f]=D.useState(!1);re.useEffect(()=>{f(!0)},[]);const p=[...s].sort((w,A)=>{let S,I;switch(n){case"prix_jour":S=w.prix_jour,I=A.prix_jour;break;case"longueur":S=w.longueur,I=A.longueur;break;case"capacite":S=w.capacite,I=A.capacite;break;case"nom":default:S=w.nom.toLowerCase(),I=A.nom.toLowerCase();break}return a==="asc"?S>I?1:-1:S<I?1:-1}),x=w=>{n===w?l(a==="asc"?"desc":"asc"):(i(w),l("asc"))},j=w=>n!==w?null:a==="asc"?r.jsx(Zf,{size:16}):r.jsx(Yf,{size:16}),k=(w,A)=>{if(!A)return"";switch(w){case"destination":return A.charAt(0).toUpperCase()+A.slice(1).replace("-"," ");case"type":return A.charAt(0).toUpperCase()+A.slice(1);case"dateDebut":case"dateFin":return new Date(A).toLocaleDateString("fr-FR");default:return A}},R=Object.entries(t).filter(([w,A])=>A);return r.jsx("section",{id:"search-results",className:`py-20 bg-white scroll-mt-20 transition-all duration-700 ease-out ${m?"opacity-100 translate-y-0":"opacity-0 translate-y-8"}`,ref:w=>{w&&(w.scrollIntoView=A=>{const O=w.getBoundingClientRect().top+window.pageYOffset-80;window.scrollTo({top:O,behavior:A?.behavior||"smooth"})})},children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"flex justify-between items-center mb-8",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-2 h-12 bg-gradient-to-b from-blue-500 to-blue-600 rounded-full"}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Résultats de votre recherche"}),r.jsxs("p",{className:"text-xl text-gray-600",children:[s.length," bateau",s.length>1?"x":""," trouvé",s.length>1?"s":""," pour vos critères"]})]})]}),r.jsxs("button",{onClick:e,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2",children:[r.jsx(It,{size:20}),r.jsx("span",{children:"Réinitialiser"})]})]}),R.length>0&&r.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200 animate-pulse",children:[r.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-3",children:"Filtres actifs :"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:R.map(([w,A])=>r.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:[w==="destination"?"📍":w==="type"?"🚢":w.includes("date")?"📅":"🔍",k(w,A)]},w))})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8 p-4 bg-gray-50 rounded-lg",children:[r.jsxs("button",{onClick:()=>d(!c),className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx(La,{size:16}),r.jsx("span",{children:"Filtres avancés"})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Trier par :"}),r.jsx("div",{className:"flex gap-2",children:[{key:"nom",label:"Nom"},{key:"prix_jour",label:"Prix"},{key:"longueur",label:"Longueur"},{key:"capacite",label:"Capacité"}].map(({key:w,label:A})=>r.jsxs("button",{onClick:()=>x(w),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1 ${n===w?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"}`,children:[A,j(w)]},w))})]})]}),c&&r.jsxs("div",{className:"mb-8 p-6 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Filtres avancés"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prix maximum par jour"}),r.jsx("input",{type:"number",placeholder:"€",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Longueur minimum"}),r.jsx("input",{type:"number",placeholder:"mètres",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Capacité minimum"}),r.jsx("input",{type:"number",placeholder:"personnes",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),p.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:p.map(w=>r.jsx(vo,{boat:w},w._id))}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-400 mb-4",children:r.jsx(La,{size:64})}),r.jsx("h3",{className:"text-xl font-medium text-gray-600 mb-2",children:"Aucun résultat"}),r.jsx("p",{className:"text-gray-500",children:"Essayez de modifier vos critères de recherche"})]})]})})}const Je="https://sailingloc-back-lilac.vercel.app",ae={LOGIN:`${Je}/api/auth/login`,REGISTER:`${Je}/api/auth/register`,DASHBOARD:`${Je}/api/auth/dashboard`,USERS:`${Je}/api/auth/users`,BOATS:`${Je}/api/boats`,BOAT_DETAIL:s=>`${Je}/api/boats/${s}`,MY_BOATS:`${Je}/api/boats/my-boats`,BOOKINGS:`${Je}/api/bookings`,MY_BOOKINGS:`${Je}/api/bookings/my-bookings`,REVIEWS:`${Je}/api/reviews`,BOAT_REVIEWS:s=>`${Je}/api/reviews/boat/${s}`,FIVE_STAR_REVIEWS:`${Je}/api/reviews/five-stars`,CONTACT:`${Je}/api/contact`},Fe=s=>({"Content-Type":"application/json",Authorization:s?`Bearer ${s}`:""}),Ba=s=>{switch(s){case"locataire":return"client";case"proprietaire":return"proprietaire";case"admin":return"admin";default:return s}},le=async(s,e={})=>{try{const t=await fetch(s,{...e,headers:{"Content-Type":"application/json",...e.headers}});if(!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.message||`Erreur HTTP: ${t.status}`)}return await t.json()}catch(t){throw console.error("Erreur API:",t),t}};function xp(){const[s,e]=D.useState([]),[t,n]=D.useState([]),[i,a]=D.useState(!0),[l,c]=D.useState(""),[d,m]=D.useState([]),[f,p]=D.useState(!0),[x,j]=D.useState([]),[k,R]=D.useState(!0),[w,A]=D.useState({destination:"",dateDebut:"",dateFin:"",type:""}),[S,I]=D.useState(!1);D.useEffect(()=>{O(),b(),_()},[]);const O=async()=>{try{a(!0),console.log("🔄 Récupération des bateaux depuis l'API MongoDB...");const y=await le(ae.BOATS);console.log(`✅ ${y.length||0} bateaux récupérés depuis MongoDB`),e(y)}catch(y){console.error("❌ Erreur lors de la récupération des bateaux:",y),c("Erreur lors de la récupération des bateaux: "+y.message)}finally{a(!1)}},P=async()=>{try{I(!0);let y=s.filter(ue=>w.destination&&ue.destination!==w.destination||w.type&&ue.type!==w.type?!1:(w.dateDebut&&w.dateFin,!0));n(y),I(!1),y.length>0?setTimeout(()=>{const ue=document.getElementById("search-results");ue&&ue.scrollIntoView?ue.scrollIntoView({behavior:"smooth"}):ue?.scrollIntoView({behavior:"smooth",block:"start"})},300):alert("Aucun bateau trouvé pour vos critères de recherche. Essayez de modifier vos filtres.")}catch(y){console.error("Erreur lors de la recherche:",y),I(!1)}},V=(y,ue)=>{A(Ne=>({...Ne,[y]:ue}))},v=()=>{A({destination:"",dateDebut:"",dateFin:"",type:""}),n([])},b=async()=>{try{p(!0),console.log("🔄 Récupération des avis 5 étoiles depuis MongoDB...");const y=await le(`${ae.FIVE_STAR_REVIEWS}?limit=6`);console.log("✅ Données avis 5 étoiles reçues depuis MongoDB:",y),y.data&&y.data.length>0?(console.log(`📝 ${y.data.length} avis 5 étoiles trouvés dans MongoDB`),m(y.data)):(console.log("⚠️ Aucun avis 5 étoiles trouvé dans MongoDB"),m([]))}catch(y){console.error("❌ Erreur lors de la récupération des avis:",y),m([])}finally{p(!1)}},_=async()=>{try{R(!0),console.log("🔄 Récupération des 3 derniers avis depuis MongoDB...");const y=await le(ae.REVIEWS);if(console.log("✅ Données avis reçues depuis MongoDB:",y),y&&y.length>0){const Ne=y.sort((Dt,F)=>new Date(F.createdAt)-new Date(Dt.createdAt)).slice(0,3);console.log(`📝 ${Ne.length} derniers avis trouvés dans MongoDB`),j(Ne)}else console.log("⚠️ Aucun avis trouvé dans MongoDB"),j([])}catch(y){console.error("❌ Erreur lors de la récupération des derniers avis:",y),j([])}finally{R(!1)}},N=s.slice(0,6),E=!!localStorage.getItem("userId"),T=[{id:1,name:"Saint-Malo",image:"https://images.pexels.com/photos/1001682/pexels-photo-1001682.jpeg?auto=compress&cs=tinysrgb&w=800",description:"La cité corsaire et ses îles sauvages"},{id:2,name:"Les Glénan",image:"https://images.pexels.com/photos/1001682/pexels-photo-1001682.jpeg?auto=compress&cs=tinysrgb&w=800",description:"Archipel breton aux eaux turquoise"},{id:3,name:"Marseille",image:"https://images.pexels.com/photos/1001682/pexels-photo-1001682.jpeg?auto=compress&cs=tinysrgb&w=800",description:"Calanques et îles du Frioul"}];return r.jsxs("div",{className:"min-h-screen",children:[r.jsxs("section",{className:"relative h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-blue-700",children:[r.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url(https://images.pexels.com/photos/1001682/pexels-photo-1001682.jpeg?auto=compress&cs=tinysrgb&w=1600)",opacity:.4}}),r.jsx("div",{className:"relative z-10 flex items-center justify-center h-full px-4",children:r.jsxs("div",{className:"text-center text-white max-w-4xl",children:[r.jsx("h1",{className:"text-6xl md:text-8xl font-bold mb-8 tracking-wider",children:"SAILINGLOC"}),r.jsx("p",{className:"text-xl md:text-2xl mb-12 font-light max-w-3xl mx-auto leading-relaxed",children:"Découvrez les plus beaux bateaux pour vos aventures en mer"}),r.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl p-6 max-w-5xl mx-auto shadow-2xl",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(ut,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),r.jsxs("select",{className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-700",value:w.destination,onChange:y=>V("destination",y.target.value),children:[r.jsx("option",{value:"",children:"Destination"}),r.jsx("option",{value:"saint-malo",children:"Saint-Malo"}),r.jsx("option",{value:"les-glenan",children:"Les Glénan"}),r.jsx("option",{value:"crozon",children:"Crozon"}),r.jsx("option",{value:"la-rochelle",children:"La Rochelle"}),r.jsx("option",{value:"marseille",children:"Marseille"}),r.jsx("option",{value:"cannes",children:"Cannes"}),r.jsx("option",{value:"ajaccio",children:"Ajaccio"}),r.jsx("option",{value:"barcelone",children:"Barcelone"}),r.jsx("option",{value:"palma",children:"Palma de Majorque"}),r.jsx("option",{value:"athenes",children:"Athènes"}),r.jsx("option",{value:"venise",children:"Venise"}),r.jsx("option",{value:"amsterdam",children:"Amsterdam"}),r.jsx("option",{value:"split",children:"Split"})]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Vn,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"date",placeholder:"Date de début",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-700",value:w.dateDebut,onChange:y=>V("dateDebut",y.target.value)})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Vn,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"date",placeholder:"Date de fin",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-700",value:w.dateFin,onChange:y=>V("dateFin",y.target.value)})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Ge,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),r.jsxs("select",{className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-700",value:w.type,onChange:y=>V("type",y.target.value),children:[r.jsx("option",{value:"",children:"Type bateau"}),r.jsx("option",{value:"voilier",children:"Voilier"}),r.jsx("option",{value:"bateau à moteur",children:"Bateau à moteur"}),r.jsx("option",{value:"catamaran",children:"Catamaran"})]})]}),r.jsx("button",{onClick:P,disabled:S,className:"bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:S?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),r.jsx("span",{children:"Recherche..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(vc,{size:20}),r.jsx("span",{children:"Rechercher"})]})})]})})]})})]}),r.jsx("section",{className:"py-20 bg-gray-50",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Nos bateaux vedettes"}),r.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Découvrez notre sélection de bateaux les plus populaires pour vos escapades en mer"})]}),i?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Chargement des bateaux..."})]}):l?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Ge,{className:"h-16 w-16 text-red-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-medium text-gray-600 mb-2",children:"Erreur de chargement"}),r.jsx("p",{className:"text-gray-500",children:l})]}):N.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Ge,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-medium text-gray-600 mb-2",children:"Aucun bateau disponible"}),r.jsx("p",{className:"text-gray-500",children:"Revenez bientôt pour découvrir nos bateaux !"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:N.map(y=>r.jsx(vo,{boat:y},y._id))}),s.length>6&&r.jsx("div",{className:"text-center mt-12",children:r.jsxs($,{to:"/bateaux",className:"inline-flex items-center space-x-2 bg-blue-600 text-white px-8 py-3 rounded-full font-medium hover:bg-blue-700 transition-colors",children:[r.jsx("span",{children:"Voir tous les bateaux"}),r.jsx(xa,{size:20})]})})]})}),t.length>0&&r.jsx(gp,{boats:t,onReset:v,searchFilters:w}),r.jsx("section",{className:"py-20 bg-gradient-to-br from-blue-50 to-white",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsxs("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:["Ce que disent nos ",r.jsx("span",{className:"text-blue-600",children:"navigateurs"})," 5 étoiles"]}),r.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Découvrez les expériences exceptionnelles de nos clients les plus satisfaits"})]}),f?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Chargement des avis 5 étoiles depuis la table reviews..."})]}):d.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Ge,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-medium text-gray-600 mb-2",children:"Aucun avis 5 étoiles disponible"}),r.jsx("p",{className:"text-gray-500",children:"Revenez bientôt pour découvrir les avis exceptionnels de nos navigateurs !"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:d.map(y=>r.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-8 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2 relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-4 right-4 bg-gradient-to-r from-yellow-400 to-yellow-500 text-white px-3 py-1 rounded-full text-xs font-bold shadow-lg",children:"⭐ 5 ÉTOILES"}),r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white font-semibold text-lg",children:y.userId?.nom?.charAt(0)||"U"})}),r.jsxs("div",{children:[r.jsxs("h4",{className:"font-semibold text-gray-900",children:[y.userId?.nom," ",y.userId?.prenom]}),r.jsx("p",{className:"text-sm text-gray-500",children:y.boatId?.nom||"Bateau"})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"flex items-center space-x-1 mb-2",children:[...Array(5)].map((ue,Ne)=>r.jsx(Jr,{size:20,className:"text-yellow-400 fill-current"},Ne))}),r.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Excellent"})]})]}),r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Bs,{className:"h-6 w-6 text-blue-500 mt-1 flex-shrink-0"}),r.jsxs("blockquote",{className:"text-gray-700 leading-relaxed italic text-lg",children:['"',y.comment,'"']})]})}),r.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 pt-4 border-t border-gray-100",children:[r.jsx("span",{children:new Date(y.createdAt).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})}),y.boatId?.type&&r.jsx("span",{className:"capitalize bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs font-medium",children:y.boatId.type})]})]},y._id))}),d.length>6&&r.jsx("div",{className:"text-center mt-12",children:r.jsxs($,{to:"/avis",className:"inline-flex items-center space-x-2 bg-blue-600 text-white px-8 py-3 rounded-full font-medium hover:bg-blue-700 transition-colors",children:[r.jsx("span",{children:"Voir tous les avis"}),r.jsx(xa,{size:20})]})})]})}),r.jsx("section",{className:"py-20 bg-white",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsxs("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:["Les ",r.jsx("span",{className:"text-blue-600",children:"derniers avis"})," de nos navigateurs"]}),r.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Découvrez les témoignages les plus récents de nos clients"})]}),k?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Chargement des derniers avis depuis la table reviews..."})]}):x.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Ge,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-medium text-gray-600 mb-2",children:"Aucun avis disponible"}),r.jsx("p",{className:"text-gray-500",children:"Revenez bientôt pour découvrir les avis de nos navigateurs !"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:x.map(y=>r.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-2xl p-8 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2 relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-4 right-4 bg-gradient-to-r from-green-400 to-green-500 text-white px-3 py-1 rounded-full text-xs font-bold shadow-lg",children:"🆕 NOUVEAU"}),r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white font-semibold text-lg",children:y.userId?.nom?.charAt(0)||"U"})}),r.jsxs("div",{children:[r.jsxs("h4",{className:"font-semibold text-gray-900",children:[y.userId?.nom," ",y.userId?.prenom]}),r.jsx("p",{className:"text-sm text-gray-500",children:y.boatId?.nom||"Bateau"})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"flex items-center space-x-1 mb-2",children:[...Array(y.rating||5)].map((ue,Ne)=>r.jsx(Jr,{size:20,className:"text-yellow-400 fill-current"},Ne))}),r.jsx("p",{className:"text-sm text-gray-500 font-medium",children:y.rating===5?"Excellent":y.rating===4?"Très bien":y.rating===3?"Bien":y.rating===2?"Moyen":"À améliorer"})]})]}),r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Bs,{className:"h-6 w-6 text-green-500 mt-1 flex-shrink-0"}),r.jsxs("blockquote",{className:"text-gray-700 leading-relaxed italic text-lg",children:['"',y.comment,'"']})]})}),r.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 pt-4 border-t border-gray-100",children:[r.jsx("span",{children:new Date(y.createdAt).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})}),y.boatId?.type&&r.jsx("span",{className:"capitalize bg-green-100 text-green-800 px-3 py-1 rounded-full text-xs font-medium",children:y.boatId.type})]})]},y._id))}),x.length>0&&r.jsx("div",{className:"text-center mt-12",children:r.jsxs($,{to:"/avis",className:"inline-flex items-center space-x-2 bg-green-600 text-white px-8 py-3 rounded-full font-medium hover:bg-green-700 transition-colors",children:[r.jsx("span",{children:"Voir tous les avis"}),r.jsx(xa,{size:20})]})})]})}),r.jsx("section",{className:"py-20 bg-gray-50",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"text-center mb-16",children:r.jsxs("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:["Cap sur les ",r.jsx("span",{className:"text-blue-600",children:"destinations"})," les plus prisées par nos navigateurs !"]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:T.map(y=>r.jsx("div",{className:"relative group cursor-pointer",children:r.jsxs("div",{className:"relative overflow-hidden rounded-2xl shadow-xl",children:[r.jsx("img",{src:y.image,alt:y.name,className:"w-full h-80 object-cover group-hover:scale-105 transition-transform duration-500"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"}),r.jsxs("div",{className:"absolute bottom-8 left-8 text-white",children:[r.jsx("h3",{className:"text-2xl font-bold mb-2",children:y.name}),r.jsx("p",{className:"text-lg opacity-90",children:y.description})]})]})},y.id))})]})}),r.jsx("section",{className:"py-20 bg-blue-600",children:r.jsxs("div",{className:"max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8",children:[r.jsx("h2",{className:"text-4xl font-bold text-white mb-6",children:"Prêt à vivre l'aventure ?"}),r.jsx("p",{className:"text-xl text-blue-100 mb-8",children:"Rejoignez SailingLoc et commencez à explorer les mers du monde"}),r.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:E?r.jsxs($,{to:"/bateaux",className:"inline-flex items-center space-x-2 bg-white text-blue-600 px-8 py-3 rounded-full font-medium hover:bg-gray-50 transition-colors",children:[r.jsx(vc,{size:20}),r.jsx("span",{children:"Rechercher un bateau"})]}):r.jsxs(r.Fragment,{children:[r.jsxs($,{to:"/register",className:"inline-flex items-center space-x-2 bg-white text-blue-600 px-8 py-3 rounded-full font-medium hover:bg-gray-50 transition-colors",children:[r.jsx(dp,{size:20}),r.jsx("span",{children:"S'inscrire"})]}),r.jsx($,{to:"/login",className:"inline-flex items-center space-x-2 border-2 border-white text-white px-8 py-3 rounded-full font-medium hover:bg-white hover:text-blue-600 transition-colors",children:r.jsx("span",{children:"Se connecter"})})]})})]})})]})}function yp(){const[s,e]=D.useState([]),[t,n]=D.useState([]),[i,a]=D.useState(!0),[l,c]=D.useState(""),[d,m]=D.useState({type:"",priceRange:"",capacity:""}),[f,p]=D.useState("grid");D.useEffect(()=>{x()},[]);const x=async()=>{try{a(!0),console.log("🔄 Récupération des bateaux depuis l'API MongoDB...");const R=await le(ae.BOATS);console.log(`✅ ${R.length||0} bateaux récupérés depuis MongoDB`),e(R),n(R)}catch(R){console.error("❌ Erreur lors de la récupération des bateaux:",R),c("Erreur lors de la récupération des bateaux: "+R.message)}finally{a(!1)}},j=(R,w)=>{const A={...d,[R]:w};m(A);let S=s;if(A.type&&(S=S.filter(I=>I.type.toLowerCase().includes(A.type.toLowerCase()))),A.priceRange){const[I,O]=A.priceRange.split("-").map(Number);S=S.filter(P=>P.prix_jour>=I&&(O?P.prix_jour<=O:!0))}A.capacity&&(S=S.filter(I=>I.capacite>=parseInt(A.capacity))),n(S)},k=()=>{m({type:"",priceRange:"",capacity:""}),n(s)};return i?r.jsx("div",{className:"min-h-screen bg-gray-50 pt-20 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Chargement des bateaux..."})]})}):l?r.jsx("div",{className:"min-h-screen bg-gray-50 pt-20 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Ge,{className:"h-16 w-16 text-red-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-medium text-gray-600 mb-2",children:"Erreur de chargement"}),r.jsx("p",{className:"text-gray-500",children:l})]})}):r.jsxs("div",{className:"min-h-screen bg-gray-50 pt-20",children:[r.jsx("div",{className:"bg-white shadow-sm border-b",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[r.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-4 sm:mb-0",children:"Nos bateaux"}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("span",{className:"text-sm text-gray-600",children:[t.length," bateau",t.length>1?"x":""," trouvé",t.length>1?"s":""]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>p("grid"),className:`p-2 rounded-md ${f==="grid"?"bg-blue-100 text-blue-600":"text-gray-400"}`,children:r.jsx(np,{size:20})}),r.jsx("button",{onClick:()=>p("list"),className:`p-2 rounded-md ${f==="list"?"bg-blue-100 text-blue-600":"text-gray-400"}`,children:r.jsx(ap,{size:20})})]})]})]})})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[r.jsx("div",{className:"lg:w-1/4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center space-x-2",children:[r.jsx(La,{size:20}),r.jsx("span",{children:"Filtres"})]}),r.jsx("button",{onClick:k,className:"text-sm text-blue-600 hover:text-blue-700",children:"Effacer"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type de bateau"}),r.jsxs("select",{value:d.type,onChange:R=>j("type",R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Tous les types"}),r.jsx("option",{value:"voilier",children:"Voilier"}),r.jsx("option",{value:"bateau à moteur",children:"Bateau à moteur"}),r.jsx("option",{value:"catamaran",children:"Catamaran"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fourchette de prix"}),r.jsxs("select",{value:d.priceRange,onChange:R=>j("priceRange",R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Tous les prix"}),r.jsx("option",{value:"0-100",children:"0€ - 100€"}),r.jsx("option",{value:"100-200",children:"100€ - 200€"}),r.jsx("option",{value:"200-300",children:"200€ - 300€"}),r.jsx("option",{value:"300-500",children:"300€ - 500€"}),r.jsx("option",{value:"500-1000",children:"500€+"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Capacité minimale"}),r.jsxs("select",{value:d.capacity,onChange:R=>j("capacity",R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Toutes capacités"}),r.jsx("option",{value:"2",children:"2+ personnes"}),r.jsx("option",{value:"4",children:"4+ personnes"}),r.jsx("option",{value:"6",children:"6+ personnes"}),r.jsx("option",{value:"8",children:"8+ personnes"}),r.jsx("option",{value:"10",children:"10+ personnes"})]})]})]})]})}),r.jsx("div",{className:"lg:w-3/4",children:t.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Ge,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-medium text-gray-600 mb-2",children:"Aucun bateau trouvé"}),r.jsx("p",{className:"text-gray-500",children:"Essayez de modifier vos filtres ou revenez plus tard."})]}):r.jsx("div",{className:f==="grid"?"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6":"space-y-4",children:t.map(R=>r.jsx(vo,{boat:R,viewMode:f},R._id))})})]})})]})}const bp="/assets/apropos-Dvd8oeAQ.png";function vp(){const s=[{icon:Ge,title:"Large choix de bateaux",description:"Une sélection rigoureuse de bateaux entretenus et vérifiés pour votre sécurité et votre confort."},{icon:hs,title:"Réservation facile et rapide",description:"Réservez en quelques clics avec notre système de réservation en ligne simple et intuitif."},{icon:cd,title:"Paiements sécurisés et service fiable",description:"Transactions 100% sécurisées et équipe disponible 7j/7 pour vous accompagner."}];return r.jsxs("div",{className:"min-h-screen bg-gray-50 pt-20",children:[r.jsxs("section",{className:"relative py-24 bg-gradient-to-br from-blue-600 via-blue-700 to-blue-800",children:[r.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:"url(https://images.pexels.com/photos/1001682/pexels-photo-1001682.jpeg?auto=compress&cs=tinysrgb&w=1600)",opacity:.3}}),r.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[r.jsx("h1",{className:"text-5xl md:text-6xl font-bold text-white mb-8",children:"À propos"}),r.jsx("p",{className:"text-xl text-blue-100 max-w-3xl mx-auto leading-relaxed",children:"Une question ? Écrivez-nous, on vous répond en et si bien !"})]})]}),r.jsx("section",{className:"py-20 bg-white",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[r.jsx("div",{children:r.jsxs("div",{className:"bg-blue-900 text-white p-8 rounded-2xl",children:[r.jsx("h2",{className:"text-3xl font-bold mb-6",children:"À PROPOS"}),r.jsxs("p",{style:{fontSize:"1.1rem",color:"var(--color-gray-800)",marginBottom:"1.5rem"},children:["SailingLoc est une start-up innovante fondée par M. Voisin, spécialisée dans la mise en relation pour la location de voiliers et de bateaux à moteur. Basée à La Rochelle (Charente-Maritime), SailingLoc propose une plateforme collaborative, sécurisée et centrée sur l’expérience utilisateur.",r.jsx("br",{}),r.jsx("br",{}),"Notre service s’adresse aussi bien aux passionnés de navigation qu’aux vacanciers occasionnels, en facilitant la location de bateaux auprès de particuliers ou de professionnels partout en Europe. Que ce soit pour une sortie en mer, une croisière en famille, entre amis ou en couple, SailingLoc vous invite à vivre des aventures maritimes authentiques et inoubliables."]}),r.jsx("h2",{className:"text-orange-500 text-[1.3rem] mb-4 font-bold",children:"Informations légales"}),r.jsxs("ul",{style:{fontSize:"1.08rem",color:"var(--color-gray-800)",listStyle:"none",padding:0,lineHeight:1.8},children:[r.jsxs("li",{children:[r.jsx("b",{children:"Dénomination sociale"})," : SailingLoc"]}),r.jsxs("li",{children:[r.jsx("b",{children:"Date de création"})," : 15/03/2024"]}),r.jsxs("li",{children:[r.jsx("b",{children:"Siège social"})," : 12 Quai Louis Durand, 17000 La Rochelle"]}),r.jsxs("li",{children:[r.jsx("b",{children:"Statut juridique"})," : Société par Actions Simplifiée (SAS)"]}),r.jsxs("li",{children:[r.jsx("b",{children:"Capital social"})," : 15 000 €"]}),r.jsxs("li",{children:[r.jsx("b",{children:"Numéro RCS"})," : LA ROCHELLE B 923 456 789"]}),r.jsxs("li",{children:[r.jsx("b",{children:"SIREN"})," : 923 456 789"]}),r.jsxs("li",{children:[r.jsx("b",{children:"SIRET"})," : 923 456 789 00014"]}),r.jsxs("li",{children:[r.jsx("b",{children:"Code APE/NAF"})," : 7990Z – Services de réservation et activités connexes"]}),r.jsxs("li",{children:[r.jsx("b",{children:"TVA intracommunautaire"})," : FR42923456789"]})]})]})}),r.jsx("div",{className:"relative",children:r.jsx("img",{src:bp,alt:"À propos SailingLoc",className:"rounded-2xl shadow-2xl w-full"})})]})})}),r.jsx("section",{className:"py-16 bg-gray-50",children:r.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:r.jsxs("p",{className:"text-lg text-gray-700 leading-relaxed",children:["Notre ",r.jsx("strong",{children:"mission"})," rendre la navigation ",r.jsx("strong",{children:"accessible"}),", ",r.jsx("strong",{children:"simple"})," et ",r.jsx("strong",{children:"sécurisée"}),"pour tous les passionnés de mer."]})})}),r.jsx("section",{className:"py-20 bg-white",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"text-center mb-16",children:r.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-6",children:"Nos trois piliers"})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:s.map((e,t)=>r.jsxs("div",{className:"text-center group",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-blue-100 rounded-full mb-6 group-hover:bg-blue-600 transition-colors",children:r.jsx(e.icon,{className:"h-10 w-10 text-blue-600 group-hover:text-white transition-colors"})}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:e.title}),r.jsx("p",{className:"text-gray-600 leading-relaxed",children:e.description})]},t))})]})}),r.jsx("section",{className:"py-20 bg-gradient-to-r from-blue-600 to-blue-800",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[r.jsx("h2",{className:"text-4xl font-bold text-white mb-6",children:"Prêt à naviguer avec nous ?"}),r.jsx("p",{className:"text-xl text-blue-100 mb-10 max-w-2xl mx-auto",children:"Découvrez notre sélection de bateaux et réservez votre prochaine aventure"}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[r.jsx($,{to:"/bateaux",className:"bg-white text-blue-600 px-8 py-4 rounded-full font-medium hover:bg-gray-100 transition-colors text-center",children:"Voir les bateaux"}),r.jsx($,{to:"/contact",className:"bg-orange-500 text-white px-8 py-4 rounded-full font-medium hover:bg-orange-600 transition-colors text-center",children:"Nous contacter"})]})]})})]})}function _p(){const[s,e]=D.useState({nom:"",prenom:"",telephone:"",message:"",email:""}),[t,n]=D.useState(!1),[i,a]=D.useState(!1),[l,c]=D.useState({}),d=p=>{const{name:x,value:j}=p.target;e(k=>({...k,[x]:j})),l[x]&&c(k=>({...k,[x]:""}))},m=()=>{const p={};return s.nom.trim()||(p.nom="Le nom est requis"),s.prenom.trim()||(p.prenom="Le prénom est requis"),s.email.trim()?/\S+@\S+\.\S+/.test(s.email)||(p.email="L'email n'est pas valide"):p.email="L'email est requis",s.telephone.trim()||(p.telephone="Le téléphone est requis"),s.message.trim()?s.message.trim().length<10&&(p.message="Le message doit contenir au moins 10 caractères"):p.message="Le message est requis",c(p),Object.keys(p).length===0},f=async p=>{if(p.preventDefault(),!!m()){n(!0);try{console.log("🔄 Envoi du message de contact..."),await le(ae.CONTACT,{method:"POST",body:JSON.stringify({nom:s.nom,prenom:s.prenom,telephone:s.telephone,message:s.message,email:s.email})}),console.log("✅ Message envoyé avec succès"),a(!0),e({nom:"",prenom:"",telephone:"",message:"",email:""}),setTimeout(()=>{a(!1)},5e3)}catch(x){console.error("❌ Erreur lors de l'envoi du message:",x),alert(x.message||"Erreur lors de l'envoi du message.")}finally{n(!1)}}};return r.jsxs("div",{className:"min-h-screen bg-gray-50 pt-20",children:[i&&r.jsx("div",{className:"fixed top-24 right-4 z-50 animate-slide-in-right",children:r.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-green-600 text-white px-6 py-4 rounded-xl shadow-2xl flex items-center space-x-3 max-w-md border border-green-400",children:[r.jsx("div",{className:"animate-bounce-in",children:r.jsx(Xr,{className:"h-7 w-7 text-green-100 flex-shrink-0"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-bold text-lg",children:"Message envoyé ! 🎉"}),r.jsx("p",{className:"text-green-100 text-sm",children:"Nous vous répondrons dans les plus brefs délais."})]}),r.jsx("button",{onClick:()=>a(!1),className:"text-green-100 hover:text-white transition-colors duration-200 hover:bg-green-400 hover:bg-opacity-20 rounded-full p-1",children:r.jsx(It,{className:"h-5 w-5"})})]})}),r.jsxs("section",{className:"relative py-24 bg-gradient-to-br from-blue-600 via-blue-700 to-blue-800",children:[r.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:"url(https://images.pexels.com/photos/1001682/pexels-photo-1001682.jpeg?auto=compress&cs=tinysrgb&w=1600)",opacity:.3}}),r.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[r.jsx("h1",{className:"text-5xl md:text-6xl font-bold text-white mb-8",children:"Contact"}),r.jsx("p",{className:"text-xl text-blue-100 max-w-3xl mx-auto leading-relaxed",children:"Nous simplifions la location de bateaux dans plus de 60 destinations, pour que vous puissiez profiter à tous vos besoins de navigation."})]})]}),r.jsx("section",{className:"py-20 bg-white",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[r.jsxs("div",{className:"bg-blue-900 text-white p-8 rounded-2xl text-center",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white rounded-full mb-6",children:r.jsx(ld,{className:"h-8 w-8 text-blue-900"})}),r.jsx("h3",{className:"text-xl font-bold mb-4",children:"TÉLÉPHONE"}),r.jsx("p",{className:"text-blue-100 mb-2",children:"+33 2 99 40 78 90"}),r.jsx("p",{className:"text-sm text-blue-200",children:"Lun-Ven : 9h-18h"})]}),r.jsxs("div",{className:"bg-blue-900 text-white p-8 rounded-2xl text-center",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white rounded-full mb-6",children:r.jsx(Qs,{className:"h-8 w-8 text-blue-900"})}),r.jsx("h3",{className:"text-xl font-bold mb-4",children:"INFORMATIONS"}),r.jsx("p",{className:"text-blue-100 mb-2",children:"sailinglocequipe@gmail.com"}),r.jsx("p",{className:"text-sm text-blue-200",children:"Réponse sous 24h"})]}),r.jsxs("div",{className:"bg-blue-900 text-white p-8 rounded-2xl text-center",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white rounded-full mb-6",children:r.jsx(ut,{className:"h-8 w-8 text-blue-900"})}),r.jsx("h3",{className:"text-xl font-bold mb-4",children:"ADRESSE"}),r.jsx("p",{className:"text-blue-100 mb-2",children:"12 Quai Louis Durand"}),r.jsx("p",{className:"text-sm text-blue-200",children:"17000 La Rochelle"})]}),r.jsxs("div",{className:"bg-blue-900 text-white p-8 rounded-2xl text-center",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white rounded-full mb-6",children:r.jsx(hs,{className:"h-8 w-8 text-blue-900"})}),r.jsx("h3",{className:"text-xl font-bold mb-4",children:"HORAIRES"}),r.jsx("p",{className:"text-blue-100 mb-2",children:"Lun-Sam : 9h-18h"}),r.jsx("p",{className:"text-sm text-blue-200",children:"Fermé le dimanche"})]})]})})}),r.jsx("section",{className:"py-20 bg-gray-50",children:r.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 md:p-12",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Formulaire de contact"}),r.jsx("p",{className:"text-gray-600",children:"Remplissez le formulaire ci-dessous et nous vous répondrons rapidement"})]}),r.jsxs("form",{onSubmit:f,className:"space-y-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"nom",className:"block text-sm font-bold text-gray-900 mb-3",children:"NOM"}),r.jsx("input",{type:"text",id:"nom",name:"nom",value:s.nom,onChange:d,className:`w-full px-4 py-4 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${l.nom?"border-red-500":"border-gray-200"}`,placeholder:"Votre nom"}),l.nom&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.nom})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"prenom",className:"block text-sm font-bold text-gray-900 mb-3",children:"PRÉNOM"}),r.jsx("input",{type:"text",id:"prenom",name:"prenom",value:s.prenom,onChange:d,className:`w-full px-4 py-4 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${l.prenom?"border-red-500":"border-gray-200"}`,placeholder:"Votre prénom"}),l.prenom&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.prenom})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-bold text-gray-900 mb-3",children:"EMAIL"}),r.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:d,className:`w-full px-4 py-4 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${l.email?"border-red-500":"border-gray-200"}`,placeholder:"Votre email"}),l.email&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.email})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"telephone",className:"block text-sm font-bold text-gray-900 mb-3",children:"TÉLÉPHONE"}),r.jsx("input",{type:"tel",id:"telephone",name:"telephone",value:s.telephone,onChange:d,className:`w-full px-4 py-4 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${l.telephone?"border-red-500":"border-gray-200"}`,placeholder:"Votre numéro de téléphone"}),l.telephone&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.telephone})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"message",className:"block text-sm font-bold text-gray-900 mb-3",children:"MESSAGE"}),r.jsx("textarea",{id:"message",name:"message",value:s.message,onChange:d,rows:6,className:`w-full px-4 py-4 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${l.message?"border-red-500":"border-gray-200"}`,placeholder:"Votre message..."}),l.message&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.message})]}),r.jsx("div",{className:"text-center",children:r.jsx("button",{type:"submit",disabled:t,className:`inline-flex items-center space-x-3 px-12 py-4 rounded-full font-bold text-lg transition-colors ${t?"bg-gray-400 cursor-not-allowed":"bg-orange-500 hover:bg-orange-600"} text-white shadow-lg`,children:t?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white"}),r.jsx("span",{children:"Envoi en cours..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(cp,{size:24}),r.jsx("span",{children:"ENVOYER"})]})})})]})]})})})]})}function ud({isOpen:s,onClose:e,boatData:t,bookingId:n,onReviewAdded:i}){const[a,l]=D.useState({rating:5,comment:"",images:[]}),[c,d]=D.useState(!1),[m,f]=D.useState(""),[p,x]=D.useState(""),j=I=>{l(O=>({...O,rating:I}))},k=I=>{const{name:O,value:P}=I.target;l(V=>({...V,[O]:P}))},R=I=>{const O=Array.from(I.target.files);if(O.length+a.images.length>5){f("Maximum 5 images autorisées");return}const P=O.map(V=>({name:V.name,url:URL.createObjectURL(V),file:V}));l(V=>({...V,images:[...V.images,...P]}))},w=I=>{l(O=>({...O,images:O.images.filter((P,V)=>V!==I)}))},A=async I=>{if(I.preventDefault(),!a.comment.trim()){f("Veuillez ajouter un commentaire");return}d(!0),f("");try{const O=localStorage.getItem("token");if(!O)throw new Error("Vous devez être connecté");const P=a.images.map(v=>v.url);console.log("🔄 Ajout de l'avis dans MongoDB...");const V=await le(ae.REVIEWS,{method:"POST",headers:Fe(O),body:JSON.stringify({boatId:t._id,bookingId:n,rating:a.rating,comment:a.comment.trim(),images:P})});console.log("✅ Avis ajouté avec succès:",V),x("Avis ajouté avec succès !"),i&&i(V.data),setTimeout(()=>{e(),x("")},2e3)}catch(O){console.error("❌ Erreur lors de l'ajout de l'avis:",O),f(O.message)}finally{d(!1)}},S=()=>{l({rating:5,comment:"",images:[]}),f(""),x(""),e()};return s?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[r.jsx(Et,{className:"h-6 w-6 text-blue-600"}),"Laisser un avis"]}),r.jsx("button",{onClick:S,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(It,{className:"h-6 w-6 text-gray-500"})})]}),r.jsxs("form",{onSubmit:A,className:"p-6 space-y-6",children:[m&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:m}),p&&r.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:p}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsxs("h3",{className:"font-medium text-gray-900 mb-2",children:["Bateau : ",t?.nom]}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Type : ",t?.type]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Note globale *"}),r.jsx("div",{className:"flex items-center space-x-1",children:[1,2,3,4,5].map(I=>r.jsx("button",{type:"button",onClick:()=>j(I),className:`p-1 transition-colors ${I<=a.rating?"text-yellow-400 hover:text-yellow-500":"text-gray-300 hover:text-gray-400"}`,children:r.jsx(Jr,{className:"h-8 w-8 fill-current"})},I))}),r.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[a.rating===1&&"Très mauvais",a.rating===2&&"Mauvais",a.rating===3&&"Moyen",a.rating===4&&"Bon",a.rating===5&&"Excellent"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Votre avis *"}),r.jsx("textarea",{name:"comment",value:a.comment,onChange:k,rows:"4",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Partagez votre expérience avec ce bateau... (minimum 10 caractères)",required:!0}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[a.comment.length,"/1000 caractères"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ajouter des photos (optionnel)"}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[r.jsx(fs,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Glissez-déposez vos photos ici ou cliquez pour sélectionner"}),r.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:R,className:"hidden",id:"image-upload"}),r.jsx("label",{htmlFor:"image-upload",className:"inline-block bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors cursor-pointer",children:"Sélectionner des photos"}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Maximum 5 images (JPG, PNG, GIF, WebP)"})]}),a.images.length>0&&r.jsxs("div",{className:"mt-4",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Images sélectionnées :"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:a.images.map((I,O)=>r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:I.url,alt:`Image ${O+1}`,className:"w-full h-24 object-cover rounded-lg"}),r.jsx("button",{type:"button",onClick:()=>w(O),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:r.jsx(Yr,{className:"h-4 w-4"})})]},O))})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:S,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),r.jsx("button",{type:"submit",disabled:c,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:c?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Envoi en cours..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Et,{className:"h-4 w-4"}),"Publier l'avis"]})})]})]})]})}):null}function wp({review:s,onHelpfulClick:e}){const t=i=>new Date(i).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}),n=()=>{e&&e(s._id)};return r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-blue-600 font-semibold text-sm",children:s.userId?.nom?.charAt(0)||"U"})}),r.jsxs("div",{children:[r.jsxs("h4",{className:"font-medium text-gray-900",children:[s.userId?.nom," ",s.userId?.prenom]}),r.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[r.jsx(Vn,{className:"h-4 w-4"}),r.jsx("span",{children:t(s.createdAt)})]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx(Mn,{rating:s.rating,size:20}),r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[s.rating===1&&"Très mauvais",s.rating===2&&"Mauvais",s.rating===3&&"Moyen",s.rating===4&&"Bon",s.rating===5&&"Excellent"]})]})]}),r.jsx("div",{className:"mb-4",children:r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(Bs,{className:"h-5 w-5 text-gray-400 mt-0.5 flex-shrink-0"}),r.jsx("p",{className:"text-gray-700 leading-relaxed",children:s.comment})]})}),s.images&&s.images.length>0&&r.jsx("div",{className:"mb-4",children:r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:s.images.map((i,a)=>r.jsx("div",{className:"relative",children:r.jsx("img",{src:i,alt:`Image ${a+1}`,className:"w-full h-24 object-cover rounded-lg",onError:l=>{l.target.style.display="none"}})},a))})}),r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[r.jsx("div",{className:"flex items-center space-x-4",children:r.jsxs("button",{onClick:n,className:"flex items-center space-x-2 text-gray-600 hover:text-blue-600 transition-colors",children:[r.jsx(up,{className:"h-4 w-4"}),r.jsxs("span",{className:"text-sm",children:["Utile (",s.helpful||0,")"]})]})}),s.bookingId&&r.jsx("div",{className:"text-xs text-gray-500",children:"Avis basé sur une réservation"})]})]})}function Np(){const{id:s}=id(),[e,t]=D.useState(null),[n,i]=D.useState(!0),[a,l]=D.useState(""),[c,d]=D.useState([]),[m,f]=D.useState(!1),[p,x]=D.useState(0),[j,k]=D.useState(0);D.useEffect(()=>{R(),w()},[s]);const R=async()=>{try{i(!0),console.log("🔄 Récupération des détails du bateau depuis MongoDB...");const P=await le(ae.BOAT_DETAIL(s));console.log("✅ Détails du bateau récupérés:",P),t(P)}catch(P){console.error("❌ Erreur lors de la récupération des détails:",P),l("Bateau non trouvé: "+P.message)}finally{i(!1)}},w=async()=>{try{console.log("🔄 Récupération des avis du bateau depuis MongoDB...");const P=await le(ae.BOAT_REVIEWS(s));console.log("✅ Avis du bateau récupérés:",P),d(P.data||[]),x(P.averageRating||0),k(P.total||0)}catch(P){console.error("❌ Erreur lors de la récupération des avis:",P)}},A=()=>{f(!0)},S=P=>{w(),f(!1)},I=()=>{f(!1)},O=async P=>{try{(await fetch(`sailingloc-back-lilac.vercel.app/api/reviews/${P}/helpful`,{method:"PUT"})).ok&&w()}catch(V){console.error("Erreur lors du marquage utile:",V)}};return n?r.jsx("div",{className:"min-h-screen bg-gray-50 pt-20 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Ln,{className:"h-12 w-12 animate-spin text-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Chargement du bateau..."})]})}):a||!e?r.jsx("div",{className:"min-h-screen bg-gray-50 pt-20 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Ge,{className:"h-16 w-16 text-red-400 mx-auto mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:a||"Bateau non trouvé"}),r.jsx($,{to:"/bateaux",className:"text-blue-600 hover:text-blue-700",children:"Retourner à la liste des bateaux"})]})}):r.jsxs("div",{className:"min-h-screen bg-gray-50 pt-20",children:[r.jsx("div",{className:"bg-white shadow-sm border-b",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[r.jsxs($,{to:"/bateaux",className:"inline-flex items-center space-x-2 text-blue-600 hover:text-blue-700 mb-4",children:[r.jsx(ad,{size:20}),r.jsx("span",{children:"Retour aux bateaux"})]}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:e.nom}),r.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Mn,{rating:e.rating||0}),r.jsxs("span",{className:"text-sm text-gray-600",children:["(",e.reviews||0," avis)"]})]}),r.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[r.jsx(ut,{size:16}),r.jsx("span",{className:"capitalize",children:e.type})]})]})]})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:e.image,alt:e.nom,className:"w-full h-96 object-cover rounded-lg shadow-lg"}),r.jsx("div",{className:"absolute top-4 left-4 bg-blue-600 text-white px-3 py-1 rounded-md font-medium",children:e.type})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Description"}),e.description?r.jsx("p",{className:"text-gray-600 mb-6",children:e.description}):r.jsx("p",{className:"text-gray-500 italic mb-6",children:"Aucune description disponible pour ce bateau."}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Caractéristiques"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Xt,{size:16,className:"text-blue-600"}),r.jsxs("span",{children:["Capacité : ",e.capacite," personnes"]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(_i,{size:16,className:"text-blue-600"}),r.jsxs("span",{children:["Longueur : ",e.longueur,"m"]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ut,{size:16,className:"text-blue-600"}),r.jsxs("span",{children:["Localisation : ",e.localisation]})]})]})]}),e.equipements&&e.equipements.length>0&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Équipements"}),r.jsx("div",{className:"space-y-2 text-sm",children:e.equipements.map((P,V)=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ep,{size:16,className:"text-green-600"}),r.jsx("span",{children:P})]},V))})]})]})]})]}),r.jsx("div",{className:"lg:col-span-1",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 sticky top-24",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsxs("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:[e.prix_jour,"€"]}),r.jsx("div",{className:"text-gray-600",children:"par jour"})]}),r.jsxs("div",{className:"space-y-4 mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Capacité"}),r.jsxs("span",{className:"font-medium",children:[e.capacite," personnes"]})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Type"}),r.jsx("span",{className:"font-medium capitalize",children:e.type})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Longueur"}),r.jsxs("span",{className:"font-medium",children:[e.longueur,"m"]})]})]}),r.jsx($,{to:`/reservation/${s}`,className:"w-full bg-orange-500 text-white py-3 px-6 rounded-lg font-medium hover:bg-orange-600 transition-colors flex items-center justify-center",children:"Réserver ce bateau"}),r.jsx("div",{className:"text-center mt-4",children:r.jsx("p",{className:"text-xs text-gray-500",children:"Réservation sécurisée • Annulation gratuite"})})]})})]}),r.jsx("div",{className:"mt-8",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[r.jsx(Bs,{className:"h-6 w-6 text-blue-600"}),"Avis des clients"]}),r.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Mn,{rating:p,size:20}),r.jsxs("span",{className:"text-sm text-gray-600",children:["(",j," avis)"]})]}),p>0&&r.jsxs("span",{className:"text-sm text-gray-500",children:["Note moyenne : ",p.toFixed(1),"/5"]})]})]}),r.jsxs("button",{onClick:A,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[r.jsx(Bs,{className:"h-4 w-4"}),"Laisser un avis"]})]}),r.jsx("div",{className:"space-y-4",children:c.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(Bs,{size:48,className:"mx-auto mb-2 text-gray-300"}),r.jsx("p",{children:"Aucun avis pour le moment"}),r.jsx("p",{className:"text-sm",children:"Soyez le premier à laisser un avis !"})]}):c.map(P=>r.jsx(wp,{review:P,onHelpfulClick:O},P._id))})]})})]}),r.jsx(ud,{isOpen:m,onClose:I,onReviewAdded:S,boatData:e})]})}function dd(s){var e,t,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s)){var i=s.length;for(e=0;e<i;e++)s[e]&&(t=dd(s[e]))&&(n&&(n+=" "),n+=t)}else for(t in s)s[t]&&(n&&(n+=" "),n+=t);return n}function ps(){for(var s,e,t=0,n="",i=arguments.length;t<i;t++)(s=arguments[t])&&(e=dd(s))&&(n&&(n+=" "),n+=e);return n}function Ep(s){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}Ep(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Yn=s=>typeof s=="number"&&!isNaN(s),xs=s=>typeof s=="string",St=s=>typeof s=="function",Tp=s=>xs(s)||Yn(s),qa=s=>xs(s)||St(s)?s:null,jp=(s,e)=>s===!1||Yn(s)&&s>0?s:e,za=s=>D.isValidElement(s)||xs(s)||St(s)||Yn(s);function Ip(s,e,t=300){let{scrollHeight:n,style:i}=s;requestAnimationFrame(()=>{i.minHeight="initial",i.height=n+"px",i.transition=`all ${t}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,t)})})}function Ap({enter:s,exit:e,appendPosition:t=!1,collapse:n=!0,collapseDuration:i=300}){return function({children:a,position:l,preventExitTransition:c,done:d,nodeRef:m,isIn:f,playToast:p}){let x=t?`${s}--${l}`:s,j=t?`${e}--${l}`:e,k=D.useRef(0);return D.useLayoutEffect(()=>{let R=m.current,w=x.split(" "),A=S=>{S.target===m.current&&(p(),R.removeEventListener("animationend",A),R.removeEventListener("animationcancel",A),k.current===0&&S.type!=="animationcancel"&&R.classList.remove(...w))};R.classList.add(...w),R.addEventListener("animationend",A),R.addEventListener("animationcancel",A)},[]),D.useEffect(()=>{let R=m.current,w=()=>{R.removeEventListener("animationend",w),n?Ip(R,d,i):d()};f||(c?w():(k.current=1,R.className+=` ${j}`,R.addEventListener("animationend",w)))},[f]),re.createElement(re.Fragment,null,a)}}function wc(s,e){return{content:hd(s.content,s.props),containerId:s.props.containerId,id:s.props.toastId,theme:s.props.theme,type:s.props.type,data:s.props.data||{},isLoading:s.props.isLoading,icon:s.props.icon,reason:s.removalReason,status:e}}function hd(s,e,t=!1){return D.isValidElement(s)&&!xs(s.type)?D.cloneElement(s,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):St(s)?s({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):s}function Sp({closeToast:s,theme:e,ariaLabel:t="close"}){return re.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:n=>{n.stopPropagation(),s(!0)},"aria-label":t},re.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},re.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function Rp({delay:s,isRunning:e,closeToast:t,type:n="default",hide:i,className:a,controlledProgress:l,progress:c,rtl:d,isIn:m,theme:f}){let p=i||l&&c===0,x={animationDuration:`${s}ms`,animationPlayState:e?"running":"paused"};l&&(x.transform=`scaleX(${c})`);let j=ps("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${f}`,`Toastify__progress-bar--${n}`,{"Toastify__progress-bar--rtl":d}),k=St(a)?a({rtl:d,type:n,defaultClassName:j}):ps(j,a),R={[l&&c>=1?"onTransitionEnd":"onAnimationEnd"]:l&&c<1?null:()=>{m&&t()}};return re.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":p},re.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${f} Toastify__progress-bar--${n}`}),re.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:k,style:x,...R}))}var Cp=1,md=()=>`${Cp++}`;function kp(s,e,t){let n=1,i=0,a=[],l=[],c=e,d=new Map,m=new Set,f=S=>(m.add(S),()=>m.delete(S)),p=()=>{l=Array.from(d.values()),m.forEach(S=>S())},x=({containerId:S,toastId:I,updateId:O})=>{let P=S?S!==s:s!==1,V=d.has(I)&&O==null;return P||V},j=(S,I)=>{d.forEach(O=>{var P;(I==null||I===O.props.toastId)&&((P=O.toggle)==null||P.call(O,S))})},k=S=>{var I,O;(O=(I=S.props)==null?void 0:I.onClose)==null||O.call(I,S.removalReason),S.isActive=!1},R=S=>{if(S==null)d.forEach(k);else{let I=d.get(S);I&&k(I)}p()},w=()=>{i-=a.length,a=[]},A=S=>{var I,O;let{toastId:P,updateId:V}=S.props,v=V==null;S.staleId&&d.delete(S.staleId),S.isActive=!0,d.set(P,S),p(),t(wc(S,v?"added":"updated")),v&&((O=(I=S.props).onOpen)==null||O.call(I))};return{id:s,props:c,observe:f,toggle:j,removeToast:R,toasts:d,clearQueue:w,buildToast:(S,I)=>{if(x(I))return;let{toastId:O,updateId:P,data:V,staleId:v,delay:b}=I,_=P==null;_&&i++;let N={...c,style:c.toastStyle,key:n++,...Object.fromEntries(Object.entries(I).filter(([T,y])=>y!=null)),toastId:O,updateId:P,data:V,isIn:!1,className:qa(I.className||c.toastClassName),progressClassName:qa(I.progressClassName||c.progressClassName),autoClose:I.isLoading?!1:jp(I.autoClose,c.autoClose),closeToast(T){d.get(O).removalReason=T,R(O)},deleteToast(){let T=d.get(O);if(T!=null){if(t(wc(T,"removed")),d.delete(O),i--,i<0&&(i=0),a.length>0){A(a.shift());return}p()}}};N.closeButton=c.closeButton,I.closeButton===!1||za(I.closeButton)?N.closeButton=I.closeButton:I.closeButton===!0&&(N.closeButton=za(c.closeButton)?c.closeButton:!0);let E={content:S,props:N,staleId:v};c.limit&&c.limit>0&&i>c.limit&&_?a.push(E):Yn(b)?setTimeout(()=>{A(E)},b):A(E)},setProps(S){c=S},setToggle:(S,I)=>{let O=d.get(S);O&&(O.toggle=I)},isToastActive:S=>{var I;return(I=d.get(S))==null?void 0:I.isActive},getSnapshot:()=>l}}var We=new Map,Un=[],$a=new Set,Pp=s=>$a.forEach(e=>e(s)),fd=()=>We.size>0;function Dp(){Un.forEach(s=>gd(s.content,s.options)),Un=[]}var Op=(s,{containerId:e})=>{var t;return(t=We.get(e||1))==null?void 0:t.toasts.get(s)};function pd(s,e){var t;if(e)return!!((t=We.get(e))!=null&&t.isToastActive(s));let n=!1;return We.forEach(i=>{i.isToastActive(s)&&(n=!0)}),n}function Vp(s){if(!fd()){Un=Un.filter(e=>s!=null&&e.options.toastId!==s);return}if(s==null||Tp(s))We.forEach(e=>{e.removeToast(s)});else if(s&&("containerId"in s||"id"in s)){let e=We.get(s.containerId);e?e.removeToast(s.id):We.forEach(t=>{t.removeToast(s.id)})}}var Lp=(s={})=>{We.forEach(e=>{e.props.limit&&(!s.containerId||e.id===s.containerId)&&e.clearQueue()})};function gd(s,e){za(s)&&(fd()||Un.push({content:s,options:e}),We.forEach(t=>{t.buildToast(s,e)}))}function Mp(s){var e;(e=We.get(s.containerId||1))==null||e.setToggle(s.id,s.fn)}function xd(s,e){We.forEach(t=>{(e==null||!(e!=null&&e.containerId)||e?.containerId===t.id)&&t.toggle(s,e?.id)})}function Up(s){let e=s.containerId||1;return{subscribe(t){let n=kp(e,s,Pp);We.set(e,n);let i=n.observe(t);return Dp(),()=>{i(),We.delete(e)}},setProps(t){var n;(n=We.get(e))==null||n.setProps(t)},getSnapshot(){var t;return(t=We.get(e))==null?void 0:t.getSnapshot()}}}function Fp(s){return $a.add(s),()=>{$a.delete(s)}}function Bp(s){return s&&(xs(s.toastId)||Yn(s.toastId))?s.toastId:md()}function Zn(s,e){return gd(s,e),e.toastId}function wi(s,e){return{...e,type:e&&e.type||s,toastId:Bp(e)}}function Ni(s){return(e,t)=>Zn(e,wi(s,t))}function J(s,e){return Zn(s,wi("default",e))}J.loading=(s,e)=>Zn(s,wi("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function qp(s,{pending:e,error:t,success:n},i){let a;e&&(a=xs(e)?J.loading(e,i):J.loading(e.render,{...i,...e}));let l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(m,f,p)=>{if(f==null){J.dismiss(a);return}let x={type:m,...l,...i,data:p},j=xs(f)?{render:f}:f;return a?J.update(a,{...x,...j}):J(j.render,{...x,...j}),p},d=St(s)?s():s;return d.then(m=>c("success",n,m)).catch(m=>c("error",t,m)),d}J.promise=qp;J.success=Ni("success");J.info=Ni("info");J.error=Ni("error");J.warning=Ni("warning");J.warn=J.warning;J.dark=(s,e)=>Zn(s,wi("default",{theme:"dark",...e}));function zp(s){Vp(s)}J.dismiss=zp;J.clearWaitingQueue=Lp;J.isActive=pd;J.update=(s,e={})=>{let t=Op(s,e);if(t){let{props:n,content:i}=t,a={delay:100,...n,...e,toastId:e.toastId||s,updateId:md()};a.toastId!==s&&(a.staleId=s);let l=a.render||i;delete a.render,Zn(l,a)}};J.done=s=>{J.update(s,{progress:1})};J.onChange=Fp;J.play=s=>xd(!0,s);J.pause=s=>xd(!1,s);function $p(s){var e;let{subscribe:t,getSnapshot:n,setProps:i}=D.useRef(Up(s)).current;i(s);let a=(e=D.useSyncExternalStore(t,n,n))==null?void 0:e.slice();function l(c){if(!a)return[];let d=new Map;return s.newestOnTop&&a.reverse(),a.forEach(m=>{let{position:f}=m.props;d.has(f)||d.set(f,[]),d.get(f).push(m)}),Array.from(d,m=>c(m[0],m[1]))}return{getToastToRender:l,isToastActive:pd,count:a?.length}}function Hp(s){let[e,t]=D.useState(!1),[n,i]=D.useState(!1),a=D.useRef(null),l=D.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:c,pauseOnHover:d,closeToast:m,onClick:f,closeOnClick:p}=s;Mp({id:s.toastId,containerId:s.containerId,fn:t}),D.useEffect(()=>{if(s.pauseOnFocusLoss)return x(),()=>{j()}},[s.pauseOnFocusLoss]);function x(){document.hasFocus()||A(),window.addEventListener("focus",w),window.addEventListener("blur",A)}function j(){window.removeEventListener("focus",w),window.removeEventListener("blur",A)}function k(v){if(s.draggable===!0||s.draggable===v.pointerType){S();let b=a.current;l.canCloseOnClick=!0,l.canDrag=!0,b.style.transition="none",s.draggableDirection==="x"?(l.start=v.clientX,l.removalDistance=b.offsetWidth*(s.draggablePercent/100)):(l.start=v.clientY,l.removalDistance=b.offsetHeight*(s.draggablePercent===80?s.draggablePercent*1.5:s.draggablePercent)/100)}}function R(v){let{top:b,bottom:_,left:N,right:E}=a.current.getBoundingClientRect();v.nativeEvent.type!=="touchend"&&s.pauseOnHover&&v.clientX>=N&&v.clientX<=E&&v.clientY>=b&&v.clientY<=_?A():w()}function w(){t(!0)}function A(){t(!1)}function S(){l.didMove=!1,document.addEventListener("pointermove",O),document.addEventListener("pointerup",P)}function I(){document.removeEventListener("pointermove",O),document.removeEventListener("pointerup",P)}function O(v){let b=a.current;if(l.canDrag&&b){l.didMove=!0,e&&A(),s.draggableDirection==="x"?l.delta=v.clientX-l.start:l.delta=v.clientY-l.start,l.start!==v.clientX&&(l.canCloseOnClick=!1);let _=s.draggableDirection==="x"?`${l.delta}px, var(--y)`:`0, calc(${l.delta}px + var(--y))`;b.style.transform=`translate3d(${_},0)`,b.style.opacity=`${1-Math.abs(l.delta/l.removalDistance)}`}}function P(){I();let v=a.current;if(l.canDrag&&l.didMove&&v){if(l.canDrag=!1,Math.abs(l.delta)>l.removalDistance){i(!0),s.closeToast(!0),s.collapseAll();return}v.style.transition="transform 0.2s, opacity 0.2s",v.style.removeProperty("transform"),v.style.removeProperty("opacity")}}let V={onPointerDown:k,onPointerUp:R};return c&&d&&(V.onMouseEnter=A,s.stacked||(V.onMouseLeave=w)),p&&(V.onClick=v=>{f&&f(v),l.canCloseOnClick&&m(!0)}),{playToast:w,pauseToast:A,isRunning:e,preventExitTransition:n,toastRef:a,eventHandlers:V}}var Gp=typeof window<"u"?D.useLayoutEffect:D.useEffect,Ei=({theme:s,type:e,isLoading:t,...n})=>re.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:s==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...n});function Wp(s){return re.createElement(Ei,{...s},re.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function Kp(s){return re.createElement(Ei,{...s},re.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function Qp(s){return re.createElement(Ei,{...s},re.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function Xp(s){return re.createElement(Ei,{...s},re.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function Jp(){return re.createElement("div",{className:"Toastify__spinner"})}var Ha={info:Kp,warning:Wp,success:Qp,error:Xp,spinner:Jp},Yp=s=>s in Ha;function Zp({theme:s,type:e,isLoading:t,icon:n}){let i=null,a={theme:s,type:e};return n===!1||(St(n)?i=n({...a,isLoading:t}):D.isValidElement(n)?i=D.cloneElement(n,a):t?i=Ha.spinner():Yp(e)&&(i=Ha[e](a))),i}var eg=s=>{let{isRunning:e,preventExitTransition:t,toastRef:n,eventHandlers:i,playToast:a}=Hp(s),{closeButton:l,children:c,autoClose:d,onClick:m,type:f,hideProgressBar:p,closeToast:x,transition:j,position:k,className:R,style:w,progressClassName:A,updateId:S,role:I,progress:O,rtl:P,toastId:V,deleteToast:v,isIn:b,isLoading:_,closeOnClick:N,theme:E,ariaLabel:T}=s,y=ps("Toastify__toast",`Toastify__toast-theme--${E}`,`Toastify__toast--${f}`,{"Toastify__toast--rtl":P},{"Toastify__toast--close-on-click":N}),ue=St(R)?R({rtl:P,position:k,type:f,defaultClassName:y}):ps(y,R),Ne=Zp(s),Dt=!!O||!d,F={closeToast:x,type:f,theme:E},ne=null;return l===!1||(St(l)?ne=l(F):D.isValidElement(l)?ne=D.cloneElement(l,F):ne=Sp(F)),re.createElement(j,{isIn:b,done:v,position:k,preventExitTransition:t,nodeRef:n,playToast:a},re.createElement("div",{id:V,tabIndex:0,onClick:m,"data-in":b,className:ue,...i,style:w,ref:n,...b&&{role:I,"aria-label":T}},Ne!=null&&re.createElement("div",{className:ps("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!_})},Ne),hd(c,s,!e),ne,!s.customProgressBar&&re.createElement(Rp,{...S&&!Dt?{key:`p-${S}`}:{},rtl:P,theme:E,delay:d,isRunning:e,isIn:b,closeToast:x,hide:p,type:f,className:A,controlledProgress:Dt,progress:O||0})))},tg=(s,e=!1)=>({enter:`Toastify--animate Toastify__${s}-enter`,exit:`Toastify--animate Toastify__${s}-exit`,appendPosition:e}),sg=Ap(tg("bounce",!0)),ng={position:"top-right",transition:sg,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:s=>s.altKey&&s.code==="KeyT"};function _o(s){let e={...ng,...s},t=s.stacked,[n,i]=D.useState(!0),a=D.useRef(null),{getToastToRender:l,isToastActive:c,count:d}=$p(e),{className:m,style:f,rtl:p,containerId:x,hotKeys:j}=e;function k(w){let A=ps("Toastify__toast-container",`Toastify__toast-container--${w}`,{"Toastify__toast-container--rtl":p});return St(m)?m({position:w,rtl:p,defaultClassName:A}):ps(A,qa(m))}function R(){t&&(i(!0),J.play())}return Gp(()=>{var w;if(t){let A=a.current.querySelectorAll('[data-in="true"]'),S=12,I=(w=e.position)==null?void 0:w.includes("top"),O=0,P=0;Array.from(A).reverse().forEach((V,v)=>{let b=V;b.classList.add("Toastify__toast--stacked"),v>0&&(b.dataset.collapsed=`${n}`),b.dataset.pos||(b.dataset.pos=I?"top":"bot");let _=O*(n?.2:1)+(n?0:S*v);b.style.setProperty("--y",`${I?_:_*-1}px`),b.style.setProperty("--g",`${S}`),b.style.setProperty("--s",`${1-(n?P:0)}`),O+=b.offsetHeight,P+=.025})}},[n,d,t]),D.useEffect(()=>{function w(A){var S;let I=a.current;j(A)&&((S=I.querySelector('[tabIndex="0"]'))==null||S.focus(),i(!1),J.pause()),A.key==="Escape"&&(document.activeElement===I||I!=null&&I.contains(document.activeElement))&&(i(!0),J.play())}return document.addEventListener("keydown",w),()=>{document.removeEventListener("keydown",w)}},[j]),re.createElement("section",{ref:a,className:"Toastify",id:x,onMouseEnter:()=>{t&&(i(!1),J.pause())},onMouseLeave:R,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},l((w,A)=>{let S=A.length?{...f}:{...f,pointerEvents:"none"};return re.createElement("div",{tabIndex:-1,className:k(w),"data-stacked":t,style:S,key:`c-${w}`},A.map(({content:I,props:O})=>re.createElement(eg,{...O,stacked:t,collapseAll:R,isIn:c(O.toastId,O.containerId),key:`t-${O.key}`},I)))}))}function rg(){const s=vi(),[e,t]=D.useState({email:"",password:""}),[n,i]=D.useState(!1),[a,l]=D.useState(!1),[c,d]=D.useState({}),m=()=>{const p={};return e.email?/\S+@\S+\.\S+/.test(e.email)||(p.email="L'email n'est pas valide"):p.email="L'email est requis",e.password?e.password.length<6&&(p.password="Le mot de passe doit contenir au moins 6 caractères"):p.password="Le mot de passe est requis",d(p),Object.keys(p).length===0},f=async p=>{if(p.preventDefault(),!!m()){l(!0);try{console.log("🔄 Connexion en cours...");const x=await le(ae.LOGIN,{method:"POST",body:JSON.stringify({email:e.email,password:e.password})});console.log("✅ Connexion réussie:",x),localStorage.setItem("token",x.token),localStorage.setItem("userPrenom",x.user.prenom),localStorage.setItem("userRole",x.user.role),localStorage.setItem("userId",x.user.id),localStorage.setItem("userNom",x.user.nom),localStorage.setItem("userEmail",x.user.email),localStorage.setItem("userTel",x.user.tel),J.success(r.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[r.jsx("span",{style:{fontSize:22,marginRight:10},children:"✅"}),r.jsxs("div",{children:[r.jsx("strong",{style:{color:"#16a34a"},children:"Connexion réussie !"}),r.jsx("br",{}),"Bienvenue ",r.jsx("span",{style:{color:"#16a34a"},children:x.user.prenom})," 👋"]})]}),{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light",style:{background:"#e6f9ec",color:"#16a34a",fontWeight:500,fontSize:18,border:"2px solid #16a34a"},icon:!1}),x.user.role==="admin"?s("/admin"):s("/")}catch(x){console.error("❌ Erreur lors de la connexion:",x),alert(x.message||"Erreur lors de la connexion.")}finally{l(!1)}}};return r.jsxs("div",{className:"min-h-screen bg-gray-50 pt-20",children:[r.jsxs("section",{className:"relative py-16 bg-gradient-to-br from-blue-800 via-blue-900 to-blue-800",children:[r.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:"url(https://images.pexels.com/photos/1001682/pexels-photo-1001682.jpeg?auto=compress&cs=tinysrgb&w=1600)",opacity:.3}}),r.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[r.jsx("div",{className:"flex items-center justify-center mb-6",children:r.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white tracking-wider",children:"SAILINGLOC"})}),r.jsx("p",{className:"text-xl text-blue-100 max-w-2xl mx-auto",children:"Connectez-vous pour accéder à votre espace personnel"})]})]}),r.jsx("section",{className:"py-16",children:r.jsx("div",{className:"max-w-md mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"CONNEXION"}),r.jsx("p",{className:"text-gray-600",children:"Accédez à votre compte SailingLoc"})]}),r.jsxs("form",{onSubmit:f,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-bold text-gray-900 mb-3 uppercase",children:"EMAIL"}),r.jsx("div",{className:"relative",children:r.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:p=>t(x=>({...x,email:p.target.value})),className:`w-full pl-10 pr-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${c.email?"border-red-500":"border-gray-200"}`,placeholder:"votre@email.com"})}),c.email&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:c.email})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-bold text-gray-900 mb-3 uppercase",children:"MOT DE PASSE"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:n?"text":"password",id:"password",name:"password",value:e.password,onChange:p=>t(x=>({...x,password:p.target.value})),className:`w-full pl-10 pr-12 py-3 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${c.password?"border-red-500":"border-gray-200"}`,placeholder:"Votre mot de passe"}),r.jsx("button",{type:"button",onClick:()=>i(!n),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:n?r.jsx(Va,{size:20}):r.jsx(Ks,{size:20})})]}),c.password&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:c.password})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),r.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Se souvenir de moi"})]}),r.jsx($,{to:"/mot-de-passe-oublie",className:"text-sm text-blue-600 hover:text-blue-700",children:"Mot de passe oublié ?"})]}),r.jsx("button",{type:"submit",disabled:a,className:`w-full py-3 px-6 rounded-full font-bold text-lg transition-colors ${a?"bg-gray-400 cursor-not-allowed":"bg-orange-500 hover:bg-orange-600"} text-white shadow-lg`,children:a?r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx(Ln,{className:"animate-spin h-5 w-5 text-white"}),r.jsx("span",{children:"CONNEXION..."})]}):"SE CONNECTER"})]}),r.jsx("div",{className:"mt-8 text-center",children:r.jsxs("p",{className:"text-gray-600",children:["Pas encore de compte ?"," ",r.jsx($,{to:"/inscription",className:"text-blue-600 hover:text-blue-700 font-semibold",children:"Créer un compte"})]})})]})})})]})}function ig(){const[s,e]=D.useState({prenom:"",nom:"",email:"",telephone:"",password:"",confirmPassword:"",acceptTerms:!1,userType:"locataire"}),[t,n]=D.useState(!1),[i,a]=D.useState(!1),[l,c]=D.useState({}),[d,m]=D.useState(!1),f=vi(),p=k=>{const{name:R,value:w,type:A,checked:S}=k.target;e(I=>({...I,[R]:A==="checkbox"?S:w})),l[R]&&c(I=>({...I,[R]:""}))},x=()=>{const k={};return s.prenom.trim()||(k.prenom="Le prénom est requis"),s.nom.trim()||(k.nom="Le nom est requis"),s.email.trim()?/\S+@\S+\.\S+/.test(s.email)||(k.email="Format d'email invalide"):k.email="L'email est requis",s.telephone.trim()||(k.telephone="Le téléphone est requis"),s.password.trim()?s.password.length<6&&(k.password="Le mot de passe doit contenir au moins 6 caractères"):k.password="Le mot de passe est requis",s.password!==s.confirmPassword&&(k.confirmPassword="Les mots de passe ne correspondent pas"),s.acceptTerms||(k.acceptTerms="Vous devez accepter les conditions d'utilisation"),c(k),Object.keys(k).length===0},j=async k=>{if(k.preventDefault(),!!x()){m(!0);try{await new Promise(w=>setTimeout(w,1e3)),console.log("🔄 Création de l'utilisateur dans MongoDB..."),console.log("📤 Données envoyées:",{nom:s.nom,prenom:s.prenom,email:s.email,password:s.password,tel:s.telephone.replace(/\D/g,""),role:Ba(s.userType)});const R=await le(ae.REGISTER,{method:"POST",body:JSON.stringify({nom:s.nom,prenom:s.prenom,email:s.email,password:s.password,tel:s.telephone.replace(/\D/g,""),role:Ba(s.userType)})});console.log("✅ Utilisateur créé avec succès:",R),localStorage.setItem("userNom",R.user.nom),J.success(r.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[r.jsx("span",{style:{fontSize:22,marginRight:10},children:"✅"}),r.jsxs("div",{children:[r.jsx("strong",{style:{color:"#16a34a"},children:"Inscription réussie !"}),r.jsx("br",{}),"Bienvenue ",r.jsx("span",{style:{color:"#16a34a"},children:R.user.nom})," 👋"]})]}),{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light",style:{background:"#e6f9ec",color:"#16a34a",fontWeight:500,fontSize:18,border:"2px solid #16a34a"},icon:!1}),setTimeout(()=>f("/connexion"),3100)}catch(R){console.error("❌ Erreur lors de la création de l'utilisateur:",R);let w="Erreur lors de l'inscription.";R.message&&(R.message.includes("Rôle invalide")?w="Type de compte invalide. Veuillez réessayer.":R.message.includes("email")?w="Cette adresse email est déjà utilisée.":R.message.includes("téléphone")?w="Ce numéro de téléphone est déjà utilisé.":R.message.includes("serveur")||R.message.includes("server")?w="Erreur de serveur. Veuillez réessayer dans quelques minutes.":w=R.message),J.error(w,{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light",style:{background:"#fde6e6",color:"#991b1b",fontWeight:500,fontSize:18,border:"2px solid #991b1b"},icon:!1})}finally{m(!1)}}};return r.jsxs("div",{className:"min-h-screen bg-gray-50 pt-20",children:[r.jsx(_o,{}),r.jsxs("section",{className:"relative py-16 bg-gradient-to-br from-blue-800 via-blue-900 to-blue-800",children:[r.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:"url(https://images.pexels.com/photos/1001682/pexels-photo-1001682.jpeg?auto=compress&cs=tinysrgb&w=1600)",opacity:.3}}),r.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[r.jsxs("div",{className:"flex items-center justify-center mb-6",children:[r.jsx(Da,{className:"h-12 w-12 text-white mr-4"}),r.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white tracking-wider",children:"SAILINGLOC"})]}),r.jsx("p",{className:"text-xl text-blue-100 max-w-2xl mx-auto",children:"Rejoignez la communauté des passionnés de navigation"})]})]}),r.jsx("section",{className:"py-16",children:r.jsx("div",{className:"max-w-lg mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"INSCRIPTION"}),r.jsx("p",{className:"text-gray-600",children:"Créez votre compte SailingLoc"})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-3 uppercase",children:"TYPE DE COMPTE"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("label",{className:`flex items-center justify-center p-4 border-2 rounded-lg cursor-pointer transition-colors ${s.userType==="locataire"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx("input",{type:"radio",name:"userType",value:"locataire",checked:s.userType==="locataire",onChange:p,className:"sr-only"}),r.jsxs("div",{className:"text-center",children:[r.jsx(An,{className:"h-8 w-8 mx-auto mb-2"}),r.jsx("span",{className:"font-semibold",children:"LOCATAIRE"}),r.jsx("p",{className:"text-xs mt-1",children:"Louer des bateaux"})]})]}),r.jsxs("label",{className:`flex items-center justify-center p-4 border-2 rounded-lg cursor-pointer transition-colors ${s.userType==="proprietaire"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx("input",{type:"radio",name:"userType",value:"proprietaire",checked:s.userType==="proprietaire",onChange:p,className:"sr-only"}),r.jsxs("div",{className:"text-center",children:[r.jsx(Da,{className:"h-8 w-8 mx-auto mb-2"}),r.jsx("span",{className:"font-semibold",children:"PROPRIÉTAIRE"}),r.jsx("p",{className:"text-xs mt-1",children:"Mettre en location"})]})]})]})]}),r.jsxs("form",{onSubmit:j,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"prenom",className:"block text-sm font-bold text-gray-900 mb-3 uppercase",children:"PRÉNOM"}),r.jsxs("div",{className:"relative",children:[r.jsx(An,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"text",id:"prenom",name:"prenom",value:s.prenom,onChange:p,className:`w-full pl-10 pr-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${l.prenom?"border-red-500":"border-gray-200"}`,placeholder:"Prénom"})]}),l.prenom&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.prenom})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"nom",className:"block text-sm font-bold text-gray-900 mb-3 uppercase",children:"NOM"}),r.jsxs("div",{className:"relative",children:[r.jsx(An,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"text",id:"nom",name:"nom",value:s.nom,onChange:p,className:`w-full pl-10 pr-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${l.nom?"border-red-500":"border-gray-200"}`,placeholder:"Nom"})]}),l.nom&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.nom})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-bold text-gray-900 mb-3 uppercase",children:"EMAIL"}),r.jsxs("div",{className:"relative",children:[r.jsx(Qs,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:p,className:`w-full pl-10 pr-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${l.email?"border-red-500":"border-gray-200"}`,placeholder:"votre@email.com"})]}),l.email&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.email})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"telephone",className:"block text-sm font-bold text-gray-900 mb-3 uppercase",children:"TÉLÉPHONE"}),r.jsxs("div",{className:"relative",children:[r.jsx(ld,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"tel",id:"telephone",name:"telephone",value:s.telephone,onChange:p,className:`w-full pl-10 pr-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${l.telephone?"border-red-500":"border-gray-200"}`,placeholder:"06 12 34 56 78"})]}),l.telephone&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.telephone})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-bold text-gray-900 mb-3 uppercase",children:"MOT DE PASSE"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ma,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),r.jsx("input",{type:t?"text":"password",id:"password",name:"password",value:s.password,onChange:p,className:`w-full pl-10 pr-12 py-3 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${l.password?"border-red-500":"border-gray-200"}`,placeholder:"Mot de passe"}),r.jsx("button",{type:"button",onClick:()=>n(!t),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:t?r.jsx(Va,{size:20}):r.jsx(Ks,{size:20})})]}),l.password&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.password})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-bold text-gray-900 mb-3 uppercase",children:"CONFIRMER LE MOT DE PASSE"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ma,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),r.jsx("input",{type:i?"text":"password",id:"confirmPassword",name:"confirmPassword",value:s.confirmPassword,onChange:p,className:`w-full pl-10 pr-12 py-3 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${l.confirmPassword?"border-red-500":"border-gray-200"}`,placeholder:"Confirmer le mot de passe"}),r.jsx("button",{type:"button",onClick:()=>a(!i),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:i?r.jsx(Va,{size:20}):r.jsx(Ks,{size:20})})]}),l.confirmPassword&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.confirmPassword})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-start space-x-3",children:[r.jsx("input",{type:"checkbox",name:"acceptTerms",checked:s.acceptTerms,onChange:p,className:"mt-1 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),r.jsxs("span",{className:"text-sm text-gray-600",children:["J'accepte les"," ",r.jsx($,{to:"/conditions",className:"text-blue-600 hover:text-blue-700",children:"conditions d'utilisation"})," ","et la"," ",r.jsx($,{to:"/confidentialite",className:"text-blue-600 hover:text-blue-700",children:"politique de confidentialité"})]})]}),l.acceptTerms&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.acceptTerms})]}),r.jsx("button",{type:"submit",disabled:d,className:`w-full py-3 px-6 rounded-full font-bold text-lg transition-colors ${d?"bg-gray-400 cursor-not-allowed":"bg-orange-500 hover:bg-orange-600"} text-white shadow-lg`,children:d?r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),r.jsx("span",{children:"INSCRIPTION..."})]}):"CRÉER MON COMPTE"})]}),r.jsx("div",{className:"mt-8 text-center",children:r.jsxs("p",{className:"text-gray-600",children:["Déjà un compte ?"," ",r.jsx($,{to:"/connexion",className:"text-blue-600 hover:text-blue-700 font-semibold",children:"Se connecter"})]})})]})})})]})}function ag(){let s=[];if(typeof window<"u")try{s=JSON.parse(localStorage.getItem("favorisBoats"))||[]}catch{s=[]}return r.jsx("div",{className:"min-h-screen bg-gray-50 pt-24 flex flex-col items-center",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-2xl text-center",children:[r.jsx("h2",{className:"text-3xl font-bold text-blue-700 mb-6",children:"Mes favoris"}),s.length===0?r.jsx("p",{className:"text-gray-600",children:"Aucun bateau en favori pour le moment."}):r.jsx("ul",{className:"space-y-4",children:s.map((e,t)=>r.jsxs("li",{className:"border-b pb-4 text-left",children:[r.jsx("strong",{children:e.name})," — ",e.location]},t))})]})})}const og=()=>{};var Nc={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=function(s){const e=[];let t=0;for(let n=0;n<s.length;n++){let i=s.charCodeAt(n);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&n+1<s.length&&(s.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(s.charCodeAt(++n)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},lg=function(s){const e=[];let t=0,n=0;for(;t<s.length;){const i=s[t++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const a=s[t++];e[n++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=s[t++],l=s[t++],c=s[t++],d=((i&7)<<18|(a&63)<<12|(l&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const a=s[t++],l=s[t++];e[n++]=String.fromCharCode((i&15)<<12|(a&63)<<6|l&63)}}return e.join("")},bd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<s.length;i+=3){const a=s[i],l=i+1<s.length,c=l?s[i+1]:0,d=i+2<s.length,m=d?s[i+2]:0,f=a>>2,p=(a&3)<<4|c>>4;let x=(c&15)<<2|m>>6,j=m&63;d||(j=64,l||(x=64)),n.push(t[f],t[p],t[x],t[j])}return n.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(yd(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):lg(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<s.length;){const a=t[s.charAt(i++)],c=i<s.length?t[s.charAt(i)]:0;++i;const m=i<s.length?t[s.charAt(i)]:64;++i;const p=i<s.length?t[s.charAt(i)]:64;if(++i,a==null||c==null||m==null||p==null)throw new cg;const x=a<<2|c>>4;if(n.push(x),m!==64){const j=c<<4&240|m>>2;if(n.push(j),p!==64){const k=m<<6&192|p;n.push(k)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class cg extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ug=function(s){const e=yd(s);return bd.encodeByteArray(e,!0)},Zr=function(s){return ug(s).replace(/\./g,"")},vd=function(s){try{return bd.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg=()=>dg().__FIREBASE_DEFAULTS__,mg=()=>{if(typeof process>"u"||typeof Nc>"u")return;const s=Nc.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},fg=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&vd(s[1]);return e&&JSON.parse(e)},Ti=()=>{try{return og()||hg()||mg()||fg()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},_d=s=>Ti()?.emulatorHosts?.[s],wd=s=>{const e=_d(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},Nd=()=>Ti()?.config,Ed=s=>Ti()?.[`_${s}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function wo(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",i=s.iat||0,a=s.sub||s.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Zr(JSON.stringify(t)),Zr(JSON.stringify(l)),""].join(".")}const Sn={};function gg(){const s={prod:[],emulator:[]};for(const e of Object.keys(Sn))Sn[e]?s.emulator.push(e):s.prod.push(e);return s}function xg(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let Ec=!1;function No(s,e){if(typeof window>"u"||typeof document>"u"||!rs(window.location.host)||Sn[s]===e||Sn[s]||Ec)return;Sn[s]=e;function t(x){return`__firebase__banner__${x}`}const n="__firebase__banner",a=gg().prod.length>0;function l(){const x=document.getElementById(n);x&&x.remove()}function c(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function d(x,j){x.setAttribute("width","24"),x.setAttribute("id",j),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function m(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{Ec=!0,l()},x}function f(x,j){x.setAttribute("id",j),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function p(){const x=xg(n),j=t("text"),k=document.getElementById(j)||document.createElement("span"),R=t("learnmore"),w=document.getElementById(R)||document.createElement("a"),A=t("preprendIcon"),S=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const I=x.element;c(I),f(w,R);const O=m();d(S,A),I.append(S,k,w,O),document.body.appendChild(I)}a?(k.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yg(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function bg(){const s=Ti()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vg(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _g(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function wg(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ng(){const s=qe();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function Eg(){return!bg()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Tg(){try{return typeof indexedDB=="object"}catch{return!1}}function jg(){return new Promise((s,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(n),s(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig="FirebaseError";class _t extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=Ig,Object.setPrototypeOf(this,_t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,er.prototype.create)}}class er{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],l=a?Ag(a,n):"Error",c=`${this.serviceName}: ${l} (${i}).`;return new _t(i,c,n)}}function Ag(s,e){return s.replace(Sg,(t,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const Sg=/\{\$([^}]+)}/g;function Rg(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function ys(s,e){if(s===e)return!0;const t=Object.keys(s),n=Object.keys(e);for(const i of t){if(!n.includes(i))return!1;const a=s[i],l=e[i];if(Tc(a)&&Tc(l)){if(!ys(a,l))return!1}else if(a!==l)return!1}for(const i of n)if(!t.includes(i))return!1;return!0}function Tc(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(s){const e=[];for(const[t,n]of Object.entries(s))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Nn(s){const e={};return s.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,a]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function En(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function Cg(s,e){const t=new kg(s,e);return t.subscribe.bind(t)}class kg{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");Pg(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:n},i.next===void 0&&(i.next=ba),i.error===void 0&&(i.error=ba),i.complete===void 0&&(i.complete=ba);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Pg(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function ba(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(s){return s&&s._delegate?s._delegate:s}class Jt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new pg;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Vg(e))try{this.getOrInitializeService({instanceIdentifier:ds})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});n.resolve(a)}catch{}}}}clearInstance(e=ds){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ds){return this.instances.has(e)}getOptions(e=ds){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[a,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);n===c&&l.resolve(i)}return i}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(n)??new Set;i.add(e),this.onInitCallbacks.set(n,i);const a=this.instances.get(n);return a&&e(a,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Og(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=ds){return this.component?this.component.multipleInstances?e:ds:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Og(s){return s===ds?void 0:s}function Vg(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Dg(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Y;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Y||(Y={}));const Mg={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},Ug=Y.INFO,Fg={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},Bg=(s,e,...t)=>{if(e<s.logLevel)return;const n=new Date().toISOString(),i=Fg[e];if(i)console[i](`[${n}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Eo{constructor(e){this.name=e,this._logLevel=Ug,this._logHandler=Bg,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Y))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Mg[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...e),this._logHandler(this,Y.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...e),this._logHandler(this,Y.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...e),this._logHandler(this,Y.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...e),this._logHandler(this,Y.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...e),this._logHandler(this,Y.ERROR,...e)}}const qg=(s,e)=>e.some(t=>s instanceof t);let jc,Ic;function zg(){return jc||(jc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $g(){return Ic||(Ic=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jd=new WeakMap,Ga=new WeakMap,Id=new WeakMap,va=new WeakMap,To=new WeakMap;function Hg(s){const e=new Promise((t,n)=>{const i=()=>{s.removeEventListener("success",a),s.removeEventListener("error",l)},a=()=>{t(Ht(s.result)),i()},l=()=>{n(s.error),i()};s.addEventListener("success",a),s.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&jd.set(t,s)}).catch(()=>{}),To.set(e,s),e}function Gg(s){if(Ga.has(s))return;const e=new Promise((t,n)=>{const i=()=>{s.removeEventListener("complete",a),s.removeEventListener("error",l),s.removeEventListener("abort",l)},a=()=>{t(),i()},l=()=>{n(s.error||new DOMException("AbortError","AbortError")),i()};s.addEventListener("complete",a),s.addEventListener("error",l),s.addEventListener("abort",l)});Ga.set(s,e)}let Wa={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return Ga.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Id.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ht(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function Wg(s){Wa=s(Wa)}function Kg(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=s.call(_a(this),e,...t);return Id.set(n,e.sort?e.sort():[e]),Ht(n)}:$g().includes(s)?function(...e){return s.apply(_a(this),e),Ht(jd.get(this))}:function(...e){return Ht(s.apply(_a(this),e))}}function Qg(s){return typeof s=="function"?Kg(s):(s instanceof IDBTransaction&&Gg(s),qg(s,zg())?new Proxy(s,Wa):s)}function Ht(s){if(s instanceof IDBRequest)return Hg(s);if(va.has(s))return va.get(s);const e=Qg(s);return e!==s&&(va.set(s,e),To.set(e,s)),e}const _a=s=>To.get(s);function Xg(s,e,{blocked:t,upgrade:n,blocking:i,terminated:a}={}){const l=indexedDB.open(s,e),c=Ht(l);return n&&l.addEventListener("upgradeneeded",d=>{n(Ht(l.result),d.oldVersion,d.newVersion,Ht(l.transaction),d)}),t&&l.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),c.then(d=>{a&&d.addEventListener("close",()=>a()),i&&d.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),c}const Jg=["get","getKey","getAll","getAllKeys","count"],Yg=["put","add","delete","clear"],wa=new Map;function Ac(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(wa.get(e))return wa.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,i=Yg.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(i||Jg.includes(t)))return;const a=async function(l,...c){const d=this.transaction(l,i?"readwrite":"readonly");let m=d.store;return n&&(m=m.index(c.shift())),(await Promise.all([m[t](...c),i&&d.done]))[0]};return wa.set(e,a),a}Wg(s=>({...s,get:(e,t,n)=>Ac(e,t)||s.get(e,t,n),has:(e,t)=>!!Ac(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(ex(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function ex(s){return s.getComponent()?.type==="VERSION"}const Ka="@firebase/app",Sc="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt=new Eo("@firebase/app"),tx="@firebase/app-compat",sx="@firebase/analytics-compat",nx="@firebase/analytics",rx="@firebase/app-check-compat",ix="@firebase/app-check",ax="@firebase/auth",ox="@firebase/auth-compat",lx="@firebase/database",cx="@firebase/data-connect",ux="@firebase/database-compat",dx="@firebase/functions",hx="@firebase/functions-compat",mx="@firebase/installations",fx="@firebase/installations-compat",px="@firebase/messaging",gx="@firebase/messaging-compat",xx="@firebase/performance",yx="@firebase/performance-compat",bx="@firebase/remote-config",vx="@firebase/remote-config-compat",_x="@firebase/storage",wx="@firebase/storage-compat",Nx="@firebase/firestore",Ex="@firebase/ai",Tx="@firebase/firestore-compat",jx="firebase",Ix="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa="[DEFAULT]",Ax={[Ka]:"fire-core",[tx]:"fire-core-compat",[nx]:"fire-analytics",[sx]:"fire-analytics-compat",[ix]:"fire-app-check",[rx]:"fire-app-check-compat",[ax]:"fire-auth",[ox]:"fire-auth-compat",[lx]:"fire-rtdb",[cx]:"fire-data-connect",[ux]:"fire-rtdb-compat",[dx]:"fire-fn",[hx]:"fire-fn-compat",[mx]:"fire-iid",[fx]:"fire-iid-compat",[px]:"fire-fcm",[gx]:"fire-fcm-compat",[xx]:"fire-perf",[yx]:"fire-perf-compat",[bx]:"fire-rc",[vx]:"fire-rc-compat",[_x]:"fire-gcs",[wx]:"fire-gcs-compat",[Nx]:"fire-fst",[Tx]:"fire-fst-compat",[Ex]:"fire-vertex","fire-js":"fire-js",[jx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn=new Map,Sx=new Map,Xa=new Map;function Rc(s,e){try{s.container.addComponent(e)}catch(t){Rt.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function bs(s){const e=s.name;if(Xa.has(e))return Rt.debug(`There were multiple attempts to register component ${e}.`),!1;Xa.set(e,s);for(const t of Fn.values())Rc(t,s);for(const t of Sx.values())Rc(t,s);return!0}function ji(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function Ye(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gt=new er("app","Firebase",Rx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Jt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gt.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=Ix;function Ad(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const n={name:Qa,automaticDataCollectionEnabled:!0,...e},i=n.name;if(typeof i!="string"||!i)throw Gt.create("bad-app-name",{appName:String(i)});if(t||(t=Nd()),!t)throw Gt.create("no-options");const a=Fn.get(i);if(a){if(ys(t,a.options)&&ys(n,a.config))return a;throw Gt.create("duplicate-app",{appName:i})}const l=new Lg(i);for(const d of Xa.values())l.addComponent(d);const c=new Cx(t,n,l);return Fn.set(i,c),c}function jo(s=Qa){const e=Fn.get(s);if(!e&&s===Qa&&Nd())return Ad();if(!e)throw Gt.create("no-app",{appName:s});return e}function Cc(){return Array.from(Fn.values())}function dt(s,e,t){let n=Ax[s]??s;t&&(n+=`-${t}`);const i=n.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${n}" with version "${e}":`];i&&l.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rt.warn(l.join(" "));return}bs(new Jt(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx="firebase-heartbeat-database",Px=1,Bn="firebase-heartbeat-store";let Na=null;function Sd(){return Na||(Na=Xg(kx,Px,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Bn)}catch(t){console.warn(t)}}}}).catch(s=>{throw Gt.create("idb-open",{originalErrorMessage:s.message})})),Na}async function Dx(s){try{const t=(await Sd()).transaction(Bn),n=await t.objectStore(Bn).get(Rd(s));return await t.done,n}catch(e){if(e instanceof _t)Rt.warn(e.message);else{const t=Gt.create("idb-get",{originalErrorMessage:e?.message});Rt.warn(t.message)}}}async function kc(s,e){try{const n=(await Sd()).transaction(Bn,"readwrite");await n.objectStore(Bn).put(e,Rd(s)),await n.done}catch(t){if(t instanceof _t)Rt.warn(t.message);else{const n=Gt.create("idb-set",{originalErrorMessage:t?.message});Rt.warn(n.message)}}}function Rd(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox=1024,Vx=30;class Lx{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ux(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=Pc();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(i=>i.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats.length>Vx){const i=Fx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Rt.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Pc(),{heartbeatsToSend:t,unsentEntries:n}=Mx(this._heartbeatsCache.heartbeats),i=Zr(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Rt.warn(e),""}}}function Pc(){return new Date().toISOString().substring(0,10)}function Mx(s,e=Ox){const t=[];let n=s.slice();for(const i of s){const a=t.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),Dc(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Dc(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class Ux{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Tg()?jg().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Dx(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return kc(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return kc(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function Dc(s){return Zr(JSON.stringify({version:2,heartbeats:s})).length}function Fx(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let n=1;n<s.length;n++)s[n].date<t&&(t=s[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(s){bs(new Jt("platform-logger",e=>new Zg(e),"PRIVATE")),bs(new Jt("heartbeat",e=>new Lx(e),"PRIVATE")),dt(Ka,Sc,s),dt(Ka,Sc,"esm2020"),dt("fire-js","")}Bx("");var qx="firebase",zx="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dt(qx,zx,"app");function Cd(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $x=Cd,kd=new er("auth","Firebase",Cd());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei=new Eo("@firebase/auth");function Hx(s,...e){ei.logLevel<=Y.WARN&&ei.warn(`Auth (${Ts}): ${s}`,...e)}function Fr(s,...e){ei.logLevel<=Y.ERROR&&ei.error(`Auth (${Ts}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(s,...e){throw Io(s,...e)}function ht(s,...e){return Io(s,...e)}function Pd(s,e,t){const n={...$x(),[e]:t};return new er("auth","Firebase",n).create(e,{appName:s.name})}function At(s){return Pd(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Io(s,...e){if(typeof s!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=s.name),s._errorFactory.create(t,...n)}return kd.create(s,...e)}function W(s,e,...t){if(!s)throw Io(e,...t)}function Tt(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Fr(e),new Error(e)}function Ct(s,e){s||Tt(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ja(){return typeof self<"u"&&self.location?.href||""}function Gx(){return Oc()==="http:"||Oc()==="https:"}function Oc(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Gx()||_g()||"connection"in navigator)?navigator.onLine:!0}function Kx(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ct(t>e,"Short delay should be less than long delay!"),this.isMobile=yg()||wg()}get(){return Wx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ao(s,e){Ct(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Tt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Tt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Tt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Jx=new sr(3e4,6e4);function is(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function as(s,e,t,n,i={}){return Od(s,i,async()=>{let a={},l={};n&&(e==="GET"?l=n:a={body:JSON.stringify(n)});const c=tr({key:s.config.apiKey,...l}).slice(1),d=await s._getAdditionalHeaders();d["Content-Type"]="application/json",s.languageCode&&(d["X-Firebase-Locale"]=s.languageCode);const m={method:e,headers:d,...a};return vg()||(m.referrerPolicy="no-referrer"),s.emulatorConfig&&rs(s.emulatorConfig.host)&&(m.credentials="include"),Dd.fetch()(await Vd(s,s.config.apiHost,t,c),m)})}async function Od(s,e,t){s._canInitEmulator=!1;const n={...Qx,...e};try{const i=new Zx(s),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw Rr(s,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const c=a.ok?l.errorMessage:l.error.message,[d,m]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rr(s,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Rr(s,"email-already-in-use",l);if(d==="USER_DISABLED")throw Rr(s,"user-disabled",l);const f=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Pd(s,f,m);ot(s,f)}}catch(i){if(i instanceof _t)throw i;ot(s,"network-request-failed",{message:String(i)})}}async function nr(s,e,t,n,i={}){const a=await as(s,e,t,n,i);return"mfaPendingCredential"in a&&ot(s,"multi-factor-auth-required",{_serverResponse:a}),a}async function Vd(s,e,t,n){const i=`${e}${t}?${n}`,a=s,l=a.config.emulator?Ao(s.config,i):`${s.config.apiScheme}://${i}`;return Xx.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function Yx(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Zx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(ht(this.auth,"network-request-failed")),Jx.get())})}}function Rr(s,e,t){const n={appName:s.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const i=ht(s,e,n);return i.customData._tokenResponse=t,i}function Vc(s){return s!==void 0&&s.enterprise!==void 0}class e0{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Yx(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function t0(s,e){return as(s,"GET","/v2/recaptchaConfig",is(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s0(s,e){return as(s,"POST","/v1/accounts:delete",e)}async function ti(s,e){return as(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function n0(s,e=!1){const t=Pe(s),n=await t.getIdToken(e),i=So(n);W(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,l=a?.sign_in_provider;return{claims:i,token:n,authTime:Rn(Ea(i.auth_time)),issuedAtTime:Rn(Ea(i.iat)),expirationTime:Rn(Ea(i.exp)),signInProvider:l||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Ea(s){return Number(s)*1e3}function So(s){const[e,t,n]=s.split(".");if(e===void 0||t===void 0||n===void 0)return Fr("JWT malformed, contained fewer than 3 sections"),null;try{const i=vd(t);return i?JSON.parse(i):(Fr("Failed to decode base64 JWT payload"),null)}catch(i){return Fr("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Lc(s){const e=So(s);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qn(s,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof _t&&r0(n)&&s.auth.currentUser===s&&await s.auth.signOut(),n}}function r0({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rn(this.lastLoginAt),this.creationTime=Rn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function si(s){const e=s.auth,t=await s.getIdToken(),n=await qn(s,ti(e,{idToken:t}));W(n?.users.length,e,"internal-error");const i=n.users[0];s._notifyReloadListener(i);const a=i.providerUserInfo?.length?Ld(i.providerUserInfo):[],l=o0(s.providerData,a),c=s.isAnonymous,d=!(s.email&&i.passwordHash)&&!l?.length,m=c?d:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Ya(i.createdAt,i.lastLoginAt),isAnonymous:m};Object.assign(s,f)}async function a0(s){const e=Pe(s);await si(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function o0(s,e){return[...s.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function Ld(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l0(s,e){const t=await Od(s,{},async()=>{const n=tr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=s.config,l=await Vd(s,i,"/v1/token",`key=${a}`),c=await s._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:c,body:n};return s.emulatorConfig&&rs(s.emulatorConfig.host)&&(d.credentials="include"),Dd.fetch()(l,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function c0(s,e){return as(s,"POST","/v2/accounts:revokeToken",is(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Lc(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){W(e.length!==0,"internal-error");const t=Lc(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:a}=await l0(e,t);this.updateTokensAndExpiration(n,i,Number(a))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:a}=t,l=new qs;return n&&(W(typeof n=="string","internal-error",{appName:e}),l.refreshToken=n),i&&(W(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),a&&(W(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qs,this.toJSON())}_performRefresh(){return Tt("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(s,e){W(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class it{constructor({uid:e,auth:t,stsTokenManager:n,...i}){this.providerId="firebase",this.proactiveRefresh=new i0(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ya(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await qn(this,this.stsTokenManager.getToken(this.auth,e));return W(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return n0(this,e)}reload(){return a0(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new it({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await si(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ye(this.auth.app))return Promise.reject(At(this.auth));const e=await this.getIdToken();return await qn(this,s0(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,i=t.email??void 0,a=t.phoneNumber??void 0,l=t.photoURL??void 0,c=t.tenantId??void 0,d=t._redirectEventId??void 0,m=t.createdAt??void 0,f=t.lastLoginAt??void 0,{uid:p,emailVerified:x,isAnonymous:j,providerData:k,stsTokenManager:R}=t;W(p&&R,e,"internal-error");const w=qs.fromJSON(this.name,R);W(typeof p=="string",e,"internal-error"),Mt(n,e.name),Mt(i,e.name),W(typeof x=="boolean",e,"internal-error"),W(typeof j=="boolean",e,"internal-error"),Mt(a,e.name),Mt(l,e.name),Mt(c,e.name),Mt(d,e.name),Mt(m,e.name),Mt(f,e.name);const A=new it({uid:p,auth:e,email:i,emailVerified:x,displayName:n,isAnonymous:j,photoURL:l,phoneNumber:a,tenantId:c,stsTokenManager:w,createdAt:m,lastLoginAt:f});return k&&Array.isArray(k)&&(A.providerData=k.map(S=>({...S}))),d&&(A._redirectEventId=d),A}static async _fromIdTokenResponse(e,t,n=!1){const i=new qs;i.updateFromServerResponse(t);const a=new it({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await si(a),a}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];W(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?Ld(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!a?.length,c=new qs;c.updateFromIdToken(n);const d=new it({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:l}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Ya(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc=new Map;function jt(s){Ct(s instanceof Function,"Expected a class definition");let e=Mc.get(s);return e?(Ct(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,Mc.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Md.type="NONE";const Uc=Md;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(s,e,t){return`firebase:${s}:${e}:${t}`}class zs{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:a}=this.auth;this.fullUserKey=Br(this.userKey,i.apiKey,a),this.fullPersistenceKey=Br("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ti(this.auth,{idToken:e}).catch(()=>{});return t?it._fromGetAccountInfoResponse(this.auth,t,e):null}return it._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new zs(jt(Uc),e,n);const i=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=i[0]||jt(Uc);const l=Br(n,e.config.apiKey,e.name);let c=null;for(const m of t)try{const f=await m._get(l);if(f){let p;if(typeof f=="string"){const x=await ti(e,{idToken:f}).catch(()=>{});if(!x)break;p=await it._fromGetAccountInfoResponse(e,x,f)}else p=it._fromJSON(e,f);m!==a&&(c=p),a=m;break}}catch{}const d=i.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new zs(a,e,n):(a=d[0],c&&await a._set(l,c.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(l)}catch{}})),new zs(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qd(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ud(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($d(e))return"Blackberry";if(Hd(e))return"Webos";if(Fd(e))return"Safari";if((e.includes("chrome/")||Bd(e))&&!e.includes("edge/"))return"Chrome";if(zd(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=s.match(t);if(n?.length===2)return n[1]}return"Other"}function Ud(s=qe()){return/firefox\//i.test(s)}function Fd(s=qe()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Bd(s=qe()){return/crios\//i.test(s)}function qd(s=qe()){return/iemobile/i.test(s)}function zd(s=qe()){return/android/i.test(s)}function $d(s=qe()){return/blackberry/i.test(s)}function Hd(s=qe()){return/webos/i.test(s)}function Ro(s=qe()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function u0(s=qe()){return Ro(s)&&!!window.navigator?.standalone}function d0(){return Ng()&&document.documentMode===10}function Gd(s=qe()){return Ro(s)||zd(s)||Hd(s)||$d(s)||/windows phone/i.test(s)||qd(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(s,e=[]){let t;switch(s){case"Browser":t=Fc(qe());break;case"Worker":t=`${Fc(qe())}-${s}`;break;default:t=s}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ts}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=a=>new Promise((l,c)=>{try{const d=e(a);l(d)}catch(d){c(d)}});n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m0(s,e={}){return as(s,"GET","/v2/passwordPolicy",is(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=6;class p0{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??f0,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bc(this),this.idTokenSubscription=new Bc(this),this.beforeStateQueue=new h0(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kd,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=jt(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await zs.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ti(this,{idToken:e}),n=await it._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ye(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,l=n?._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&c?.user&&(n=c.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await si(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Kx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ye(this.app))return Promise.reject(At(this));const t=e?Pe(e):null;return t&&W(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ye(this.app)?Promise.reject(At(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ye(this.app)?Promise.reject(At(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(jt(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await m0(this),t=new p0(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new er("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await c0(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&jt(e)||this._popupRedirectResolver;W(t,this,"argument-error"),this.redirectPersistenceManager=await zs.create(this,[jt(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(c,this,"internal-error"),c.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,n,i);return()=>{l=!0,d()}}else{const d=e.addObserver(t);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Wd(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(Ye(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Hx(`Error while retrieving App Check token: ${e.error}`),e?.token}}function js(s){return Pe(s)}class Bc{constructor(e){this.auth=e,this.observer=null,this.addObserver=Cg(t=>this.observer=t)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ii={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function x0(s){Ii=s}function Kd(s){return Ii.loadJS(s)}function y0(){return Ii.recaptchaEnterpriseScript}function b0(){return Ii.gapiScript}function v0(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class _0{constructor(){this.enterprise=new w0}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class w0{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const N0="recaptcha-enterprise",Qd="NO_RECAPTCHA";class E0{constructor(e){this.type=N0,this.auth=js(e)}async verify(e="verify",t=!1){async function n(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,c)=>{t0(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const m=new e0(d);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,l(m.siteKey)}}).catch(d=>{c(d)})})}function i(a,l,c){const d=window.grecaptcha;Vc(d)?d.enterprise.ready(()=>{d.enterprise.execute(a,{action:e}).then(m=>{l(m)}).catch(()=>{l(Qd)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new _0().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{n(this.auth).then(c=>{if(!t&&Vc(window.grecaptcha))i(c,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=y0();d.length!==0&&(d+=c),Kd(d).then(()=>{i(c,a,l)}).catch(m=>{l(m)})}}).catch(c=>{l(c)})})}}async function qc(s,e,t,n=!1,i=!1){const a=new E0(s);let l;if(i)l=Qd;else try{l=await a.verify(t)}catch{l=await a.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,m=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:m,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return n?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Za(s,e,t,n,i){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await qc(s,e,t,t==="getOobCode");return n(s,a)}else return n(s,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await qc(s,e,t,t==="getOobCode");return n(s,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(s,e){const t=ji(s,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(ys(a,e??{}))return i;ot(i,"already-initialized")}return t.initialize({options:e})}function j0(s,e){const t=e?.persistence||[],n=(Array.isArray(t)?t:[t]).map(jt);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(n,e?.popupRedirectResolver)}function I0(s,e,t){const n=js(s);W(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,a=Xd(e),{host:l,port:c}=A0(e),d=c===null?"":`:${c}`,m={url:`${a}//${l}${d}/`},f=Object.freeze({host:l,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){W(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),W(ys(m,n.config.emulator)&&ys(f,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=m,n.emulatorConfig=f,n.settings.appVerificationDisabledForTesting=!0,rs(l)?(wo(`${a}//${l}${d}`),No("Auth",!0)):S0()}function Xd(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function A0(s){const e=Xd(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const a=i[1];return{host:a,port:zc(n.substr(a.length+1))}}else{const[a,l]=n.split(":");return{host:a,port:zc(l)}}}function zc(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function S0(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Tt("not implemented")}_getIdTokenResponse(e){return Tt("not implemented")}_linkToIdToken(e,t){return Tt("not implemented")}_getReauthenticationResolver(e){return Tt("not implemented")}}async function R0(s,e){return as(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C0(s,e){return nr(s,"POST","/v1/accounts:signInWithPassword",is(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k0(s,e){return nr(s,"POST","/v1/accounts:signInWithEmailLink",is(s,e))}async function P0(s,e){return nr(s,"POST","/v1/accounts:signInWithEmailLink",is(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn extends Co{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new zn(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new zn(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Za(e,t,"signInWithPassword",C0);case"emailLink":return k0(e,{email:this._email,oobCode:this._password});default:ot(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Za(e,n,"signUpPassword",R0);case"emailLink":return P0(e,{idToken:t,email:this._email,oobCode:this._password});default:ot(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $s(s,e){return nr(s,"POST","/v1/accounts:signInWithIdp",is(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0="http://localhost";class vs extends Co{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new vs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ot("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i,...a}=t;if(!n||!i)return null;const l=new vs(n,i);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return $s(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,$s(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,$s(e,t)}buildRequest(){const e={requestUri:D0,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=tr(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function V0(s){const e=Nn(En(s)).link,t=e?Nn(En(e)).deep_link_id:null,n=Nn(En(s)).deep_link_id;return(n?Nn(En(n)).link:null)||n||t||e||s}class ko{constructor(e){const t=Nn(En(e)),n=t.apiKey??null,i=t.oobCode??null,a=O0(t.mode??null);W(n&&i&&a,"argument-error"),this.apiKey=n,this.operation=a,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=V0(e);try{return new ko(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(){this.providerId=sn.PROVIDER_ID}static credential(e,t){return zn._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ko.parseLink(t);return W(n,"argument-error"),zn._fromEmailAndCode(e,n.code,n.tenantId)}}sn.PROVIDER_ID="password";sn.EMAIL_PASSWORD_SIGN_IN_METHOD="password";sn.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends Jd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut extends rr{constructor(){super("facebook.com")}static credential(e){return vs._fromParams({providerId:Ut.PROVIDER_ID,signInMethod:Ut.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ut.credentialFromTaggedObject(e)}static credentialFromError(e){return Ut.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ut.credential(e.oauthAccessToken)}catch{return null}}}Ut.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ut.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft extends rr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return vs._fromParams({providerId:Ft.PROVIDER_ID,signInMethod:Ft.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ft.credentialFromTaggedObject(e)}static credentialFromError(e){return Ft.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Ft.credential(t,n)}catch{return null}}}Ft.GOOGLE_SIGN_IN_METHOD="google.com";Ft.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt extends rr{constructor(){super("github.com")}static credential(e){return vs._fromParams({providerId:Bt.PROVIDER_ID,signInMethod:Bt.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bt.credentialFromTaggedObject(e)}static credentialFromError(e){return Bt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bt.credential(e.oauthAccessToken)}catch{return null}}}Bt.GITHUB_SIGN_IN_METHOD="github.com";Bt.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt extends rr{constructor(){super("twitter.com")}static credential(e,t){return vs._fromParams({providerId:qt.PROVIDER_ID,signInMethod:qt.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return qt.credentialFromTaggedObject(e)}static credentialFromError(e){return qt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return qt.credential(t,n)}catch{return null}}}qt.TWITTER_SIGN_IN_METHOD="twitter.com";qt.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L0(s,e){return nr(s,"POST","/v1/accounts:signUp",is(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const a=await it._fromIdTokenResponse(e,n,i),l=$c(n);return new _s({user:a,providerId:l,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=$c(n);return new _s({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function $c(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni extends _t{constructor(e,t,n,i){super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,ni.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new ni(e,t,n,i)}}function Yd(s,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?ni._fromErrorAndOperation(s,a,e,n):a})}async function M0(s,e,t=!1){const n=await qn(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return _s._forOperation(s,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U0(s,e,t=!1){const{auth:n}=s;if(Ye(n.app))return Promise.reject(At(n));const i="reauthenticate";try{const a=await qn(s,Yd(n,i,e,s),t);W(a.idToken,n,"internal-error");const l=So(a.idToken);W(l,n,"internal-error");const{sub:c}=l;return W(s.uid===c,n,"user-mismatch"),_s._forOperation(s,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&ot(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zd(s,e,t=!1){if(Ye(s.app))return Promise.reject(At(s));const n="signIn",i=await Yd(s,n,e),a=await _s._fromIdTokenResponse(s,n,i);return t||await s._updateCurrentUser(a.user),a}async function F0(s,e){return Zd(js(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eh(s){const e=js(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function B0(s,e,t){if(Ye(s.app))return Promise.reject(At(s));const n=js(s),l=await Za(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",L0).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&eh(s),d}),c=await _s._fromIdTokenResponse(n,"signIn",l);return await n._updateCurrentUser(c.user),c}function q0(s,e,t){return Ye(s.app)?Promise.reject(At(s)):F0(Pe(s),sn.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&eh(s),n})}function z0(s,e,t,n){return Pe(s).onIdTokenChanged(e,t,n)}function $0(s,e,t){return Pe(s).beforeAuthStateChanged(e,t)}function H0(s){return Pe(s).signOut()}const ri="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ri,"1"),this.storage.removeItem(ri),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0=1e3,W0=10;class sh extends th{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Gd(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,d)=>{this.notifyListeners(l,d)});return}const n=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(n);!t&&this.localCache[n]===l||this.notifyListeners(n,l)},a=this.storage.getItem(n);d0()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,W0):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},G0)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}sh.type="LOCAL";const K0=sh;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh extends th{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}nh.type="SESSION";const rh=nh;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const n=new Ai(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:a}=t.data,l=this.handlersMap[i];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const c=Array.from(l).map(async m=>m(t.origin,a)),d=await Q0(c);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ai.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(s="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,l;return new Promise((c,d)=>{const m=Po("",20);i.port1.start();const f=setTimeout(()=>{d(new Error("unsupported_event"))},n);l={messageChannel:i,onMessage(p){const x=p;if(x.data.eventId===m)switch(x.data.status){case"ack":clearTimeout(f),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(x.data.response);break;default:clearTimeout(f),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(){return window}function J0(s){mt().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ih(){return typeof mt().WorkerGlobalScope<"u"&&typeof mt().importScripts=="function"}async function Y0(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Z0(){return navigator?.serviceWorker?.controller||null}function ey(){return ih()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah="firebaseLocalStorageDb",ty=1,ii="firebaseLocalStorage",oh="fbase_key";class ir{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Si(s,e){return s.transaction([ii],e?"readwrite":"readonly").objectStore(ii)}function sy(){const s=indexedDB.deleteDatabase(ah);return new ir(s).toPromise()}function eo(){const s=indexedDB.open(ah,ty);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const n=s.result;try{n.createObjectStore(ii,{keyPath:oh})}catch(i){t(i)}}),s.addEventListener("success",async()=>{const n=s.result;n.objectStoreNames.contains(ii)?e(n):(n.close(),await sy(),e(await eo()))})})}async function Hc(s,e,t){const n=Si(s,!0).put({[oh]:e,value:t});return new ir(n).toPromise()}async function ny(s,e){const t=Si(s,!1).get(e),n=await new ir(t).toPromise();return n===void 0?null:n.value}function Gc(s,e){const t=Si(s,!0).delete(e);return new ir(t).toPromise()}const ry=800,iy=3;class lh{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await eo(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>iy)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ih()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ai._getInstance(ey()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Y0(),!this.activeServiceWorker)return;this.sender=new X0(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Z0()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await eo();return await Hc(e,ri,"1"),await Gc(e,ri),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Hc(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>ny(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Gc(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Si(i,!1).getAll();return new ir(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ry)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lh.type="LOCAL";const ay=lh;new sr(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(s,e){return e?jt(e):(W(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do extends Co{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $s(e,this._buildIdpRequest())}_linkToIdToken(e,t){return $s(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return $s(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ly(s){return Zd(s.auth,new Do(s),s.bypassAuthState)}function cy(s){const{auth:e,user:t}=s;return W(t,e,"internal-error"),U0(t,new Do(s),s.bypassAuthState)}async function uy(s){const{auth:e,user:t}=s;return W(t,e,"internal-error"),M0(t,new Do(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,t,n,i,a=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:a,error:l,type:c}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:t,sessionId:n,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ly;case"linkViaPopup":case"linkViaRedirect":return uy;case"reauthViaPopup":case"reauthViaRedirect":return cy;default:ot(this.auth,"internal-error")}}resolve(e){Ct(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ct(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy=new sr(2e3,1e4);class Fs extends ch{constructor(e,t,n,i,a){super(e,t,i,a),this.provider=n,this.authWindow=null,this.pollId=null,Fs.currentPopupAction&&Fs.currentPopupAction.cancel(),Fs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return W(e,this.auth,"internal-error"),e}async onExecution(){Ct(this.filter.length===1,"Popup operations only handle one event");const e=Po();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ht(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ht(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fs.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ht(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dy.get())};e()}}Fs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy="pendingRedirect",qr=new Map;class my extends ch{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=qr.get(this.auth._key());if(!e){try{const n=await fy(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}qr.set(this.auth._key(),e)}return this.bypassAuthState||qr.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function fy(s,e){const t=xy(e),n=gy(s);if(!await n._isAvailable())return!1;const i=await n._get(t)==="true";return await n._remove(t),i}function py(s,e){qr.set(s._key(),e)}function gy(s){return jt(s._redirectPersistence)}function xy(s){return Br(hy,s.config.apiKey,s.name)}async function yy(s,e,t=!1){if(Ye(s.app))return Promise.reject(At(s));const n=js(s),i=oy(n,e),l=await new my(n,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await n._persistUserIfCurrent(l.user),await n._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by=10*60*1e3;class vy{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_y(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!uh(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";t.onError(ht(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=by&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wc(e))}saveEventToCache(e){this.cachedEventUids.add(Wc(e)),this.lastProcessedEventTime=Date.now()}}function Wc(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function uh({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function _y(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uh(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wy(s,e={}){return as(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ey=/^https?/;async function Ty(s){if(s.config.emulator)return;const{authorizedDomains:e}=await wy(s);for(const t of e)try{if(jy(t))return}catch{}ot(s,"unauthorized-domain")}function jy(s){const e=Ja(),{protocol:t,hostname:n}=new URL(e);if(s.startsWith("chrome-extension://")){const l=new URL(s);return l.hostname===""&&n===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===n}if(!Ey.test(t))return!1;if(Ny.test(s))return n===s;const i=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy=new sr(3e4,6e4);function Kc(){const s=mt().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function Ay(s){return new Promise((e,t)=>{function n(){Kc(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Kc(),t(ht(s,"network-request-failed"))},timeout:Iy.get()})}if(mt().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(mt().gapi?.load)n();else{const i=v0("iframefcb");return mt()[i]=()=>{gapi.load?n():t(ht(s,"network-request-failed"))},Kd(`${b0()}?onload=${i}`).catch(a=>t(a))}}).catch(e=>{throw zr=null,e})}let zr=null;function Sy(s){return zr=zr||Ay(s),zr}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry=new sr(5e3,15e3),Cy="__/auth/iframe",ky="emulator/auth/iframe",Py={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Dy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Oy(s){const e=s.config;W(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?Ao(e,ky):`https://${s.config.authDomain}/${Cy}`,n={apiKey:e.apiKey,appName:s.name,v:Ts},i=Dy.get(s.config.apiHost);i&&(n.eid=i);const a=s._getFrameworks();return a.length&&(n.fw=a.join(",")),`${t}?${tr(n).slice(1)}`}async function Vy(s){const e=await Sy(s),t=mt().gapi;return W(t,s,"internal-error"),e.open({where:document.body,url:Oy(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Py,dontclear:!0},n=>new Promise(async(i,a)=>{await n.restyle({setHideOnLeave:!1});const l=ht(s,"network-request-failed"),c=mt().setTimeout(()=>{a(l)},Ry.get());function d(){mt().clearTimeout(c),i(n)}n.ping(d).then(d,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},My=500,Uy=600,Fy="_blank",By="http://localhost";class Qc{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qy(s,e,t,n=My,i=Uy){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const d={...Ly,width:n.toString(),height:i.toString(),top:a,left:l},m=qe().toLowerCase();t&&(c=Bd(m)?Fy:t),Ud(m)&&(e=e||By,d.scrollbars="yes");const f=Object.entries(d).reduce((x,[j,k])=>`${x}${j}=${k},`,"");if(u0(m)&&c!=="_self")return zy(e||"",c),new Qc(null);const p=window.open(e||"",c,f);W(p,s,"popup-blocked");try{p.focus()}catch{}return new Qc(p)}function zy(s,e){const t=document.createElement("a");t.href=s,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y="__/auth/handler",Hy="emulator/auth/handler",Gy=encodeURIComponent("fac");async function Xc(s,e,t,n,i,a){W(s.config.authDomain,s,"auth-domain-config-required"),W(s.config.apiKey,s,"invalid-api-key");const l={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:n,v:Ts,eventId:i};if(e instanceof Jd){e.setDefaultLanguage(s.languageCode),l.providerId=e.providerId||"",Rg(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))l[f]=p}if(e instanceof rr){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(l.scopes=f.join(","))}s.tenantId&&(l.tid=s.tenantId);const c=l;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const d=await s._getAppCheckToken(),m=d?`#${Gy}=${encodeURIComponent(d)}`:"";return`${Wy(s)}?${tr(c).slice(1)}${m}`}function Wy({config:s}){return s.emulator?Ao(s,Hy):`https://${s.authDomain}/${$y}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta="webStorageSupport";class Ky{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rh,this._completeRedirectFn=yy,this._overrideRedirectResult=py}async _openPopup(e,t,n,i){Ct(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await Xc(e,t,n,Ja(),i);return qy(e,a,Po())}async _openRedirect(e,t,n,i){await this._originValidation(e);const a=await Xc(e,t,n,Ja(),i);return J0(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(Ct(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Vy(e),n=new vy(e);return t.register("authEvent",i=>(W(i?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ta,{type:Ta},i=>{const a=i?.[0]?.[Ta];a!==void 0&&t(!!a),ot(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ty(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Gd()||Fd()||Ro()}}const Qy=Ky;var Jc="@firebase/auth",Yc="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Yy(s){bs(new Jt("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=n.options;W(l&&!l.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:l,authDomain:c,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Wd(s)},m=new g0(n,i,a,d);return j0(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),bs(new Jt("auth-internal",e=>{const t=js(e.getProvider("auth").getImmediate());return(n=>new Xy(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),dt(Jc,Yc,Jy(s)),dt(Jc,Yc,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy=5*60,eb=Ed("authIdTokenMaxAge")||Zy;let Zc=null;const tb=s=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>eb)return;const i=t?.token;Zc!==i&&(Zc=i,await fetch(s,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function sb(s=jo()){const e=ji(s,"auth");if(e.isInitialized())return e.getImmediate();const t=T0(s,{popupRedirectResolver:Qy,persistence:[ay,K0,rh]}),n=Ed("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const l=tb(a.toString());$0(t,l,()=>l(t.currentUser)),z0(t,c=>l(c))}}const i=_d("auth");return i&&I0(t,`http://${i}`),t}function nb(){return document.getElementsByTagName("head")?.[0]??document}x0({loadJS(s){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",s),n.onload=e,n.onerror=i=>{const a=ht("internal-error");a.customData=i,t(a)},n.type="text/javascript",n.charset="UTF-8",nb().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Yy("Browser");var eu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wt,dh;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,b){function _(){}_.prototype=b.prototype,v.D=b.prototype,v.prototype=new _,v.prototype.constructor=v,v.C=function(N,E,T){for(var y=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)y[ue-2]=arguments[ue];return b.prototype[E].apply(N,y)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(v,b,_){_||(_=0);var N=Array(16);if(typeof b=="string")for(var E=0;16>E;++E)N[E]=b.charCodeAt(_++)|b.charCodeAt(_++)<<8|b.charCodeAt(_++)<<16|b.charCodeAt(_++)<<24;else for(E=0;16>E;++E)N[E]=b[_++]|b[_++]<<8|b[_++]<<16|b[_++]<<24;b=v.g[0],_=v.g[1],E=v.g[2];var T=v.g[3],y=b+(T^_&(E^T))+N[0]+3614090360&4294967295;b=_+(y<<7&4294967295|y>>>25),y=T+(E^b&(_^E))+N[1]+3905402710&4294967295,T=b+(y<<12&4294967295|y>>>20),y=E+(_^T&(b^_))+N[2]+606105819&4294967295,E=T+(y<<17&4294967295|y>>>15),y=_+(b^E&(T^b))+N[3]+3250441966&4294967295,_=E+(y<<22&4294967295|y>>>10),y=b+(T^_&(E^T))+N[4]+4118548399&4294967295,b=_+(y<<7&4294967295|y>>>25),y=T+(E^b&(_^E))+N[5]+1200080426&4294967295,T=b+(y<<12&4294967295|y>>>20),y=E+(_^T&(b^_))+N[6]+2821735955&4294967295,E=T+(y<<17&4294967295|y>>>15),y=_+(b^E&(T^b))+N[7]+4249261313&4294967295,_=E+(y<<22&4294967295|y>>>10),y=b+(T^_&(E^T))+N[8]+1770035416&4294967295,b=_+(y<<7&4294967295|y>>>25),y=T+(E^b&(_^E))+N[9]+2336552879&4294967295,T=b+(y<<12&4294967295|y>>>20),y=E+(_^T&(b^_))+N[10]+4294925233&4294967295,E=T+(y<<17&4294967295|y>>>15),y=_+(b^E&(T^b))+N[11]+2304563134&4294967295,_=E+(y<<22&4294967295|y>>>10),y=b+(T^_&(E^T))+N[12]+1804603682&4294967295,b=_+(y<<7&4294967295|y>>>25),y=T+(E^b&(_^E))+N[13]+4254626195&4294967295,T=b+(y<<12&4294967295|y>>>20),y=E+(_^T&(b^_))+N[14]+2792965006&4294967295,E=T+(y<<17&4294967295|y>>>15),y=_+(b^E&(T^b))+N[15]+1236535329&4294967295,_=E+(y<<22&4294967295|y>>>10),y=b+(E^T&(_^E))+N[1]+4129170786&4294967295,b=_+(y<<5&4294967295|y>>>27),y=T+(_^E&(b^_))+N[6]+3225465664&4294967295,T=b+(y<<9&4294967295|y>>>23),y=E+(b^_&(T^b))+N[11]+643717713&4294967295,E=T+(y<<14&4294967295|y>>>18),y=_+(T^b&(E^T))+N[0]+3921069994&4294967295,_=E+(y<<20&4294967295|y>>>12),y=b+(E^T&(_^E))+N[5]+3593408605&4294967295,b=_+(y<<5&4294967295|y>>>27),y=T+(_^E&(b^_))+N[10]+38016083&4294967295,T=b+(y<<9&4294967295|y>>>23),y=E+(b^_&(T^b))+N[15]+3634488961&4294967295,E=T+(y<<14&4294967295|y>>>18),y=_+(T^b&(E^T))+N[4]+3889429448&4294967295,_=E+(y<<20&4294967295|y>>>12),y=b+(E^T&(_^E))+N[9]+568446438&4294967295,b=_+(y<<5&4294967295|y>>>27),y=T+(_^E&(b^_))+N[14]+3275163606&4294967295,T=b+(y<<9&4294967295|y>>>23),y=E+(b^_&(T^b))+N[3]+4107603335&4294967295,E=T+(y<<14&4294967295|y>>>18),y=_+(T^b&(E^T))+N[8]+1163531501&4294967295,_=E+(y<<20&4294967295|y>>>12),y=b+(E^T&(_^E))+N[13]+2850285829&4294967295,b=_+(y<<5&4294967295|y>>>27),y=T+(_^E&(b^_))+N[2]+4243563512&4294967295,T=b+(y<<9&4294967295|y>>>23),y=E+(b^_&(T^b))+N[7]+1735328473&4294967295,E=T+(y<<14&4294967295|y>>>18),y=_+(T^b&(E^T))+N[12]+2368359562&4294967295,_=E+(y<<20&4294967295|y>>>12),y=b+(_^E^T)+N[5]+4294588738&4294967295,b=_+(y<<4&4294967295|y>>>28),y=T+(b^_^E)+N[8]+2272392833&4294967295,T=b+(y<<11&4294967295|y>>>21),y=E+(T^b^_)+N[11]+1839030562&4294967295,E=T+(y<<16&4294967295|y>>>16),y=_+(E^T^b)+N[14]+4259657740&4294967295,_=E+(y<<23&4294967295|y>>>9),y=b+(_^E^T)+N[1]+2763975236&4294967295,b=_+(y<<4&4294967295|y>>>28),y=T+(b^_^E)+N[4]+1272893353&4294967295,T=b+(y<<11&4294967295|y>>>21),y=E+(T^b^_)+N[7]+4139469664&4294967295,E=T+(y<<16&4294967295|y>>>16),y=_+(E^T^b)+N[10]+3200236656&4294967295,_=E+(y<<23&4294967295|y>>>9),y=b+(_^E^T)+N[13]+681279174&4294967295,b=_+(y<<4&4294967295|y>>>28),y=T+(b^_^E)+N[0]+3936430074&4294967295,T=b+(y<<11&4294967295|y>>>21),y=E+(T^b^_)+N[3]+3572445317&4294967295,E=T+(y<<16&4294967295|y>>>16),y=_+(E^T^b)+N[6]+76029189&4294967295,_=E+(y<<23&4294967295|y>>>9),y=b+(_^E^T)+N[9]+3654602809&4294967295,b=_+(y<<4&4294967295|y>>>28),y=T+(b^_^E)+N[12]+3873151461&4294967295,T=b+(y<<11&4294967295|y>>>21),y=E+(T^b^_)+N[15]+530742520&4294967295,E=T+(y<<16&4294967295|y>>>16),y=_+(E^T^b)+N[2]+3299628645&4294967295,_=E+(y<<23&4294967295|y>>>9),y=b+(E^(_|~T))+N[0]+4096336452&4294967295,b=_+(y<<6&4294967295|y>>>26),y=T+(_^(b|~E))+N[7]+1126891415&4294967295,T=b+(y<<10&4294967295|y>>>22),y=E+(b^(T|~_))+N[14]+2878612391&4294967295,E=T+(y<<15&4294967295|y>>>17),y=_+(T^(E|~b))+N[5]+4237533241&4294967295,_=E+(y<<21&4294967295|y>>>11),y=b+(E^(_|~T))+N[12]+1700485571&4294967295,b=_+(y<<6&4294967295|y>>>26),y=T+(_^(b|~E))+N[3]+2399980690&4294967295,T=b+(y<<10&4294967295|y>>>22),y=E+(b^(T|~_))+N[10]+4293915773&4294967295,E=T+(y<<15&4294967295|y>>>17),y=_+(T^(E|~b))+N[1]+2240044497&4294967295,_=E+(y<<21&4294967295|y>>>11),y=b+(E^(_|~T))+N[8]+1873313359&4294967295,b=_+(y<<6&4294967295|y>>>26),y=T+(_^(b|~E))+N[15]+4264355552&4294967295,T=b+(y<<10&4294967295|y>>>22),y=E+(b^(T|~_))+N[6]+2734768916&4294967295,E=T+(y<<15&4294967295|y>>>17),y=_+(T^(E|~b))+N[13]+1309151649&4294967295,_=E+(y<<21&4294967295|y>>>11),y=b+(E^(_|~T))+N[4]+4149444226&4294967295,b=_+(y<<6&4294967295|y>>>26),y=T+(_^(b|~E))+N[11]+3174756917&4294967295,T=b+(y<<10&4294967295|y>>>22),y=E+(b^(T|~_))+N[2]+718787259&4294967295,E=T+(y<<15&4294967295|y>>>17),y=_+(T^(E|~b))+N[9]+3951481745&4294967295,v.g[0]=v.g[0]+b&4294967295,v.g[1]=v.g[1]+(E+(y<<21&4294967295|y>>>11))&4294967295,v.g[2]=v.g[2]+E&4294967295,v.g[3]=v.g[3]+T&4294967295}n.prototype.u=function(v,b){b===void 0&&(b=v.length);for(var _=b-this.blockSize,N=this.B,E=this.h,T=0;T<b;){if(E==0)for(;T<=_;)i(this,v,T),T+=this.blockSize;if(typeof v=="string"){for(;T<b;)if(N[E++]=v.charCodeAt(T++),E==this.blockSize){i(this,N),E=0;break}}else for(;T<b;)if(N[E++]=v[T++],E==this.blockSize){i(this,N),E=0;break}}this.h=E,this.o+=b},n.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var b=1;b<v.length-8;++b)v[b]=0;var _=8*this.o;for(b=v.length-8;b<v.length;++b)v[b]=_&255,_/=256;for(this.u(v),v=Array(16),b=_=0;4>b;++b)for(var N=0;32>N;N+=8)v[_++]=this.g[b]>>>N&255;return v};function a(v,b){var _=c;return Object.prototype.hasOwnProperty.call(_,v)?_[v]:_[v]=b(v)}function l(v,b){this.h=b;for(var _=[],N=!0,E=v.length-1;0<=E;E--){var T=v[E]|0;N&&T==b||(_[E]=T,N=!1)}this.g=_}var c={};function d(v){return-128<=v&&128>v?a(v,function(b){return new l([b|0],0>b?-1:0)}):new l([v|0],0>v?-1:0)}function m(v){if(isNaN(v)||!isFinite(v))return p;if(0>v)return w(m(-v));for(var b=[],_=1,N=0;v>=_;N++)b[N]=v/_|0,_*=4294967296;return new l(b,0)}function f(v,b){if(v.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(v.charAt(0)=="-")return w(f(v.substring(1),b));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=m(Math.pow(b,8)),N=p,E=0;E<v.length;E+=8){var T=Math.min(8,v.length-E),y=parseInt(v.substring(E,E+T),b);8>T?(T=m(Math.pow(b,T)),N=N.j(T).add(m(y))):(N=N.j(_),N=N.add(m(y)))}return N}var p=d(0),x=d(1),j=d(16777216);s=l.prototype,s.m=function(){if(R(this))return-w(this).m();for(var v=0,b=1,_=0;_<this.g.length;_++){var N=this.i(_);v+=(0<=N?N:4294967296+N)*b,b*=4294967296}return v},s.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(k(this))return"0";if(R(this))return"-"+w(this).toString(v);for(var b=m(Math.pow(v,6)),_=this,N="";;){var E=O(_,b).g;_=A(_,E.j(b));var T=((0<_.g.length?_.g[0]:_.h)>>>0).toString(v);if(_=E,k(_))return T+N;for(;6>T.length;)T="0"+T;N=T+N}},s.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function k(v){if(v.h!=0)return!1;for(var b=0;b<v.g.length;b++)if(v.g[b]!=0)return!1;return!0}function R(v){return v.h==-1}s.l=function(v){return v=A(this,v),R(v)?-1:k(v)?0:1};function w(v){for(var b=v.g.length,_=[],N=0;N<b;N++)_[N]=~v.g[N];return new l(_,~v.h).add(x)}s.abs=function(){return R(this)?w(this):this},s.add=function(v){for(var b=Math.max(this.g.length,v.g.length),_=[],N=0,E=0;E<=b;E++){var T=N+(this.i(E)&65535)+(v.i(E)&65535),y=(T>>>16)+(this.i(E)>>>16)+(v.i(E)>>>16);N=y>>>16,T&=65535,y&=65535,_[E]=y<<16|T}return new l(_,_[_.length-1]&-2147483648?-1:0)};function A(v,b){return v.add(w(b))}s.j=function(v){if(k(this)||k(v))return p;if(R(this))return R(v)?w(this).j(w(v)):w(w(this).j(v));if(R(v))return w(this.j(w(v)));if(0>this.l(j)&&0>v.l(j))return m(this.m()*v.m());for(var b=this.g.length+v.g.length,_=[],N=0;N<2*b;N++)_[N]=0;for(N=0;N<this.g.length;N++)for(var E=0;E<v.g.length;E++){var T=this.i(N)>>>16,y=this.i(N)&65535,ue=v.i(E)>>>16,Ne=v.i(E)&65535;_[2*N+2*E]+=y*Ne,S(_,2*N+2*E),_[2*N+2*E+1]+=T*Ne,S(_,2*N+2*E+1),_[2*N+2*E+1]+=y*ue,S(_,2*N+2*E+1),_[2*N+2*E+2]+=T*ue,S(_,2*N+2*E+2)}for(N=0;N<b;N++)_[N]=_[2*N+1]<<16|_[2*N];for(N=b;N<2*b;N++)_[N]=0;return new l(_,0)};function S(v,b){for(;(v[b]&65535)!=v[b];)v[b+1]+=v[b]>>>16,v[b]&=65535,b++}function I(v,b){this.g=v,this.h=b}function O(v,b){if(k(b))throw Error("division by zero");if(k(v))return new I(p,p);if(R(v))return b=O(w(v),b),new I(w(b.g),w(b.h));if(R(b))return b=O(v,w(b)),new I(w(b.g),b.h);if(30<v.g.length){if(R(v)||R(b))throw Error("slowDivide_ only works with positive integers.");for(var _=x,N=b;0>=N.l(v);)_=P(_),N=P(N);var E=V(_,1),T=V(N,1);for(N=V(N,2),_=V(_,2);!k(N);){var y=T.add(N);0>=y.l(v)&&(E=E.add(_),T=y),N=V(N,1),_=V(_,1)}return b=A(v,E.j(b)),new I(E,b)}for(E=p;0<=v.l(b);){for(_=Math.max(1,Math.floor(v.m()/b.m())),N=Math.ceil(Math.log(_)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),T=m(_),y=T.j(b);R(y)||0<y.l(v);)_-=N,T=m(_),y=T.j(b);k(T)&&(T=x),E=E.add(T),v=A(v,y)}return new I(E,v)}s.A=function(v){return O(this,v).h},s.and=function(v){for(var b=Math.max(this.g.length,v.g.length),_=[],N=0;N<b;N++)_[N]=this.i(N)&v.i(N);return new l(_,this.h&v.h)},s.or=function(v){for(var b=Math.max(this.g.length,v.g.length),_=[],N=0;N<b;N++)_[N]=this.i(N)|v.i(N);return new l(_,this.h|v.h)},s.xor=function(v){for(var b=Math.max(this.g.length,v.g.length),_=[],N=0;N<b;N++)_[N]=this.i(N)^v.i(N);return new l(_,this.h^v.h)};function P(v){for(var b=v.g.length+1,_=[],N=0;N<b;N++)_[N]=v.i(N)<<1|v.i(N-1)>>>31;return new l(_,v.h)}function V(v,b){var _=b>>5;b%=32;for(var N=v.g.length-_,E=[],T=0;T<N;T++)E[T]=0<b?v.i(T+_)>>>b|v.i(T+_+1)<<32-b:v.i(T+_);return new l(E,v.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,dh=n,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=m,l.fromString=f,Wt=l}).apply(typeof eu<"u"?eu:typeof self<"u"?self:typeof window<"u"?window:{});var Cr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hh,Tn,mh,$r,to,fh,ph,gh;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,h){return o==Array.prototype||o==Object.prototype||(o[u]=h.value),o};function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Cr=="object"&&Cr];for(var u=0;u<o.length;++u){var h=o[u];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var n=t(this);function i(o,u){if(u)e:{var h=n;o=o.split(".");for(var g=0;g<o.length-1;g++){var C=o[g];if(!(C in h))break e;h=h[C]}o=o[o.length-1],g=h[o],u=u(g),u!=g&&u!=null&&e(h,o,{configurable:!0,writable:!0,value:u})}}function a(o,u){o instanceof String&&(o+="");var h=0,g=!1,C={next:function(){if(!g&&h<o.length){var L=h++;return{value:u(L,o[L]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(o){return o||function(){return a(this,function(u,h){return h})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function m(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function f(o,u,h){return o.call.apply(o.bind,arguments)}function p(o,u,h){if(!o)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),o.apply(u,C)}}return function(){return o.apply(u,arguments)}}function x(o,u,h){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,x.apply(null,arguments)}function j(o,u){var h=Array.prototype.slice.call(arguments,1);return function(){var g=h.slice();return g.push.apply(g,arguments),o.apply(this,g)}}function k(o,u){function h(){}h.prototype=u.prototype,o.aa=u.prototype,o.prototype=new h,o.prototype.constructor=o,o.Qb=function(g,C,L){for(var B=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)B[ce-2]=arguments[ce];return u.prototype[C].apply(g,B)}}function R(o){const u=o.length;if(0<u){const h=Array(u);for(let g=0;g<u;g++)h[g]=o[g];return h}return[]}function w(o,u){for(let h=1;h<arguments.length;h++){const g=arguments[h];if(d(g)){const C=o.length||0,L=g.length||0;o.length=C+L;for(let B=0;B<L;B++)o[C+B]=g[B]}else o.push(g)}}class A{constructor(u,h){this.i=u,this.j=h,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function S(o){return/^[\s\xa0]*$/.test(o)}function I(){var o=c.navigator;return o&&(o=o.userAgent)?o:""}function O(o){return O[" "](o),o}O[" "]=function(){};var P=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function V(o,u,h){for(const g in o)u.call(h,o[g],g,o)}function v(o,u){for(const h in o)u.call(void 0,o[h],h,o)}function b(o){const u={};for(const h in o)u[h]=o[h];return u}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(o,u){let h,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(h in g)o[h]=g[h];for(let L=0;L<_.length;L++)h=_[L],Object.prototype.hasOwnProperty.call(g,h)&&(o[h]=g[h])}}function E(o){var u=1;o=o.split(":");const h=[];for(;0<u&&o.length;)h.push(o.shift()),u--;return o.length&&h.push(o.join(":")),h}function T(o){c.setTimeout(()=>{throw o},0)}function y(){var o=ye;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class ue{constructor(){this.h=this.g=null}add(u,h){const g=Ne.get();g.set(u,h),this.h?this.h.next=g:this.g=g,this.h=g}}var Ne=new A(()=>new Dt,o=>o.reset());class Dt{constructor(){this.next=this.g=this.h=null}set(u,h){this.h=u,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let F,ne=!1,ye=new ue,be=()=>{const o=c.Promise.resolve(void 0);F=()=>{o.then(nt)}};var nt=()=>{for(var o;o=y();){try{o.h.call(o.g)}catch(h){T(h)}var u=Ne;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}ne=!1};function et(){this.s=this.s,this.C=this.C}et.prototype.s=!1,et.prototype.ma=function(){this.s||(this.s=!0,this.N())},et.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function je(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}je.prototype.h=function(){this.defaultPrevented=!0};var te=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const h=()=>{};c.addEventListener("test",h,u),c.removeEventListener("test",h,u)}catch{}return o}();function Ke(o,u){if(je.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var h=this.type=o.type,g=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if(P){e:{try{O(u.nodeName);var C=!0;break e}catch{}C=!1}C||(u=null)}}else h=="mouseover"?u=o.fromElement:h=="mouseout"&&(u=o.toElement);this.relatedTarget=u,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Hi[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Ke.aa.h.call(this)}}k(Ke,je);var Hi={2:"touch",3:"pen",4:"mouse"};Ke.prototype.h=function(){Ke.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Cs="closure_listenable_"+(1e6*Math.random()|0),Gi=0;function hf(o,u,h,g,C){this.listener=o,this.proxy=null,this.src=u,this.type=h,this.capture=!!g,this.ha=C,this.key=++Gi,this.da=this.fa=!1}function dr(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function hr(o){this.src=o,this.g={},this.h=0}hr.prototype.add=function(o,u,h,g,C){var L=o.toString();o=this.g[L],o||(o=this.g[L]=[],this.h++);var B=Ki(o,u,g,C);return-1<B?(u=o[B],h||(u.fa=!1)):(u=new hf(u,this.src,L,!!g,C),u.fa=h,o.push(u)),u};function Wi(o,u){var h=u.type;if(h in o.g){var g=o.g[h],C=Array.prototype.indexOf.call(g,u,void 0),L;(L=0<=C)&&Array.prototype.splice.call(g,C,1),L&&(dr(u),o.g[h].length==0&&(delete o.g[h],o.h--))}}function Ki(o,u,h,g){for(var C=0;C<o.length;++C){var L=o[C];if(!L.da&&L.listener==u&&L.capture==!!h&&L.ha==g)return C}return-1}var Qi="closure_lm_"+(1e6*Math.random()|0),Xi={};function gl(o,u,h,g,C){if(Array.isArray(u)){for(var L=0;L<u.length;L++)gl(o,u[L],h,g,C);return null}return h=bl(h),o&&o[Cs]?o.K(u,h,m(g)?!!g.capture:!1,C):mf(o,u,h,!1,g,C)}function mf(o,u,h,g,C,L){if(!u)throw Error("Invalid event type");var B=m(C)?!!C.capture:!!C,ce=Yi(o);if(ce||(o[Qi]=ce=new hr(o)),h=ce.add(u,h,g,B,L),h.proxy)return h;if(g=ff(),h.proxy=g,g.src=o,g.listener=h,o.addEventListener)te||(C=B),C===void 0&&(C=!1),o.addEventListener(u.toString(),g,C);else if(o.attachEvent)o.attachEvent(yl(u.toString()),g);else if(o.addListener&&o.removeListener)o.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return h}function ff(){function o(h){return u.call(o.src,o.listener,h)}const u=pf;return o}function xl(o,u,h,g,C){if(Array.isArray(u))for(var L=0;L<u.length;L++)xl(o,u[L],h,g,C);else g=m(g)?!!g.capture:!!g,h=bl(h),o&&o[Cs]?(o=o.i,u=String(u).toString(),u in o.g&&(L=o.g[u],h=Ki(L,h,g,C),-1<h&&(dr(L[h]),Array.prototype.splice.call(L,h,1),L.length==0&&(delete o.g[u],o.h--)))):o&&(o=Yi(o))&&(u=o.g[u.toString()],o=-1,u&&(o=Ki(u,h,g,C)),(h=-1<o?u[o]:null)&&Ji(h))}function Ji(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[Cs])Wi(u.i,o);else{var h=o.type,g=o.proxy;u.removeEventListener?u.removeEventListener(h,g,o.capture):u.detachEvent?u.detachEvent(yl(h),g):u.addListener&&u.removeListener&&u.removeListener(g),(h=Yi(u))?(Wi(h,o),h.h==0&&(h.src=null,u[Qi]=null)):dr(o)}}}function yl(o){return o in Xi?Xi[o]:Xi[o]="on"+o}function pf(o,u){if(o.da)o=!0;else{u=new Ke(u,this);var h=o.listener,g=o.ha||o.src;o.fa&&Ji(o),o=h.call(g,u)}return o}function Yi(o){return o=o[Qi],o instanceof hr?o:null}var Zi="__closure_events_fn_"+(1e9*Math.random()>>>0);function bl(o){return typeof o=="function"?o:(o[Zi]||(o[Zi]=function(u){return o.handleEvent(u)}),o[Zi])}function Oe(){et.call(this),this.i=new hr(this),this.M=this,this.F=null}k(Oe,et),Oe.prototype[Cs]=!0,Oe.prototype.removeEventListener=function(o,u,h,g){xl(this,o,u,h,g)};function ze(o,u){var h,g=o.F;if(g)for(h=[];g;g=g.F)h.push(g);if(o=o.M,g=u.type||u,typeof u=="string")u=new je(u,o);else if(u instanceof je)u.target=u.target||o;else{var C=u;u=new je(g,o),N(u,C)}if(C=!0,h)for(var L=h.length-1;0<=L;L--){var B=u.g=h[L];C=mr(B,g,!0,u)&&C}if(B=u.g=o,C=mr(B,g,!0,u)&&C,C=mr(B,g,!1,u)&&C,h)for(L=0;L<h.length;L++)B=u.g=h[L],C=mr(B,g,!1,u)&&C}Oe.prototype.N=function(){if(Oe.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var h=o.g[u],g=0;g<h.length;g++)dr(h[g]);delete o.g[u],o.h--}}this.F=null},Oe.prototype.K=function(o,u,h,g){return this.i.add(String(o),u,!1,h,g)},Oe.prototype.L=function(o,u,h,g){return this.i.add(String(o),u,!0,h,g)};function mr(o,u,h,g){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var C=!0,L=0;L<u.length;++L){var B=u[L];if(B&&!B.da&&B.capture==h){var ce=B.listener,Se=B.ha||B.src;B.fa&&Wi(o.i,B),C=ce.call(Se,g)!==!1&&C}}return C&&!g.defaultPrevented}function vl(o,u,h){if(typeof o=="function")h&&(o=x(o,h));else if(o&&typeof o.handleEvent=="function")o=x(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:c.setTimeout(o,u||0)}function _l(o){o.g=vl(()=>{o.g=null,o.i&&(o.i=!1,_l(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class gf extends et{constructor(u,h){super(),this.m=u,this.l=h,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:_l(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ln(o){et.call(this),this.h=o,this.g={}}k(ln,et);var wl=[];function Nl(o){V(o.g,function(u,h){this.g.hasOwnProperty(h)&&Ji(u)},o),o.g={}}ln.prototype.N=function(){ln.aa.N.call(this),Nl(this)},ln.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ea=c.JSON.stringify,xf=c.JSON.parse,yf=class{stringify(o){return c.JSON.stringify(o,void 0)}parse(o){return c.JSON.parse(o,void 0)}};function ta(){}ta.prototype.h=null;function El(o){return o.h||(o.h=o.i())}function Tl(){}var cn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function sa(){je.call(this,"d")}k(sa,je);function na(){je.call(this,"c")}k(na,je);var os={},jl=null;function fr(){return jl=jl||new Oe}os.La="serverreachability";function Il(o){je.call(this,os.La,o)}k(Il,je);function un(o){const u=fr();ze(u,new Il(u))}os.STAT_EVENT="statevent";function Al(o,u){je.call(this,os.STAT_EVENT,o),this.stat=u}k(Al,je);function $e(o){const u=fr();ze(u,new Al(u,o))}os.Ma="timingevent";function Sl(o,u){je.call(this,os.Ma,o),this.size=u}k(Sl,je);function dn(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){o()},u)}function hn(){this.g=!0}hn.prototype.xa=function(){this.g=!1};function bf(o,u,h,g,C,L){o.info(function(){if(o.g)if(L)for(var B="",ce=L.split("&"),Se=0;Se<ce.length;Se++){var ie=ce[Se].split("=");if(1<ie.length){var Ve=ie[0];ie=ie[1];var Le=Ve.split("_");B=2<=Le.length&&Le[1]=="type"?B+(Ve+"="+ie+"&"):B+(Ve+"=redacted&")}}else B=null;else B=L;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+u+`
`+h+`
`+B})}function vf(o,u,h,g,C,L,B){o.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+u+`
`+h+`
`+L+" "+B})}function ks(o,u,h,g){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+wf(o,h)+(g?" "+g:"")})}function _f(o,u){o.info(function(){return"TIMEOUT: "+u})}hn.prototype.info=function(){};function wf(o,u){if(!o.g)return u;if(!u)return null;try{var h=JSON.parse(u);if(h){for(o=0;o<h.length;o++)if(Array.isArray(h[o])){var g=h[o];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var L=C[0];if(L!="noop"&&L!="stop"&&L!="close")for(var B=1;B<C.length;B++)C[B]=""}}}}return ea(h)}catch{return u}}var pr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Rl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ra;function gr(){}k(gr,ta),gr.prototype.g=function(){return new XMLHttpRequest},gr.prototype.i=function(){return{}},ra=new gr;function Ot(o,u,h,g){this.j=o,this.i=u,this.l=h,this.R=g||1,this.U=new ln(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Cl}function Cl(){this.i=null,this.g="",this.h=!1}var kl={},ia={};function aa(o,u,h){o.L=1,o.v=vr(wt(u)),o.m=h,o.P=!0,Pl(o,null)}function Pl(o,u){o.F=Date.now(),xr(o),o.A=wt(o.v);var h=o.A,g=o.R;Array.isArray(g)||(g=[String(g)]),Wl(h.i,"t",g),o.C=0,h=o.j.J,o.h=new Cl,o.g=dc(o.j,h?u:null,!o.m),0<o.O&&(o.M=new gf(x(o.Y,o,o.g),o.O)),u=o.U,h=o.g,g=o.ca;var C="readystatechange";Array.isArray(C)||(C&&(wl[0]=C.toString()),C=wl);for(var L=0;L<C.length;L++){var B=gl(h,C[L],g||u.handleEvent,!1,u.h||u);if(!B)break;u.g[B.key]=B}u=o.H?b(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),un(),bf(o.i,o.u,o.A,o.l,o.R,o.m)}Ot.prototype.ca=function(o){o=o.target;const u=this.M;u&&Nt(o)==3?u.j():this.Y(o)},Ot.prototype.Y=function(o){try{if(o==this.g)e:{const Le=Nt(this.g);var u=this.g.Ba();const Os=this.g.Z();if(!(3>Le)&&(Le!=3||this.g&&(this.h.h||this.g.oa()||ec(this.g)))){this.J||Le!=4||u==7||(u==8||0>=Os?un(3):un(2)),oa(this);var h=this.g.Z();this.X=h;t:if(Dl(this)){var g=ec(this.g);o="";var C=g.length,L=Nt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ls(this),mn(this);var B="";break t}this.h.i=new c.TextDecoder}for(u=0;u<C;u++)this.h.h=!0,o+=this.h.i.decode(g[u],{stream:!(L&&u==C-1)});g.length=0,this.h.g+=o,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=h==200,vf(this.i,this.u,this.A,this.l,this.R,Le,h),this.o){if(this.T&&!this.K){t:{if(this.g){var ce,Se=this.g;if((ce=Se.g?Se.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(ce)){var ie=ce;break t}}ie=null}if(h=ie)ks(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,la(this,h);else{this.o=!1,this.s=3,$e(12),ls(this),mn(this);break e}}if(this.P){h=!0;let rt;for(;!this.J&&this.C<B.length;)if(rt=Nf(this,B),rt==ia){Le==4&&(this.s=4,$e(14),h=!1),ks(this.i,this.l,null,"[Incomplete Response]");break}else if(rt==kl){this.s=4,$e(15),ks(this.i,this.l,B,"[Invalid Chunk]"),h=!1;break}else ks(this.i,this.l,rt,null),la(this,rt);if(Dl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Le!=4||B.length!=0||this.h.h||(this.s=1,$e(16),h=!1),this.o=this.o&&h,!h)ks(this.i,this.l,B,"[Invalid Chunked Response]"),ls(this),mn(this);else if(0<B.length&&!this.W){this.W=!0;var Ve=this.j;Ve.g==this&&Ve.ba&&!Ve.M&&(Ve.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),fa(Ve),Ve.M=!0,$e(11))}}else ks(this.i,this.l,B,null),la(this,B);Le==4&&ls(this),this.o&&!this.J&&(Le==4?oc(this.j,this):(this.o=!1,xr(this)))}else Ff(this.g),h==400&&0<B.indexOf("Unknown SID")?(this.s=3,$e(12)):(this.s=0,$e(13)),ls(this),mn(this)}}}catch{}finally{}};function Dl(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function Nf(o,u){var h=o.C,g=u.indexOf(`
`,h);return g==-1?ia:(h=Number(u.substring(h,g)),isNaN(h)?kl:(g+=1,g+h>u.length?ia:(u=u.slice(g,g+h),o.C=g+h,u)))}Ot.prototype.cancel=function(){this.J=!0,ls(this)};function xr(o){o.S=Date.now()+o.I,Ol(o,o.I)}function Ol(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=dn(x(o.ba,o),u)}function oa(o){o.B&&(c.clearTimeout(o.B),o.B=null)}Ot.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(_f(this.i,this.A),this.L!=2&&(un(),$e(17)),ls(this),this.s=2,mn(this)):Ol(this,this.S-o)};function mn(o){o.j.G==0||o.J||oc(o.j,o)}function ls(o){oa(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,Nl(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function la(o,u){try{var h=o.j;if(h.G!=0&&(h.g==o||ca(h.h,o))){if(!o.K&&ca(h.h,o)&&h.G==3){try{var g=h.Da.g.parse(u)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<o.F)jr(h),Er(h);else break e;ma(h),$e(18)}}else h.za=C[1],0<h.za-h.T&&37500>C[2]&&h.F&&h.v==0&&!h.C&&(h.C=dn(x(h.Za,h),6e3));if(1>=Ml(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else us(h,11)}else if((o.K||h.g==o)&&jr(h),!S(u))for(C=h.Da.g.parse(u),u=0;u<C.length;u++){let ie=C[u];if(h.T=ie[0],ie=ie[1],h.G==2)if(ie[0]=="c"){h.K=ie[1],h.ia=ie[2];const Ve=ie[3];Ve!=null&&(h.la=Ve,h.j.info("VER="+h.la));const Le=ie[4];Le!=null&&(h.Aa=Le,h.j.info("SVER="+h.Aa));const Os=ie[5];Os!=null&&typeof Os=="number"&&0<Os&&(g=1.5*Os,h.L=g,h.j.info("backChannelRequestTimeoutMs_="+g)),g=h;const rt=o.g;if(rt){const Ar=rt.g?rt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ar){var L=g.h;L.g||Ar.indexOf("spdy")==-1&&Ar.indexOf("quic")==-1&&Ar.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(ua(L,L.h),L.h=null))}if(g.D){const pa=rt.g?rt.g.getResponseHeader("X-HTTP-Session-Id"):null;pa&&(g.ya=pa,de(g.I,g.D,pa))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-o.F,h.j.info("Handshake RTT: "+h.R+"ms")),g=h;var B=o;if(g.qa=uc(g,g.J?g.ia:null,g.W),B.K){Ul(g.h,B);var ce=B,Se=g.L;Se&&(ce.I=Se),ce.B&&(oa(ce),xr(ce)),g.g=B}else ic(g);0<h.i.length&&Tr(h)}else ie[0]!="stop"&&ie[0]!="close"||us(h,7);else h.G==3&&(ie[0]=="stop"||ie[0]=="close"?ie[0]=="stop"?us(h,7):ha(h):ie[0]!="noop"&&h.l&&h.l.ta(ie),h.v=0)}}un(4)}catch{}}var Ef=class{constructor(o,u){this.g=o,this.map=u}};function Vl(o){this.l=o||10,c.PerformanceNavigationTiming?(o=c.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ll(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Ml(o){return o.h?1:o.g?o.g.size:0}function ca(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function ua(o,u){o.g?o.g.add(u):o.h=u}function Ul(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}Vl.prototype.cancel=function(){if(this.i=Fl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Fl(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const h of o.g.values())u=u.concat(h.D);return u}return R(o.i)}function Tf(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(d(o)){for(var u=[],h=o.length,g=0;g<h;g++)u.push(o[g]);return u}u=[],h=0;for(g in o)u[h++]=o[g];return u}function jf(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(d(o)||typeof o=="string"){var u=[];o=o.length;for(var h=0;h<o;h++)u.push(h);return u}u=[],h=0;for(const g in o)u[h++]=g;return u}}}function Bl(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(d(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var h=jf(o),g=Tf(o),C=g.length,L=0;L<C;L++)u.call(void 0,g[L],h&&h[L],o)}var ql=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function If(o,u){if(o){o=o.split("&");for(var h=0;h<o.length;h++){var g=o[h].indexOf("="),C=null;if(0<=g){var L=o[h].substring(0,g);C=o[h].substring(g+1)}else L=o[h];u(L,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function cs(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof cs){this.h=o.h,yr(this,o.j),this.o=o.o,this.g=o.g,br(this,o.s),this.l=o.l;var u=o.i,h=new gn;h.i=u.i,u.g&&(h.g=new Map(u.g),h.h=u.h),zl(this,h),this.m=o.m}else o&&(u=String(o).match(ql))?(this.h=!1,yr(this,u[1]||"",!0),this.o=fn(u[2]||""),this.g=fn(u[3]||"",!0),br(this,u[4]),this.l=fn(u[5]||"",!0),zl(this,u[6]||"",!0),this.m=fn(u[7]||"")):(this.h=!1,this.i=new gn(null,this.h))}cs.prototype.toString=function(){var o=[],u=this.j;u&&o.push(pn(u,$l,!0),":");var h=this.g;return(h||u=="file")&&(o.push("//"),(u=this.o)&&o.push(pn(u,$l,!0),"@"),o.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&o.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&o.push("/"),o.push(pn(h,h.charAt(0)=="/"?Rf:Sf,!0))),(h=this.i.toString())&&o.push("?",h),(h=this.m)&&o.push("#",pn(h,kf)),o.join("")};function wt(o){return new cs(o)}function yr(o,u,h){o.j=h?fn(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function br(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function zl(o,u,h){u instanceof gn?(o.i=u,Pf(o.i,o.h)):(h||(u=pn(u,Cf)),o.i=new gn(u,o.h))}function de(o,u,h){o.i.set(u,h)}function vr(o){return de(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function fn(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function pn(o,u,h){return typeof o=="string"?(o=encodeURI(o).replace(u,Af),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Af(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var $l=/[#\/\?@]/g,Sf=/[#\?:]/g,Rf=/[#\?]/g,Cf=/[#\?@]/g,kf=/#/g;function gn(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function Vt(o){o.g||(o.g=new Map,o.h=0,o.i&&If(o.i,function(u,h){o.add(decodeURIComponent(u.replace(/\+/g," ")),h)}))}s=gn.prototype,s.add=function(o,u){Vt(this),this.i=null,o=Ps(this,o);var h=this.g.get(o);return h||this.g.set(o,h=[]),h.push(u),this.h+=1,this};function Hl(o,u){Vt(o),u=Ps(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function Gl(o,u){return Vt(o),u=Ps(o,u),o.g.has(u)}s.forEach=function(o,u){Vt(this),this.g.forEach(function(h,g){h.forEach(function(C){o.call(u,C,g,this)},this)},this)},s.na=function(){Vt(this);const o=Array.from(this.g.values()),u=Array.from(this.g.keys()),h=[];for(let g=0;g<u.length;g++){const C=o[g];for(let L=0;L<C.length;L++)h.push(u[g])}return h},s.V=function(o){Vt(this);let u=[];if(typeof o=="string")Gl(this,o)&&(u=u.concat(this.g.get(Ps(this,o))));else{o=Array.from(this.g.values());for(let h=0;h<o.length;h++)u=u.concat(o[h])}return u},s.set=function(o,u){return Vt(this),this.i=null,o=Ps(this,o),Gl(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},s.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function Wl(o,u,h){Hl(o,u),0<h.length&&(o.i=null,o.g.set(Ps(o,u),R(h)),o.h+=h.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(var h=0;h<u.length;h++){var g=u[h];const L=encodeURIComponent(String(g)),B=this.V(g);for(g=0;g<B.length;g++){var C=L;B[g]!==""&&(C+="="+encodeURIComponent(String(B[g]))),o.push(C)}}return this.i=o.join("&")};function Ps(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function Pf(o,u){u&&!o.j&&(Vt(o),o.i=null,o.g.forEach(function(h,g){var C=g.toLowerCase();g!=C&&(Hl(this,g),Wl(this,C,h))},o)),o.j=u}function Df(o,u){const h=new hn;if(c.Image){const g=new Image;g.onload=j(Lt,h,"TestLoadImage: loaded",!0,u,g),g.onerror=j(Lt,h,"TestLoadImage: error",!1,u,g),g.onabort=j(Lt,h,"TestLoadImage: abort",!1,u,g),g.ontimeout=j(Lt,h,"TestLoadImage: timeout",!1,u,g),c.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=o}else u(!1)}function Of(o,u){const h=new hn,g=new AbortController,C=setTimeout(()=>{g.abort(),Lt(h,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:g.signal}).then(L=>{clearTimeout(C),L.ok?Lt(h,"TestPingServer: ok",!0,u):Lt(h,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(C),Lt(h,"TestPingServer: error",!1,u)})}function Lt(o,u,h,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(h)}catch{}}function Vf(){this.g=new yf}function Lf(o,u,h){const g=h||"";try{Bl(o,function(C,L){let B=C;m(C)&&(B=ea(C)),u.push(g+L+"="+encodeURIComponent(B))})}catch(C){throw u.push(g+"type="+encodeURIComponent("_badmap")),C}}function _r(o){this.l=o.Ub||null,this.j=o.eb||!1}k(_r,ta),_r.prototype.g=function(){return new wr(this.l,this.j)},_r.prototype.i=function(o){return function(){return o}}({});function wr(o,u){Oe.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(wr,Oe),s=wr.prototype,s.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,yn(this)},s.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||c).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xn(this)),this.readyState=0},s.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,yn(this)),this.g&&(this.readyState=3,yn(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Kl(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Kl(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}s.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?xn(this):yn(this),this.readyState==3&&Kl(this)}},s.Ra=function(o){this.g&&(this.response=this.responseText=o,xn(this))},s.Qa=function(o){this.g&&(this.response=o,xn(this))},s.ga=function(){this.g&&xn(this)};function xn(o){o.readyState=4,o.l=null,o.j=null,o.v=null,yn(o)}s.setRequestHeader=function(o,u){this.u.append(o,u)},s.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var h=u.next();!h.done;)h=h.value,o.push(h[0]+": "+h[1]),h=u.next();return o.join(`\r
`)};function yn(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(wr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Ql(o){let u="";return V(o,function(h,g){u+=g,u+=":",u+=h,u+=`\r
`}),u}function da(o,u,h){e:{for(g in h){var g=!1;break e}g=!0}g||(h=Ql(h),typeof o=="string"?h!=null&&encodeURIComponent(String(h)):de(o,u,h))}function pe(o){Oe.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(pe,Oe);var Mf=/^https?$/i,Uf=["POST","PUT"];s=pe.prototype,s.Ha=function(o){this.J=o},s.ea=function(o,u,h,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ra.g(),this.v=this.o?El(this.o):El(ra),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(L){Xl(this,L);return}if(o=h||"",h=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)h.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const L of g.keys())h.set(L,g.get(L));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(h.keys()).find(L=>L.toLowerCase()=="content-type"),C=c.FormData&&o instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Uf,u,void 0))||g||C||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,B]of h)this.g.setRequestHeader(L,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zl(this),this.u=!0,this.g.send(o),this.u=!1}catch(L){Xl(this,L)}};function Xl(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,Jl(o),Nr(o)}function Jl(o){o.A||(o.A=!0,ze(o,"complete"),ze(o,"error"))}s.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,ze(this,"complete"),ze(this,"abort"),Nr(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Nr(this,!0)),pe.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Yl(this):this.bb())},s.bb=function(){Yl(this)};function Yl(o){if(o.h&&typeof l<"u"&&(!o.v[1]||Nt(o)!=4||o.Z()!=2)){if(o.u&&Nt(o)==4)vl(o.Ea,0,o);else if(ze(o,"readystatechange"),Nt(o)==4){o.h=!1;try{const B=o.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var h;if(!(h=u)){var g;if(g=B===0){var C=String(o.D).match(ql)[1]||null;!C&&c.self&&c.self.location&&(C=c.self.location.protocol.slice(0,-1)),g=!Mf.test(C?C.toLowerCase():"")}h=g}if(h)ze(o,"complete"),ze(o,"success");else{o.m=6;try{var L=2<Nt(o)?o.g.statusText:""}catch{L=""}o.l=L+" ["+o.Z()+"]",Jl(o)}}finally{Nr(o)}}}}function Nr(o,u){if(o.g){Zl(o);const h=o.g,g=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||ze(o,"ready");try{h.onreadystatechange=g}catch{}}}function Zl(o){o.I&&(c.clearTimeout(o.I),o.I=null)}s.isActive=function(){return!!this.g};function Nt(o){return o.g?o.g.readyState:0}s.Z=function(){try{return 2<Nt(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),xf(u)}};function ec(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Ff(o){const u={};o=(o.g&&2<=Nt(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<o.length;g++){if(S(o[g]))continue;var h=E(o[g]);const C=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();const L=u[C]||[];u[C]=L,L.push(h)}v(u,function(g){return g.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bn(o,u,h){return h&&h.internalChannelParams&&h.internalChannelParams[o]||u}function tc(o){this.Aa=0,this.i=[],this.j=new hn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bn("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bn("baseRetryDelayMs",5e3,o),this.cb=bn("retryDelaySeedMs",1e4,o),this.Wa=bn("forwardChannelMaxRetries",2,o),this.wa=bn("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Vl(o&&o.concurrentRequestLimit),this.Da=new Vf,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=tc.prototype,s.la=8,s.G=1,s.connect=function(o,u,h,g){$e(0),this.W=o,this.H=u||{},h&&g!==void 0&&(this.H.OSID=h,this.H.OAID=g),this.F=this.X,this.I=uc(this,null,this.W),Tr(this)};function ha(o){if(sc(o),o.G==3){var u=o.U++,h=wt(o.I);if(de(h,"SID",o.K),de(h,"RID",u),de(h,"TYPE","terminate"),vn(o,h),u=new Ot(o,o.j,u),u.L=2,u.v=vr(wt(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(u.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=u.v,h=!0),h||(u.g=dc(u.j,null),u.g.ea(u.v)),u.F=Date.now(),xr(u)}cc(o)}function Er(o){o.g&&(fa(o),o.g.cancel(),o.g=null)}function sc(o){Er(o),o.u&&(c.clearTimeout(o.u),o.u=null),jr(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&c.clearTimeout(o.s),o.s=null)}function Tr(o){if(!Ll(o.h)&&!o.s){o.s=!0;var u=o.Ga;F||be(),ne||(F(),ne=!0),ye.add(u,o),o.B=0}}function Bf(o,u){return Ml(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=dn(x(o.Ga,o,u),lc(o,o.B)),o.B++,!0)}s.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const C=new Ot(this,this.j,o);let L=this.o;if(this.S&&(L?(L=b(L),N(L,this.S)):L=this.S),this.m!==null||this.O||(C.H=L,L=null),this.P)e:{for(var u=0,h=0;h<this.i.length;h++){t:{var g=this.i[h];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(u+=g,4096<u){u=h;break e}if(u===4096||h===this.i.length-1){u=h+1;break e}}u=1e3}else u=1e3;u=rc(this,C,u),h=wt(this.I),de(h,"RID",o),de(h,"CVER",22),this.D&&de(h,"X-HTTP-Session-Id",this.D),vn(this,h),L&&(this.O?u="headers="+encodeURIComponent(String(Ql(L)))+"&"+u:this.m&&da(h,this.m,L)),ua(this.h,C),this.Ua&&de(h,"TYPE","init"),this.P?(de(h,"$req",u),de(h,"SID","null"),C.T=!0,aa(C,h,null)):aa(C,h,u),this.G=2}}else this.G==3&&(o?nc(this,o):this.i.length==0||Ll(this.h)||nc(this))};function nc(o,u){var h;u?h=u.l:h=o.U++;const g=wt(o.I);de(g,"SID",o.K),de(g,"RID",h),de(g,"AID",o.T),vn(o,g),o.m&&o.o&&da(g,o.m,o.o),h=new Ot(o,o.j,h,o.B+1),o.m===null&&(h.H=o.o),u&&(o.i=u.D.concat(o.i)),u=rc(o,h,1e3),h.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),ua(o.h,h),aa(h,g,u)}function vn(o,u){o.H&&V(o.H,function(h,g){de(u,g,h)}),o.l&&Bl({},function(h,g){de(u,g,h)})}function rc(o,u,h){h=Math.min(o.i.length,h);var g=o.l?x(o.l.Na,o.l,o):null;e:{var C=o.i;let L=-1;for(;;){const B=["count="+h];L==-1?0<h?(L=C[0].g,B.push("ofs="+L)):L=0:B.push("ofs="+L);let ce=!0;for(let Se=0;Se<h;Se++){let ie=C[Se].g;const Ve=C[Se].map;if(ie-=L,0>ie)L=Math.max(0,C[Se].g-100),ce=!1;else try{Lf(Ve,B,"req"+ie+"_")}catch{g&&g(Ve)}}if(ce){g=B.join("&");break e}}}return o=o.i.splice(0,h),u.D=o,g}function ic(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;F||be(),ne||(F(),ne=!0),ye.add(u,o),o.v=0}}function ma(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=dn(x(o.Fa,o),lc(o,o.v)),o.v++,!0)}s.Fa=function(){if(this.u=null,ac(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=dn(x(this.ab,this),o)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$e(10),Er(this),ac(this))};function fa(o){o.A!=null&&(c.clearTimeout(o.A),o.A=null)}function ac(o){o.g=new Ot(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=wt(o.qa);de(u,"RID","rpc"),de(u,"SID",o.K),de(u,"AID",o.T),de(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&de(u,"TO",o.ja),de(u,"TYPE","xmlhttp"),vn(o,u),o.m&&o.o&&da(u,o.m,o.o),o.L&&(o.g.I=o.L);var h=o.g;o=o.ia,h.L=1,h.v=vr(wt(u)),h.m=null,h.P=!0,Pl(h,o)}s.Za=function(){this.C!=null&&(this.C=null,Er(this),ma(this),$e(19))};function jr(o){o.C!=null&&(c.clearTimeout(o.C),o.C=null)}function oc(o,u){var h=null;if(o.g==u){jr(o),fa(o),o.g=null;var g=2}else if(ca(o.h,u))h=u.D,Ul(o.h,u),g=1;else return;if(o.G!=0){if(u.o)if(g==1){h=u.m?u.m.length:0,u=Date.now()-u.F;var C=o.B;g=fr(),ze(g,new Sl(g,h)),Tr(o)}else ic(o);else if(C=u.s,C==3||C==0&&0<u.X||!(g==1&&Bf(o,u)||g==2&&ma(o)))switch(h&&0<h.length&&(u=o.h,u.i=u.i.concat(h)),C){case 1:us(o,5);break;case 4:us(o,10);break;case 3:us(o,6);break;default:us(o,2)}}}function lc(o,u){let h=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(h*=2),h*u}function us(o,u){if(o.j.info("Error code "+u),u==2){var h=x(o.fb,o),g=o.Xa;const C=!g;g=new cs(g||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||yr(g,"https"),vr(g),C?Df(g.toString(),h):Of(g.toString(),h)}else $e(2);o.G=0,o.l&&o.l.sa(u),cc(o),sc(o)}s.fb=function(o){o?(this.j.info("Successfully pinged google.com"),$e(2)):(this.j.info("Failed to ping google.com"),$e(1))};function cc(o){if(o.G=0,o.ka=[],o.l){const u=Fl(o.h);(u.length!=0||o.i.length!=0)&&(w(o.ka,u),w(o.ka,o.i),o.h.i.length=0,R(o.i),o.i.length=0),o.l.ra()}}function uc(o,u,h){var g=h instanceof cs?wt(h):new cs(h);if(g.g!="")u&&(g.g=u+"."+g.g),br(g,g.s);else{var C=c.location;g=C.protocol,u=u?u+"."+C.hostname:C.hostname,C=+C.port;var L=new cs(null);g&&yr(L,g),u&&(L.g=u),C&&br(L,C),h&&(L.l=h),g=L}return h=o.D,u=o.ya,h&&u&&de(g,h,u),de(g,"VER",o.la),vn(o,g),g}function dc(o,u,h){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new pe(new _r({eb:h})):new pe(o.pa),u.Ha(o.J),u}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function hc(){}s=hc.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Ir(){}Ir.prototype.g=function(o,u){return new Xe(o,u)};function Xe(o,u){Oe.call(this),this.g=new tc(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!S(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!S(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new Ds(this)}k(Xe,Oe),Xe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xe.prototype.close=function(){ha(this.g)},Xe.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var h={};h.__data__=o,o=h}else this.u&&(h={},h.__data__=ea(o),o=h);u.i.push(new Ef(u.Ya++,o)),u.G==3&&Tr(u)},Xe.prototype.N=function(){this.g.l=null,delete this.j,ha(this.g),delete this.g,Xe.aa.N.call(this)};function mc(o){sa.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){e:{for(const h in u){o=h;break e}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}k(mc,sa);function fc(){na.call(this),this.status=1}k(fc,na);function Ds(o){this.g=o}k(Ds,hc),Ds.prototype.ua=function(){ze(this.g,"a")},Ds.prototype.ta=function(o){ze(this.g,new mc(o))},Ds.prototype.sa=function(o){ze(this.g,new fc)},Ds.prototype.ra=function(){ze(this.g,"b")},Ir.prototype.createWebChannel=Ir.prototype.g,Xe.prototype.send=Xe.prototype.o,Xe.prototype.open=Xe.prototype.m,Xe.prototype.close=Xe.prototype.close,gh=function(){return new Ir},ph=function(){return fr()},fh=os,to={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pr.NO_ERROR=0,pr.TIMEOUT=8,pr.HTTP_ERROR=6,$r=pr,Rl.COMPLETE="complete",mh=Rl,Tl.EventType=cn,cn.OPEN="a",cn.CLOSE="b",cn.ERROR="c",cn.MESSAGE="d",Oe.prototype.listen=Oe.prototype.K,Tn=Tl,pe.prototype.listenOnce=pe.prototype.L,pe.prototype.getLastError=pe.prototype.Ka,pe.prototype.getLastErrorCode=pe.prototype.Ba,pe.prototype.getStatus=pe.prototype.Z,pe.prototype.getResponseJson=pe.prototype.Oa,pe.prototype.getResponseText=pe.prototype.oa,pe.prototype.send=pe.prototype.ea,pe.prototype.setWithCredentials=pe.prototype.Ha,hh=pe}).apply(typeof Cr<"u"?Cr:typeof self<"u"?self:typeof window<"u"?window:{});const tu="@firebase/firestore",su="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ue.UNAUTHENTICATED=new Ue(null),Ue.GOOGLE_CREDENTIALS=new Ue("google-credentials-uid"),Ue.FIRST_PARTY=new Ue("first-party-uid"),Ue.MOCK_USER=new Ue("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nn="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=new Eo("@firebase/firestore");function Vs(){return ws.logLevel}function q(s,...e){if(ws.logLevel<=Y.DEBUG){const t=e.map(Oo);ws.debug(`Firestore (${nn}): ${s}`,...t)}}function kt(s,...e){if(ws.logLevel<=Y.ERROR){const t=e.map(Oo);ws.error(`Firestore (${nn}): ${s}`,...t)}}function Xs(s,...e){if(ws.logLevel<=Y.WARN){const t=e.map(Oo);ws.warn(`Firestore (${nn}): ${s}`,...t)}}function Oo(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(s,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,xh(s,n,t)}function xh(s,e,t){let n=`FIRESTORE (${nn}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw kt(n),new Error(n)}function oe(s,e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,s||xh(e,i,n)}function X(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends _t{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ue.UNAUTHENTICATED))}shutdown(){}}class ib{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ab{constructor(e){this.t=e,this.currentUser=Ue.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){oe(this.o===void 0,42304);let n=this.i;const i=d=>this.i!==n?(n=this.i,t(d)):Promise.resolve();let a=new Kt;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Kt,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const d=a;e.enqueueRetryable(async()=>{await d.promise,await i(this.currentUser)})},c=d=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Kt)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(oe(typeof n.accessToken=="string",31837,{l:n}),new yh(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return oe(e===null||typeof e=="string",2055,{h:e}),new Ue(e)}}class ob{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Ue.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class lb{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new ob(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ue.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nu{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cb{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ye(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){oe(this.o===void 0,3512);const n=a=>{a.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,q("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const i=a=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new nu(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(oe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new nu(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<s;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=ub(40);for(let a=0;a<i.length;++a)n.length<20&&i[a]<t&&(n+=e.charAt(i[a]%62))}return n}}function Z(s,e){return s<e?-1:s>e?1:0}function so(s,e){const t=Math.min(s.length,e.length);for(let n=0;n<t;n++){const i=s.charAt(n),a=e.charAt(n);if(i!==a)return ja(i)===ja(a)?Z(i,a):ja(i)?1:-1}return Z(s.length,e.length)}const db=55296,hb=57343;function ja(s){const e=s.charCodeAt(0);return e>=db&&e<=hb}function Js(s,e,t){return s.length===e.length&&s.every((n,i)=>t(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru="__name__";class lt{constructor(e,t,n){t===void 0?t=0:t>e.length&&K(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&K(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return lt.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof lt?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const a=lt.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return Z(e.length,t.length)}static compareSegments(e,t){const n=lt.isNumericId(e),i=lt.isNumericId(t);return n&&!i?-1:!n&&i?1:n&&i?lt.extractNumericId(e).compare(lt.extractNumericId(t)):so(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Wt.fromString(e.substring(4,e.length-2))}}class he extends lt{construct(e,t,n){return new he(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new z(U.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(i=>i.length>0))}return new he(t)}static emptyPath(){return new he([])}}const mb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ce extends lt{construct(e,t,n){return new Ce(e,t,n)}static isValidIdentifier(e){return mb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ce.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ru}static keyField(){return new Ce([ru])}static fromServerFormat(e){const t=[];let n="",i=0;const a=()=>{if(n.length===0)throw new z(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let l=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new z(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new z(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,i+=2}else c==="`"?(l=!l,i++):c!=="."||l?(n+=c,i++):(a(),i++)}if(a(),l)throw new z(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ce(t)}static emptyPath(){return new Ce([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.path=e}static fromPath(e){return new H(he.fromString(e))}static fromName(e){return new H(he.fromString(e).popFirst(5))}static empty(){return new H(he.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&he.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return he.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new H(new he(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bh(s,e,t){if(!t)throw new z(U.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function fb(s,e,t,n){if(e===!0&&n===!0)throw new z(U.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function iu(s){if(!H.isDocumentKey(s))throw new z(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function au(s){if(H.isDocumentKey(s))throw new z(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function vh(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Lo(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":K(12329,{type:typeof s})}function $n(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new z(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Lo(s);throw new z(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(s,e){const t={typeString:s};return e&&(t.value=e),t}function ar(s,e){if(!vh(s))throw new z(U.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const i=e[n].typeString,a="value"in e[n]?{value:e[n].value}:void 0;if(!(n in s)){t=`JSON missing required field: '${n}'`;break}const l=s[n];if(i&&typeof l!==i){t=`JSON field '${n}' must be a ${i}.`;break}if(a!==void 0&&l!==a.value){t=`Expected '${n}' field to equal '${a.value}'`;break}}if(t)throw new z(U.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou=-62135596800,lu=1e6;class me{static now(){return me.fromMillis(Date.now())}static fromDate(e){return me.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*lu);return new me(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new z(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new z(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ou)throw new z(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/lu}_compareTo(e){return this.seconds===e.seconds?Z(this.nanoseconds,e.nanoseconds):Z(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:me._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ar(e,me._jsonSchema))return new me(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ou;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}me._jsonSchemaVersion="firestore/timestamp/1.0",me._jsonSchema={type:we("string",me._jsonSchemaVersion),seconds:we("number"),nanoseconds:we("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{static fromTimestamp(e){return new Q(e)}static min(){return new Q(new me(0,0))}static max(){return new Q(new me(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn=-1;function pb(s,e){const t=s.toTimestamp().seconds,n=s.toTimestamp().nanoseconds+1,i=Q.fromTimestamp(n===1e9?new me(t+1,0):new me(t,n));return new Yt(i,H.empty(),e)}function gb(s){return new Yt(s.readTime,s.key,Hn)}class Yt{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Yt(Q.min(),H.empty(),Hn)}static max(){return new Yt(Q.max(),H.empty(),Hn)}}function xb(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=H.comparator(s.documentKey,e.documentKey),t!==0?t:Z(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rn(s){if(s.code!==U.FAILED_PRECONDITION||s.message!==yb)throw s;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&K(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new M((n,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(n,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof M?t:M.resolve(t)}catch(t){return M.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):M.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):M.reject(t)}static resolve(e){return new M((t,n)=>{t(e)})}static reject(e){return new M((t,n)=>{n(e)})}static waitFor(e){return new M((t,n)=>{let i=0,a=0,l=!1;e.forEach(c=>{++i,c.next(()=>{++a,l&&a===i&&t()},d=>n(d))}),l=!0,a===i&&t()})}static or(e){let t=M.resolve(!1);for(const n of e)t=t.next(i=>i?M.resolve(i):n());return t}static forEach(e,t){const n=[];return e.forEach((i,a)=>{n.push(t.call(this,i,a))}),this.waitFor(n)}static mapArray(e,t){return new M((n,i)=>{const a=e.length,l=new Array(a);let c=0;for(let d=0;d<a;d++){const m=d;t(e[m]).next(f=>{l[m]=f,++c,c===a&&n(l)},f=>i(f))}})}static doWhile(e,t){return new M((n,i)=>{const a=()=>{e()===!0?t().next(()=>{a()},i):n()};a()})}}function vb(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function an(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ri.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo=-1;function Ci(s){return s==null}function ai(s){return s===0&&1/s==-1/0}function _b(s){return typeof s=="number"&&Number.isInteger(s)&&!ai(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h="";function wb(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=cu(e)),e=Nb(s.get(t),e);return cu(e)}function Nb(s,e){let t=e;const n=s.length;for(let i=0;i<n;i++){const a=s.charAt(i);switch(a){case"\0":t+="";break;case _h:t+="";break;default:t+=a}}return t}function cu(s){return s+_h+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Is(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function wh(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e,t){this.comparator=e,this.root=t||Re.EMPTY}insert(e,t){return new fe(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Re.BLACK,null,null))}remove(e){return new fe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Re.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kr(this.root,e,this.comparator,!1)}getReverseIterator(){return new kr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kr(this.root,e,this.comparator,!0)}}class kr{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?n(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Re{constructor(e,t,n,i,a){this.key=e,this.value=t,this.color=n??Re.RED,this.left=i??Re.EMPTY,this.right=a??Re.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,a){return new Re(e??this.key,t??this.value,n??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const a=n(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,n),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Re.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Re.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Re.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Re.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw K(43730,{key:this.key,value:this.value});if(this.right.isRed())throw K(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw K(27949);return e+(this.isRed()?0:1)}}Re.EMPTY=null,Re.RED=!0,Re.BLACK=!1;Re.EMPTY=new class{constructor(){this.size=0}get key(){throw K(57766)}get value(){throw K(16141)}get color(){throw K(16727)}get left(){throw K(29726)}get right(){throw K(36894)}copy(e,t,n,i,a){return this}insert(e,t,n){return new Re(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.comparator=e,this.data=new fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new du(this.data.getIterator())}getIteratorFrom(e){return new du(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof Te)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=n.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Te(this.comparator);return t.data=e,t}}class du{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.fields=e,e.sort(Ce.comparator)}static empty(){return new at([])}unionWith(e){let t=new Te(Ce.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new at(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Js(this.fields,e.fields,(t,n)=>t.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Nh("Invalid base64 string: "+a):a}}(e);return new De(t)}static fromUint8Array(e){const t=function(i){let a="";for(let l=0;l<i.length;++l)a+=String.fromCharCode(i[l]);return a}(e);return new De(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Z(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}De.EMPTY_BYTE_STRING=new De("");const Eb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zt(s){if(oe(!!s,39018),typeof s=="string"){let e=0;const t=Eb.exec(s);if(oe(!!t,46558,{timestamp:s}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(s);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:ve(s.seconds),nanos:ve(s.nanos)}}function ve(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function es(s){return typeof s=="string"?De.fromBase64String(s):De.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh="server_timestamp",Th="__type__",jh="__previous_value__",Ih="__local_write_time__";function Uo(s){return(s?.mapValue?.fields||{})[Th]?.stringValue===Eh}function ki(s){const e=s.mapValue.fields[jh];return Uo(e)?ki(e):e}function Gn(s){const e=Zt(s.mapValue.fields[Ih].timestampValue);return new me(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e,t,n,i,a,l,c,d,m,f){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=m,this.isUsingEmulator=f}}const oi="(default)";class Wn{constructor(e,t){this.projectId=e,this.database=t||oi}static empty(){return new Wn("","")}get isDefaultDatabase(){return this.database===oi}isEqual(e){return e instanceof Wn&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah="__type__",jb="__max__",Pr={mapValue:{}},Sh="__vector__",li="value";function ts(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Uo(s)?4:Ab(s)?9007199254740991:Ib(s)?10:11:K(28295,{value:s})}function bt(s,e){if(s===e)return!0;const t=ts(s);if(t!==ts(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Gn(s).isEqual(Gn(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const l=Zt(i.timestampValue),c=Zt(a.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(i,a){return es(i.bytesValue).isEqual(es(a.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(i,a){return ve(i.geoPointValue.latitude)===ve(a.geoPointValue.latitude)&&ve(i.geoPointValue.longitude)===ve(a.geoPointValue.longitude)}(s,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return ve(i.integerValue)===ve(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const l=ve(i.doubleValue),c=ve(a.doubleValue);return l===c?ai(l)===ai(c):isNaN(l)&&isNaN(c)}return!1}(s,e);case 9:return Js(s.arrayValue.values||[],e.arrayValue.values||[],bt);case 10:case 11:return function(i,a){const l=i.mapValue.fields||{},c=a.mapValue.fields||{};if(uu(l)!==uu(c))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(c[d]===void 0||!bt(l[d],c[d])))return!1;return!0}(s,e);default:return K(52216,{left:s})}}function Kn(s,e){return(s.values||[]).find(t=>bt(t,e))!==void 0}function Ys(s,e){if(s===e)return 0;const t=ts(s),n=ts(e);if(t!==n)return Z(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Z(s.booleanValue,e.booleanValue);case 2:return function(a,l){const c=ve(a.integerValue||a.doubleValue),d=ve(l.integerValue||l.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(s,e);case 3:return hu(s.timestampValue,e.timestampValue);case 4:return hu(Gn(s),Gn(e));case 5:return so(s.stringValue,e.stringValue);case 6:return function(a,l){const c=es(a),d=es(l);return c.compareTo(d)}(s.bytesValue,e.bytesValue);case 7:return function(a,l){const c=a.split("/"),d=l.split("/");for(let m=0;m<c.length&&m<d.length;m++){const f=Z(c[m],d[m]);if(f!==0)return f}return Z(c.length,d.length)}(s.referenceValue,e.referenceValue);case 8:return function(a,l){const c=Z(ve(a.latitude),ve(l.latitude));return c!==0?c:Z(ve(a.longitude),ve(l.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return mu(s.arrayValue,e.arrayValue);case 10:return function(a,l){const c=a.fields||{},d=l.fields||{},m=c[li]?.arrayValue,f=d[li]?.arrayValue,p=Z(m?.values?.length||0,f?.values?.length||0);return p!==0?p:mu(m,f)}(s.mapValue,e.mapValue);case 11:return function(a,l){if(a===Pr.mapValue&&l===Pr.mapValue)return 0;if(a===Pr.mapValue)return 1;if(l===Pr.mapValue)return-1;const c=a.fields||{},d=Object.keys(c),m=l.fields||{},f=Object.keys(m);d.sort(),f.sort();for(let p=0;p<d.length&&p<f.length;++p){const x=so(d[p],f[p]);if(x!==0)return x;const j=Ys(c[d[p]],m[f[p]]);if(j!==0)return j}return Z(d.length,f.length)}(s.mapValue,e.mapValue);default:throw K(23264,{he:t})}}function hu(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Z(s,e);const t=Zt(s),n=Zt(e),i=Z(t.seconds,n.seconds);return i!==0?i:Z(t.nanos,n.nanos)}function mu(s,e){const t=s.values||[],n=e.values||[];for(let i=0;i<t.length&&i<n.length;++i){const a=Ys(t[i],n[i]);if(a)return a}return Z(t.length,n.length)}function Zs(s){return no(s)}function no(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(t){const n=Zt(t);return`time(${n.seconds},${n.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(t){return es(t).toBase64()}(s.bytesValue):"referenceValue"in s?function(t){return H.fromName(t).toString()}(s.referenceValue):"geoPointValue"in s?function(t){return`geo(${t.latitude},${t.longitude})`}(s.geoPointValue):"arrayValue"in s?function(t){let n="[",i=!0;for(const a of t.values||[])i?i=!1:n+=",",n+=no(a);return n+"]"}(s.arrayValue):"mapValue"in s?function(t){const n=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const l of n)a?a=!1:i+=",",i+=`${l}:${no(t.fields[l])}`;return i+"}"}(s.mapValue):K(61005,{value:s})}function Hr(s){switch(ts(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ki(s);return e?16+Hr(e):16;case 5:return 2*s.stringValue.length;case 6:return es(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((i,a)=>i+Hr(a),0)}(s.arrayValue);case 10:case 11:return function(n){let i=0;return Is(n.fields,(a,l)=>{i+=a.length+Hr(l)}),i}(s.mapValue);default:throw K(13486,{value:s})}}function ro(s){return!!s&&"integerValue"in s}function Fo(s){return!!s&&"arrayValue"in s}function fu(s){return!!s&&"nullValue"in s}function pu(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Gr(s){return!!s&&"mapValue"in s}function Ib(s){return(s?.mapValue?.fields||{})[Ah]?.stringValue===Sh}function Cn(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Is(s.mapValue.fields,(t,n)=>e.mapValue.fields[t]=Cn(n)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Cn(s.arrayValue.values[t]);return e}return{...s}}function Ab(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===jb}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.value=e}static empty(){return new tt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Gr(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cn(t)}setAll(e){let t=Ce.emptyPath(),n={},i=[];e.forEach((l,c)=>{if(!t.isImmediateParentOf(c)){const d=this.getFieldsMap(t);this.applyChanges(d,n,i),n={},i=[],t=c.popLast()}l?n[c.lastSegment()]=Cn(l):i.push(c.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,n,i)}delete(e){const t=this.field(e.popLast());Gr(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return bt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];Gr(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){Is(t,(i,a)=>e[i]=a);for(const i of n)delete e[i]}clone(){return new tt(Cn(this.value))}}function Rh(s){const e=[];return Is(s.fields,(t,n)=>{const i=new Ce([t]);if(Gr(n)){const a=Rh(n.mapValue).fields;if(a.length===0)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new at(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,t,n,i,a,l,c){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=a,this.data=l,this.documentState=c}static newInvalidDocument(e){return new Be(e,0,Q.min(),Q.min(),Q.min(),tt.empty(),0)}static newFoundDocument(e,t,n,i){return new Be(e,1,t,Q.min(),n,i,0)}static newNoDocument(e,t){return new Be(e,2,t,Q.min(),Q.min(),tt.empty(),0)}static newUnknownDocument(e,t){return new Be(e,3,t,Q.min(),Q.min(),tt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Be&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Be(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,t){this.position=e,this.inclusive=t}}function gu(s,e,t){let n=0;for(let i=0;i<s.position.length;i++){const a=e[i],l=s.position[i];if(a.field.isKeyField()?n=H.comparator(H.fromName(l.referenceValue),t.key):n=Ys(l,t.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function xu(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!bt(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,t="asc"){this.field=e,this.dir=t}}function Sb(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{}class Ee extends Ch{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new Cb(e,t,n):t==="array-contains"?new Db(e,n):t==="in"?new Ob(e,n):t==="not-in"?new Vb(e,n):t==="array-contains-any"?new Lb(e,n):new Ee(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new kb(e,n):new Pb(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ys(t,this.value)):t!==null&&ts(this.value)===ts(t)&&this.matchesComparison(Ys(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vt extends Ch{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new vt(e,t)}matches(e){return kh(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function kh(s){return s.op==="and"}function Ph(s){return Rb(s)&&kh(s)}function Rb(s){for(const e of s.filters)if(e instanceof vt)return!1;return!0}function io(s){if(s instanceof Ee)return s.field.canonicalString()+s.op.toString()+Zs(s.value);if(Ph(s))return s.filters.map(e=>io(e)).join(",");{const e=s.filters.map(t=>io(t)).join(",");return`${s.op}(${e})`}}function Dh(s,e){return s instanceof Ee?function(n,i){return i instanceof Ee&&n.op===i.op&&n.field.isEqual(i.field)&&bt(n.value,i.value)}(s,e):s instanceof vt?function(n,i){return i instanceof vt&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((a,l,c)=>a&&Dh(l,i.filters[c]),!0):!1}(s,e):void K(19439)}function Oh(s){return s instanceof Ee?function(t){return`${t.field.canonicalString()} ${t.op} ${Zs(t.value)}`}(s):s instanceof vt?function(t){return t.op.toString()+" {"+t.getFilters().map(Oh).join(" ,")+"}"}(s):"Filter"}class Cb extends Ee{constructor(e,t,n){super(e,t,n),this.key=H.fromName(n.referenceValue)}matches(e){const t=H.comparator(e.key,this.key);return this.matchesComparison(t)}}class kb extends Ee{constructor(e,t){super(e,"in",t),this.keys=Vh("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Pb extends Ee{constructor(e,t){super(e,"not-in",t),this.keys=Vh("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Vh(s,e){return(e.arrayValue?.values||[]).map(t=>H.fromName(t.referenceValue))}class Db extends Ee{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Fo(t)&&Kn(t.arrayValue,this.value)}}class Ob extends Ee{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Kn(this.value.arrayValue,t)}}class Vb extends Ee{constructor(e,t){super(e,"not-in",t)}matches(e){if(Kn(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Kn(this.value.arrayValue,t)}}class Lb extends Ee{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Fo(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>Kn(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e,t=null,n=[],i=[],a=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=a,this.startAt=l,this.endAt=c,this.Te=null}}function yu(s,e=null,t=[],n=[],i=null,a=null,l=null){return new Mb(s,e,t,n,i,a,l)}function Bo(s){const e=X(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>io(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(a){return a.field.canonicalString()+a.dir}(n)).join(","),Ci(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>Zs(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>Zs(n)).join(",")),e.Te=t}return e.Te}function qo(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!Sb(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!Dh(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!xu(s.startAt,e.startAt)&&xu(s.endAt,e.endAt)}function ao(s){return H.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,t=null,n=[],i=[],a=null,l="F",c=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=a,this.limitType=l,this.startAt=c,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Ub(s,e,t,n,i,a,l,c){return new Pi(s,e,t,n,i,a,l,c)}function Lh(s){return new Pi(s)}function bu(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Fb(s){return s.collectionGroup!==null}function kn(s){const e=X(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Te(Ce.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(m=>{m.isInequality()&&(c=c.add(m.field))})}),c})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new ui(a,n))}),t.has(Ce.keyField().canonicalString())||e.Ie.push(new ui(Ce.keyField(),n))}return e.Ie}function ft(s){const e=X(s);return e.Ee||(e.Ee=Bb(e,kn(s))),e.Ee}function Bb(s,e){if(s.limitType==="F")return yu(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new ui(i.field,a)});const t=s.endAt?new ci(s.endAt.position,s.endAt.inclusive):null,n=s.startAt?new ci(s.startAt.position,s.startAt.inclusive):null;return yu(s.path,s.collectionGroup,e,s.filters,s.limit,t,n)}}function oo(s,e,t){return new Pi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function Di(s,e){return qo(ft(s),ft(e))&&s.limitType===e.limitType}function Mh(s){return`${Bo(ft(s))}|lt:${s.limitType}`}function Ls(s){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(i=>Oh(i)).join(", ")}]`),Ci(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>Zs(i)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>Zs(i)).join(",")),`Target(${n})`}(ft(s))}; limitType=${s.limitType})`}function Oi(s,e){return e.isFoundDocument()&&function(n,i){const a=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):H.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)}(s,e)&&function(n,i){for(const a of kn(n))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(s,e)&&function(n,i){for(const a of n.filters)if(!a.matches(i))return!1;return!0}(s,e)&&function(n,i){return!(n.startAt&&!function(l,c,d){const m=gu(l,c,d);return l.inclusive?m<=0:m<0}(n.startAt,kn(n),i)||n.endAt&&!function(l,c,d){const m=gu(l,c,d);return l.inclusive?m>=0:m>0}(n.endAt,kn(n),i))}(s,e)}function qb(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Uh(s){return(e,t)=>{let n=!1;for(const i of kn(s)){const a=zb(i,e,t);if(a!==0)return a;n=n||i.field.isKeyField()}return 0}}function zb(s,e,t){const n=s.field.isKeyField()?H.comparator(e.key,t.key):function(a,l,c){const d=l.data.field(a),m=c.data.field(a);return d!==null&&m!==null?Ys(d,m):K(42886)}(s.field,e,t);switch(s.dir){case"asc":return n;case"desc":return-1*n;default:return K(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[i,a]of n)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Is(this.inner,(t,n)=>{for(const[i,a]of n)e(i,a)})}isEmpty(){return wh(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b=new fe(H.comparator);function Pt(){return $b}const Fh=new fe(H.comparator);function jn(...s){let e=Fh;for(const t of s)e=e.insert(t.key,t);return e}function Bh(s){let e=Fh;return s.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function ms(){return Pn()}function qh(){return Pn()}function Pn(){return new As(s=>s.toString(),(s,e)=>s.isEqual(e))}const Hb=new fe(H.comparator),Gb=new Te(H.comparator);function ee(...s){let e=Gb;for(const t of s)e=e.add(t);return e}const Wb=new Te(Z);function Kb(){return Wb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ai(e)?"-0":e}}function zh(s){return{integerValue:""+s}}function Qb(s,e){return _b(e)?zh(e):zo(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(){this._=void 0}}function Xb(s,e,t){return s instanceof di?function(i,a){const l={fields:{[Th]:{stringValue:Eh},[Ih]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Uo(a)&&(a=ki(a)),a&&(l.fields[jh]=a),{mapValue:l}}(t,e):s instanceof Qn?Hh(s,e):s instanceof Xn?Gh(s,e):function(i,a){const l=$h(i,a),c=vu(l)+vu(i.Ae);return ro(l)&&ro(i.Ae)?zh(c):zo(i.serializer,c)}(s,e)}function Jb(s,e,t){return s instanceof Qn?Hh(s,e):s instanceof Xn?Gh(s,e):t}function $h(s,e){return s instanceof hi?function(n){return ro(n)||function(a){return!!a&&"doubleValue"in a}(n)}(e)?e:{integerValue:0}:null}class di extends Vi{}class Qn extends Vi{constructor(e){super(),this.elements=e}}function Hh(s,e){const t=Wh(e);for(const n of s.elements)t.some(i=>bt(i,n))||t.push(n);return{arrayValue:{values:t}}}class Xn extends Vi{constructor(e){super(),this.elements=e}}function Gh(s,e){let t=Wh(e);for(const n of s.elements)t=t.filter(i=>!bt(i,n));return{arrayValue:{values:t}}}class hi extends Vi{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function vu(s){return ve(s.integerValue||s.doubleValue)}function Wh(s){return Fo(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function Yb(s,e){return s.field.isEqual(e.field)&&function(n,i){return n instanceof Qn&&i instanceof Qn||n instanceof Xn&&i instanceof Xn?Js(n.elements,i.elements,bt):n instanceof hi&&i instanceof hi?bt(n.Ae,i.Ae):n instanceof di&&i instanceof di}(s.transform,e.transform)}class Zb{constructor(e,t){this.version=e,this.transformResults=t}}class pt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pt}static exists(e){return new pt(void 0,e)}static updateTime(e){return new pt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wr(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Li{}function Kh(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new $o(s.key,pt.none()):new or(s.key,s.data,pt.none());{const t=s.data,n=tt.empty();let i=new Te(Ce.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?n.delete(a):n.set(a,l),i=i.add(a)}return new Ss(s.key,n,new at(i.toArray()),pt.none())}}function ev(s,e,t){s instanceof or?function(i,a,l){const c=i.value.clone(),d=wu(i.fieldTransforms,a,l.transformResults);c.setAll(d),a.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(s,e,t):s instanceof Ss?function(i,a,l){if(!Wr(i.precondition,a))return void a.convertToUnknownDocument(l.version);const c=wu(i.fieldTransforms,a,l.transformResults),d=a.data;d.setAll(Qh(i)),d.setAll(c),a.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(s,e,t):function(i,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function Dn(s,e,t,n){return s instanceof or?function(a,l,c,d){if(!Wr(a.precondition,l))return c;const m=a.value.clone(),f=Nu(a.fieldTransforms,d,l);return m.setAll(f),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null}(s,e,t,n):s instanceof Ss?function(a,l,c,d){if(!Wr(a.precondition,l))return c;const m=Nu(a.fieldTransforms,d,l),f=l.data;return f.setAll(Qh(a)),f.setAll(m),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(p=>p.field))}(s,e,t,n):function(a,l,c){return Wr(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(s,e,t)}function tv(s,e){let t=null;for(const n of s.fieldTransforms){const i=e.data.field(n.field),a=$h(n.transform,i||null);a!=null&&(t===null&&(t=tt.empty()),t.set(n.field,a))}return t||null}function _u(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Js(n,i,(a,l)=>Yb(a,l))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class or extends Li{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ss extends Li{constructor(e,t,n,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Qh(s){const e=new Map;return s.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=s.data.field(t);e.set(t,n)}}),e}function wu(s,e,t){const n=new Map;oe(s.length===t.length,32656,{Re:t.length,Ve:s.length});for(let i=0;i<t.length;i++){const a=s[i],l=a.transform,c=e.data.field(a.field);n.set(a.field,Jb(l,c,t[i]))}return n}function Nu(s,e,t){const n=new Map;for(const i of s){const a=i.transform,l=t.data.field(i.field);n.set(i.field,Xb(a,l,e))}return n}class $o extends Li{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sv extends Li{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&ev(a,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Dn(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Dn(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=qh();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let c=this.applyToLocalView(l,a.mutatedFields);c=t.has(i.key)?null:c;const d=Kh(l,c);d!==null&&n.set(i.key,d),l.isValidDocument()||l.convertToNoDocument(Q.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ee())}isEqual(e){return this.batchId===e.batchId&&Js(this.mutations,e.mutations,(t,n)=>_u(t,n))&&Js(this.baseMutations,e.baseMutations,(t,n)=>_u(t,n))}}class Ho{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){oe(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let i=function(){return Hb}();const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,n[l].version);return new Ho(e,t,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e,se;function av(s){switch(s){case U.OK:return K(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return K(15467,{code:s})}}function Xh(s){if(s===void 0)return kt("GRPC error has no .code"),U.UNKNOWN;switch(s){case _e.OK:return U.OK;case _e.CANCELLED:return U.CANCELLED;case _e.UNKNOWN:return U.UNKNOWN;case _e.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case _e.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case _e.INTERNAL:return U.INTERNAL;case _e.UNAVAILABLE:return U.UNAVAILABLE;case _e.UNAUTHENTICATED:return U.UNAUTHENTICATED;case _e.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case _e.NOT_FOUND:return U.NOT_FOUND;case _e.ALREADY_EXISTS:return U.ALREADY_EXISTS;case _e.PERMISSION_DENIED:return U.PERMISSION_DENIED;case _e.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case _e.ABORTED:return U.ABORTED;case _e.OUT_OF_RANGE:return U.OUT_OF_RANGE;case _e.UNIMPLEMENTED:return U.UNIMPLEMENTED;case _e.DATA_LOSS:return U.DATA_LOSS;default:return K(39323,{code:s})}}(se=_e||(_e={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv=new Wt([4294967295,4294967295],0);function Eu(s){const e=ov().encode(s),t=new dh;return t.update(e),new Uint8Array(t.digest())}function Tu(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Wt([t,n],0),new Wt([i,a],0)]}class Go{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new In(`Invalid padding: ${t}`);if(n<0)throw new In(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new In(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new In(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Wt.fromNumber(this.ge)}ye(e,t,n){let i=e.add(t.multiply(Wt.fromNumber(n)));return i.compare(lv)===1&&(i=new Wt([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Eu(e),[n,i]=Tu(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(n,i,a);if(!this.we(l))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new Go(a,i,t);return n.forEach(c=>l.insert(c)),l}insert(e){if(this.ge===0)return;const t=Eu(e),[n,i]=Tu(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(n,i,a);this.Se(l)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class In extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,t,n,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,lr.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Mi(Q.min(),i,new fe(Z),Pt(),ee())}}class lr{constructor(e,t,n,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new lr(n,t,ee(),ee(),ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,t,n,i){this.be=e,this.removedTargetIds=t,this.key=n,this.De=i}}class Jh{constructor(e,t){this.targetId=e,this.Ce=t}}class Yh{constructor(e,t,n=De.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class ju{constructor(){this.ve=0,this.Fe=Iu(),this.Me=De.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ee(),t=ee(),n=ee();return this.Fe.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:K(38017,{changeType:a})}}),new lr(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=Iu()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,oe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class cv{constructor(e){this.Ge=e,this.ze=new Map,this.je=Pt(),this.Je=Dr(),this.He=Dr(),this.Ye=new fe(Z)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:K(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((n,i)=>{this.rt(i)&&t(i)})}st(e){const t=e.targetId,n=e.Ce.count,i=this.ot(t);if(i){const a=i.target;if(ao(a))if(n===0){const l=new H(a.path);this.et(t,l,Be.newNoDocument(l,Q.min()))}else oe(n===1,20013,{expectedCount:n});else{const l=this._t(t);if(l!==n){const c=this.ut(e),d=c?this.ct(c,e,l):1;if(d!==0){this.it(t);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:a=0}=t;let l,c;try{l=es(n).toUint8Array()}catch(d){if(d instanceof Nh)return Xs("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new Go(l,i,a)}catch(d){return Xs(d instanceof In?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.ge===0?null:c}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let i=0;return n.forEach(a=>{const l=this.Ge.ht(),c=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.et(t,a,null),i++)}),i}Tt(e){const t=new Map;this.ze.forEach((a,l)=>{const c=this.ot(l);if(c){if(a.current&&ao(c.target)){const d=new H(c.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,Be.newNoDocument(d,e))}a.Be&&(t.set(l,a.ke()),a.qe())}});let n=ee();this.He.forEach((a,l)=>{let c=!0;l.forEachWhile(d=>{const m=this.ot(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(n=n.add(a))}),this.je.forEach((a,l)=>l.setReadTime(e));const i=new Mi(e,t,this.Ye,this.je,n);return this.je=Pt(),this.Je=Dr(),this.He=Dr(),this.Ye=new fe(Z),i}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new ju,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Te(Z),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Te(Z),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||q("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ju),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Dr(){return new fe(H.comparator)}function Iu(){return new fe(H.comparator)}const uv={asc:"ASCENDING",desc:"DESCENDING"},dv={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hv={and:"AND",or:"OR"};class mv{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function lo(s,e){return s.useProto3Json||Ci(e)?e:{value:e}}function mi(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Zh(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function fv(s,e){return mi(s,e.toTimestamp())}function gt(s){return oe(!!s,49232),Q.fromTimestamp(function(t){const n=Zt(t);return new me(n.seconds,n.nanos)}(s))}function Wo(s,e){return co(s,e).canonicalString()}function co(s,e){const t=function(i){return new he(["projects",i.projectId,"databases",i.database])}(s).child("documents");return e===void 0?t:t.child(e)}function em(s){const e=he.fromString(s);return oe(im(e),10190,{key:e.toString()}),e}function uo(s,e){return Wo(s.databaseId,e.path)}function Ia(s,e){const t=em(e);if(t.get(1)!==s.databaseId.projectId)throw new z(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new z(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new H(sm(t))}function tm(s,e){return Wo(s.databaseId,e)}function pv(s){const e=em(s);return e.length===4?he.emptyPath():sm(e)}function ho(s){return new he(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function sm(s){return oe(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Au(s,e,t){return{name:uo(s,e),fields:t.value.mapValue.fields}}function gv(s,e){let t;if("targetChange"in e){e.targetChange;const n=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:K(39313,{state:m})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(m,f){return m.useProto3Json?(oe(f===void 0||typeof f=="string",58123),De.fromBase64String(f||"")):(oe(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),De.fromUint8Array(f||new Uint8Array))}(s,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&function(m){const f=m.code===void 0?U.UNKNOWN:Xh(m.code);return new z(f,m.message||"")}(l);t=new Yh(n,i,a,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=Ia(s,n.document.name),a=gt(n.document.updateTime),l=n.document.createTime?gt(n.document.createTime):Q.min(),c=new tt({mapValue:{fields:n.document.fields}}),d=Be.newFoundDocument(i,a,l,c),m=n.targetIds||[],f=n.removedTargetIds||[];t=new Kr(m,f,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=Ia(s,n.document),a=n.readTime?gt(n.readTime):Q.min(),l=Be.newNoDocument(i,a),c=n.removedTargetIds||[];t=new Kr([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=Ia(s,n.document),a=n.removedTargetIds||[];t=new Kr([],a,i,null)}else{if(!("filter"in e))return K(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:a}=n,l=new iv(i,a),c=n.targetId;t=new Jh(c,l)}}return t}function xv(s,e){let t;if(e instanceof or)t={update:Au(s,e.key,e.value)};else if(e instanceof $o)t={delete:uo(s,e.key)};else if(e instanceof Ss)t={update:Au(s,e.key,e.data),updateMask:jv(e.fieldMask)};else{if(!(e instanceof sv))return K(16599,{Vt:e.type});t={verify:uo(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(a,l){const c=l.transform;if(c instanceof di)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Qn)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Xn)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof hi)return{fieldPath:l.field.canonicalString(),increment:c.Ae};throw K(20930,{transform:l.transform})}(0,n))),e.precondition.isNone||(t.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:fv(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:K(27497)}(s,e.precondition)),t}function yv(s,e){return s&&s.length>0?(oe(e!==void 0,14353),s.map(t=>function(i,a){let l=i.updateTime?gt(i.updateTime):gt(a);return l.isEqual(Q.min())&&(l=gt(a)),new Zb(l,i.transformResults||[])}(t,e))):[]}function bv(s,e){return{documents:[tm(s,e.path)]}}function vv(s,e){const t={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=tm(s,i);const a=function(m){if(m.length!==0)return rm(vt.create(m,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const l=function(m){if(m.length!==0)return m.map(f=>function(x){return{field:Ms(x.field),direction:Nv(x.dir)}}(f))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=lo(s,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{ft:t,parent:i}}function _v(s){let e=pv(s.parent);const t=s.structuredQuery,n=t.from?t.from.length:0;let i=null;if(n>0){oe(n===1,65062);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let a=[];t.where&&(a=function(p){const x=nm(p);return x instanceof vt&&Ph(x)?x.getFilters():[x]}(t.where));let l=[];t.orderBy&&(l=function(p){return p.map(x=>function(k){return new ui(Us(k.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(x))}(t.orderBy));let c=null;t.limit&&(c=function(p){let x;return x=typeof p=="object"?p.value:p,Ci(x)?null:x}(t.limit));let d=null;t.startAt&&(d=function(p){const x=!!p.before,j=p.values||[];return new ci(j,x)}(t.startAt));let m=null;return t.endAt&&(m=function(p){const x=!p.before,j=p.values||[];return new ci(j,x)}(t.endAt)),Ub(e,i,l,a,c,"F",d,m)}function wv(s,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function nm(s){return s.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Us(t.unaryFilter.field);return Ee.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Us(t.unaryFilter.field);return Ee.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Us(t.unaryFilter.field);return Ee.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Us(t.unaryFilter.field);return Ee.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return K(61313);default:return K(60726)}}(s):s.fieldFilter!==void 0?function(t){return Ee.create(Us(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return K(58110);default:return K(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(t){return vt.create(t.compositeFilter.filters.map(n=>nm(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K(1026)}}(t.compositeFilter.op))}(s):K(30097,{filter:s})}function Nv(s){return uv[s]}function Ev(s){return dv[s]}function Tv(s){return hv[s]}function Ms(s){return{fieldPath:s.canonicalString()}}function Us(s){return Ce.fromServerFormat(s.fieldPath)}function rm(s){return s instanceof Ee?function(t){if(t.op==="=="){if(pu(t.value))return{unaryFilter:{field:Ms(t.field),op:"IS_NAN"}};if(fu(t.value))return{unaryFilter:{field:Ms(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(pu(t.value))return{unaryFilter:{field:Ms(t.field),op:"IS_NOT_NAN"}};if(fu(t.value))return{unaryFilter:{field:Ms(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ms(t.field),op:Ev(t.op),value:t.value}}}(s):s instanceof vt?function(t){const n=t.getFilters().map(i=>rm(i));return n.length===1?n[0]:{compositeFilter:{op:Tv(t.op),filters:n}}}(s):K(54877,{filter:s})}function jv(s){const e=[];return s.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function im(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,t,n,i,a=Q.min(),l=Q.min(),c=De.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new $t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new $t(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e){this.yt=e}}function Av(s){const e=_v({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?oo(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(){this.Cn=new Rv}addToCollectionParentIndex(e,t){return this.Cn.add(t),M.resolve()}getCollectionParents(e,t){return M.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return M.resolve()}deleteFieldIndex(e,t){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,t){return M.resolve()}getDocumentsMatchingTarget(e,t){return M.resolve(null)}getIndexType(e,t){return M.resolve(0)}getFieldIndexes(e,t){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,t){return M.resolve(Yt.min())}getMinOffsetFromCollectionGroup(e,t){return M.resolve(Yt.min())}updateCollectionGroup(e,t,n){return M.resolve()}updateIndexEntries(e,t){return M.resolve()}}class Rv{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new Te(he.comparator),a=!i.has(n);return this.index[t]=i.add(n),a}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Te(he.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},am=41943040;class Qe{static withCacheSize(e){return new Qe(e,Qe.DEFAULT_COLLECTION_PERCENTILE,Qe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qe.DEFAULT_COLLECTION_PERCENTILE=10,Qe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qe.DEFAULT=new Qe(am,Qe.DEFAULT_COLLECTION_PERCENTILE,Qe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qe.DISABLED=new Qe(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new en(0)}static cr(){return new en(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ru="LruGarbageCollector",Cv=1048576;function Cu([s,e],[t,n]){const i=Z(s,t);return i===0?Z(e,n):i}class kv{constructor(e){this.Ir=e,this.buffer=new Te(Cu),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();Cu(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Pv{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){q(Ru,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){an(t)?q(Ru,"Ignoring IndexedDB error during garbage collection: ",t):await rn(t)}await this.Vr(3e5)})}}class Dv{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(n=>Math.floor(t/100*n))}nthSequenceNumber(e,t){if(t===0)return M.resolve(Ri.ce);const n=new kv(t);return this.mr.forEachTarget(e,i=>n.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>n.Ar(i))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(Su)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Su):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,i,a,l,c,d,m;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,l=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(n=p,c=Date.now(),this.removeTargets(e,n,t))).next(p=>(a=p,d=Date.now(),this.removeOrphanedDocuments(e,n))).next(p=>(m=Date.now(),Vs()<=Y.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-f}ms
	Determined least recently used ${i} in `+(c-l)+`ms
	Removed ${a} targets in `+(d-c)+`ms
	Removed ${p} documents in `+(m-d)+`ms
Total Duration: ${m-f}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:p})))}}function Ov(s,e){return new Dv(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(){this.changes=new As(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Be.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?M.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(n!==null&&Dn(n.mutation,i,at.empty(),me.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,ee()).next(()=>n))}getLocalViewOfDocuments(e,t,n=ee()){const i=ms();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,n).next(a=>{let l=jn();return a.forEach((c,d)=>{l=l.insert(c,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const n=ms();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,ee()))}populateOverlays(e,t,n){const i=[];return n.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,c)=>{t.set(l,c)})})}computeViews(e,t,n,i){let a=Pt();const l=Pn(),c=function(){return Pn()}();return t.forEach((d,m)=>{const f=n.get(m.key);i.has(m.key)&&(f===void 0||f.mutation instanceof Ss)?a=a.insert(m.key,m):f!==void 0?(l.set(m.key,f.mutation.getFieldMask()),Dn(f.mutation,m,f.mutation.getFieldMask(),me.now())):l.set(m.key,at.empty())}),this.recalculateAndSaveOverlays(e,a).next(d=>(d.forEach((m,f)=>l.set(m,f)),t.forEach((m,f)=>c.set(m,new Lv(f,l.get(m)??null))),c))}recalculateAndSaveOverlays(e,t){const n=Pn();let i=new fe((l,c)=>l-c),a=ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const c of l)c.keys().forEach(d=>{const m=t.get(d);if(m===null)return;let f=n.get(d)||at.empty();f=c.applyToLocalView(m,f),n.set(d,f);const p=(i.get(c.batchId)||ee()).add(d);i=i.insert(c.batchId,p)})}).next(()=>{const l=[],c=i.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),m=d.key,f=d.value,p=qh();f.forEach(x=>{if(!a.has(x)){const j=Kh(t.get(x),n.get(x));j!==null&&p.set(x,j),a=a.add(x)}}),l.push(this.documentOverlayCache.saveOverlays(e,m,p))}return M.waitFor(l)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,i){return function(l){return H.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Fb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-a.size):M.resolve(ms());let c=Hn,d=a;return l.next(m=>M.forEach(m,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),a.get(f)?M.resolve():this.remoteDocumentCache.getEntry(e,f).next(x=>{d=d.insert(f,x)}))).next(()=>this.populateOverlays(e,m,a)).next(()=>this.computeViews(e,d,m,ee())).next(f=>({batchId:c,changes:Bh(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new H(t)).next(n=>{let i=jn();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const a=t.collectionGroup;let l=jn();return this.indexManager.getCollectionParents(e,a).next(c=>M.forEach(c,d=>{const m=function(p,x){return new Pi(x,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,d.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,n,i).next(f=>{f.forEach((p,x)=>{l=l.insert(p,x)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,n,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,a,i))).next(l=>{a.forEach((d,m)=>{const f=m.getKey();l.get(f)===null&&(l=l.insert(f,Be.newInvalidDocument(f)))});let c=jn();return l.forEach((d,m)=>{const f=a.get(d);f!==void 0&&Dn(f.mutation,m,at.empty(),me.now()),Oi(t,m)&&(c=c.insert(d,m))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return M.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:gt(i.createTime)}}(t)),M.resolve()}getNamedQuery(e,t){return M.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:Av(i.bundledQuery),readTime:gt(i.readTime)}}(t)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(){this.overlays=new fe(H.comparator),this.qr=new Map}getOverlay(e,t){return M.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ms();return M.forEach(t,i=>this.getOverlay(e,i).next(a=>{a!==null&&n.set(i,a)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((i,a)=>{this.St(e,t,a)}),M.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.qr.get(n);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(n)),M.resolve()}getOverlaysForCollection(e,t,n){const i=ms(),a=t.length+1,l=new H(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const d=c.getNext().value,m=d.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&d.largestBatchId>n&&i.set(d.getKey(),d)}return M.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let a=new fe((m,f)=>m-f);const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>n){let f=a.get(m.largestBatchId);f===null&&(f=ms(),a=a.insert(m.largestBatchId,f)),f.set(m.getKey(),m)}}const c=ms(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((m,f)=>c.set(m,f)),!(c.size()>=i)););return M.resolve(c)}St(e,t,n){const i=this.overlays.get(n.key);if(i!==null){const l=this.qr.get(i.largestBatchId).delete(n.key);this.qr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(n.key,new rv(t,n));let a=this.qr.get(t);a===void 0&&(a=ee(),this.qr.set(t,a)),this.qr.set(t,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(){this.sessionToken=De.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(){this.Qr=new Te(Ae.$r),this.Ur=new Te(Ae.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Ae(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.Gr(new Ae(e,t))}zr(e,t){e.forEach(n=>this.removeReference(n,t))}jr(e){const t=new H(new he([])),n=new Ae(t,e),i=new Ae(t,e+1),a=[];return this.Ur.forEachInRange([n,i],l=>{this.Gr(l),a.push(l.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new H(new he([])),n=new Ae(t,e),i=new Ae(t,e+1);let a=ee();return this.Ur.forEachInRange([n,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new Ae(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class Ae{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return H.comparator(e.key,t.key)||Z(e.Yr,t.Yr)}static Kr(e,t){return Z(e.Yr,t.Yr)||H.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Te(Ae.$r)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new nv(a,t,n,i);this.mutationQueue.push(l);for(const c of i)this.Zr=this.Zr.add(new Ae(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return M.resolve(l)}lookupMutationBatch(e,t){return M.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.ei(n),a=i<0?0:i;return M.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?Mo:this.tr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Ae(t,0),i=new Ae(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([n,i],l=>{const c=this.Xr(l.Yr);a.push(c)}),M.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Te(Z);return t.forEach(i=>{const a=new Ae(i,0),l=new Ae(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,l],c=>{n=n.add(c.Yr)})}),M.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let a=n;H.isDocumentKey(a)||(a=a.child(""));const l=new Ae(new H(a),0);let c=new Te(Z);return this.Zr.forEachWhile(d=>{const m=d.key.path;return!!n.isPrefixOf(m)&&(m.length===i&&(c=c.add(d.Yr)),!0)},l),M.resolve(this.ti(c))}ti(e){const t=[];return e.forEach(n=>{const i=this.Xr(n);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){oe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return M.forEach(t.mutations,i=>{const a=new Ae(i.key,t.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new Ae(t,0),i=this.Zr.firstAfterOrEqual(n);return M.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e){this.ri=e,this.docs=function(){return new fe(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),a=i?i.size:0,l=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return M.resolve(n?n.document.mutableCopy():Be.newInvalidDocument(t))}getEntries(e,t){let n=Pt();return t.forEach(i=>{const a=this.docs.get(i);n=n.insert(i,a?a.document.mutableCopy():Be.newInvalidDocument(i))}),M.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let a=Pt();const l=t.path,c=new H(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:m,value:{document:f}}=d.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||xb(gb(f),n)<=0||(i.has(f.key)||Oi(t,f))&&(a=a.insert(f.key,f.mutableCopy()))}return M.resolve(a)}getAllFromCollectionGroup(e,t,n,i){K(9500)}ii(e,t){return M.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new $v(this)}getSize(e){return M.resolve(this.size)}}class $v extends Vv{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(n)}),M.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e){this.persistence=e,this.si=new As(t=>Bo(t),qo),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.oi=0,this._i=new Ko,this.targetCount=0,this.ai=en.ur()}forEachTarget(e,t){return this.si.forEach((n,i)=>t(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),M.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new en(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,M.resolve()}updateTargetData(e,t){return this.Pr(t),M.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,t,n){let i=0;const a=[];return this.si.forEach((l,c)=>{c.sequenceNumber<=t&&n.get(c.targetId)===null&&(this.si.delete(l),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),M.waitFor(a).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return M.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),M.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),M.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),M.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return M.resolve(n)}containsKey(e,t){return M.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ri(0),this.li=!1,this.li=!0,this.hi=new Bv,this.referenceDelegate=e(this),this.Pi=new Hv(this),this.indexManager=new Sv,this.remoteDocumentCache=function(i){return new zv(i)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new Iv(t),this.Ii=new Uv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Fv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new qv(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){q("MemoryPersistence","Starting transaction:",e);const i=new Gv(this.ci.next());return this.referenceDelegate.Ei(),n(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ai(e,t){return M.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class Gv extends bb{constructor(e){super(),this.currentSequenceNumber=e}}class Qo{constructor(e){this.persistence=e,this.Ri=new Ko,this.Vi=null}static mi(e){return new Qo(e)}get fi(){if(this.Vi)return this.Vi;throw K(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),M.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),M.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),M.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.fi.add(a.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.fi,n=>{const i=H.fromPath(n);return this.gi(e,i).next(a=>{a||t.removeEntry(i,Q.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return M.or([()=>M.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class fi{constructor(e,t){this.persistence=e,this.pi=new As(n=>wb(n.path),(n,i)=>n.isEqual(i)),this.garbageCollector=Ov(this,t)}static mi(e,t){return new fi(e,t)}Ei(){}di(e){return M.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>t.next(i=>n+i))}wr(e){let t=0;return this.pr(e,n=>{t++}).next(()=>t)}pr(e,t){return M.forEach(this.pi,(n,i)=>this.br(e,n,i).next(a=>a?M.resolve():t(i)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,l=>this.br(e,l,t).next(c=>{c||(n++,a.removeEntry(l,Q.min()))})).next(()=>a.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),M.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),M.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Hr(e.data.value)),t}br(e,t,n){return M.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return M.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=i}static As(e,t){let n=ee(),i=ee();for(const a of t.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Xo(e,t.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Eg()?8:vb(qe())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,i){const a={result:null};return this.ys(e,t).next(l=>{a.result=l}).next(()=>{if(!a.result)return this.ws(e,t,i,n).next(l=>{a.result=l})}).next(()=>{if(a.result)return;const l=new Wv;return this.Ss(e,t,l).next(c=>{if(a.result=c,this.Vs)return this.bs(e,t,l,c.size)})}).next(()=>a.result)}bs(e,t,n,i){return n.documentReadCount<this.fs?(Vs()<=Y.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",Ls(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),M.resolve()):(Vs()<=Y.DEBUG&&q("QueryEngine","Query:",Ls(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.gs*i?(Vs()<=Y.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",Ls(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ft(t))):M.resolve())}ys(e,t){if(bu(t))return M.resolve(null);let n=ft(t);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=oo(t,null,"F"),n=ft(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const l=ee(...a);return this.ps.getDocuments(e,l).next(c=>this.indexManager.getMinOffset(e,n).next(d=>{const m=this.Ds(t,c);return this.Cs(t,m,l,d.readTime)?this.ys(e,oo(t,null,"F")):this.vs(e,m,t,d)}))})))}ws(e,t,n,i){return bu(t)||i.isEqual(Q.min())?M.resolve(null):this.ps.getDocuments(e,n).next(a=>{const l=this.Ds(t,a);return this.Cs(t,l,n,i)?M.resolve(null):(Vs()<=Y.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ls(t)),this.vs(e,l,t,pb(i,Hn)).next(c=>c))})}Ds(e,t){let n=new Te(Uh(e));return t.forEach((i,a)=>{Oi(e,a)&&(n=n.add(a))}),n}Cs(e,t,n,i){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,t,n){return Vs()<=Y.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Ls(t)),this.ps.getDocumentsMatchingQuery(e,t,Yt.min(),n)}vs(e,t,n,i){return this.ps.getDocumentsMatchingQuery(e,n,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo="LocalStore",Qv=3e8;class Xv{constructor(e,t,n,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new fe(Z),this.xs=new As(a=>Bo(a),qo),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Mv(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Jv(s,e,t,n){return new Xv(s,e,t,n)}async function lm(s,e){const t=X(s);return await t.persistence.runTransaction("Handle user change","readonly",n=>{let i;return t.mutationQueue.getAllMutationBatches(n).next(a=>(i=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(n))).next(a=>{const l=[],c=[];let d=ee();for(const m of i){l.push(m.batchId);for(const f of m.mutations)d=d.add(f.key)}for(const m of a){c.push(m.batchId);for(const f of m.mutations)d=d.add(f.key)}return t.localDocuments.getDocuments(n,d).next(m=>({Ls:m,removedBatchIds:l,addedBatchIds:c}))})})}function Yv(s,e){const t=X(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return function(c,d,m,f){const p=m.batch,x=p.keys();let j=M.resolve();return x.forEach(k=>{j=j.next(()=>f.getEntry(d,k)).next(R=>{const w=m.docVersions.get(k);oe(w!==null,48541),R.version.compareTo(w)<0&&(p.applyToRemoteDocument(R,m),R.isValidDocument()&&(R.setReadTime(m.commitVersion),f.addEntry(R)))})}),j.next(()=>c.mutationQueue.removeMutationBatch(d,p))}(t,n,e,a).next(()=>a.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(c){let d=ee();for(let m=0;m<c.mutationResults.length;++m)c.mutationResults[m].transformResults.length>0&&(d=d.add(c.batch.mutations[m].key));return d}(e))).next(()=>t.localDocuments.getDocuments(n,i))})}function cm(s){const e=X(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function Zv(s,e){const t=X(s),n=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const c=[];e.targetChanges.forEach((f,p)=>{const x=i.get(p);if(!x)return;c.push(t.Pi.removeMatchingKeys(a,f.removedDocuments,p).next(()=>t.Pi.addMatchingKeys(a,f.addedDocuments,p)));let j=x.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?j=j.withResumeToken(De.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):f.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(f.resumeToken,n)),i=i.insert(p,j),function(R,w,A){return R.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=Qv?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(x,j,f)&&c.push(t.Pi.updateTargetData(a,j))});let d=Pt(),m=ee();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(a,f))}),c.push(e_(a,l,e.documentUpdates).next(f=>{d=f.ks,m=f.qs})),!n.isEqual(Q.min())){const f=t.Pi.getLastRemoteSnapshotVersion(a).next(p=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,n));c.push(f)}return M.waitFor(c).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,d,m)).next(()=>d)}).then(a=>(t.Ms=i,a))}function e_(s,e,t){let n=ee(),i=ee();return t.forEach(a=>n=n.add(a)),e.getEntries(s,n).next(a=>{let l=Pt();return t.forEach((c,d)=>{const m=a.get(c);d.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(c)),d.isNoDocument()&&d.version.isEqual(Q.min())?(e.removeEntry(c,d.readTime),l=l.insert(c,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(d),l=l.insert(c,d)):q(Jo,"Ignoring outdated watch update for ",c,". Current version:",m.version," Watch version:",d.version)}),{ks:l,qs:i}})}function t_(s,e){const t=X(s);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=Mo),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function s_(s,e){const t=X(s);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return t.Pi.getTargetData(n,e).next(a=>a?(i=a,M.resolve(i)):t.Pi.allocateTargetId(n).next(l=>(i=new $t(e,l,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=t.Ms.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n})}async function mo(s,e,t){const n=X(s),i=n.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",a,l=>n.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!an(l))throw l;q(Jo,`Failed to update sequence numbers for target ${e}: ${l}`)}n.Ms=n.Ms.remove(e),n.xs.delete(i.target)}function ku(s,e,t){const n=X(s);let i=Q.min(),a=ee();return n.persistence.runTransaction("Execute query","readwrite",l=>function(d,m,f){const p=X(d),x=p.xs.get(f);return x!==void 0?M.resolve(p.Ms.get(x)):p.Pi.getTargetData(m,f)}(n,l,ft(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(l,c.targetId).next(d=>{a=d})}).next(()=>n.Fs.getDocumentsMatchingQuery(l,e,t?i:Q.min(),t?a:ee())).next(c=>(n_(n,qb(e),c),{documents:c,Qs:a})))}function n_(s,e,t){let n=s.Os.get(e)||Q.min();t.forEach((i,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),s.Os.set(e,n)}class Pu{constructor(){this.activeTargetIds=Kb()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class r_{constructor(){this.Mo=new Pu,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Pu,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du="ConnectivityMonitor";class Ou{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){q(Du,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){q(Du,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Or=null;function fo(){return Or===null?Or=function(){return 268435456+Math.round(2147483648*Math.random())}():Or++,"0x"+Or.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="RestConnection",a_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class o_{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${i}`,this.Wo=this.databaseId.database===oi?`project_id=${n}`:`project_id=${n}&database_id=${i}`}Go(e,t,n,i,a){const l=fo(),c=this.zo(e,t.toUriEncodedString());q(Aa,`Sending RPC '${e}' ${l}:`,c,n);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,i,a);const{host:m}=new URL(c),f=rs(m);return this.Jo(e,c,d,n,f).then(p=>(q(Aa,`Received RPC '${e}' ${l}: `,p),p),p=>{throw Xs(Aa,`RPC '${e}' ${l} failed with error: `,p,"url: ",c,"request:",n),p})}Ho(e,t,n,i,a,l){return this.Go(e,t,n,i,a)}jo(e,t,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+nn}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),n&&n.headers.forEach((i,a)=>e[a]=i)}zo(e,t){const n=a_[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Me="WebChannelConnection";class c_ extends o_{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,i,a){const l=fo();return new Promise((c,d)=>{const m=new hh;m.setWithCredentials(!0),m.listenOnce(mh.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case $r.NO_ERROR:const p=m.getResponseJson();q(Me,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(p)),c(p);break;case $r.TIMEOUT:q(Me,`RPC '${e}' ${l} timed out`),d(new z(U.DEADLINE_EXCEEDED,"Request time out"));break;case $r.HTTP_ERROR:const x=m.getStatus();if(q(Me,`RPC '${e}' ${l} failed with status:`,x,"response text:",m.getResponseText()),x>0){let j=m.getResponseJson();Array.isArray(j)&&(j=j[0]);const k=j?.error;if(k&&k.status&&k.message){const R=function(A){const S=A.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(S)>=0?S:U.UNKNOWN}(k.status);d(new z(R,k.message))}else d(new z(U.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new z(U.UNAVAILABLE,"Connection failed."));break;default:K(9055,{l_:e,streamId:l,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{q(Me,`RPC '${e}' ${l} completed.`)}});const f=JSON.stringify(i);q(Me,`RPC '${e}' ${l} sending request:`,i),m.send(t,"POST",f,n,15)})}T_(e,t,n){const i=fo(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=gh(),c=ph(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,n),d.encodeInitMessageHeaders=!0;const f=a.join("");q(Me,`Creating RPC '${e}' stream ${i}: ${f}`,d);const p=l.createWebChannel(f,d);this.I_(p);let x=!1,j=!1;const k=new l_({Yo:w=>{j?q(Me,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(x||(q(Me,`Opening RPC '${e}' stream ${i} transport.`),p.open(),x=!0),q(Me,`RPC '${e}' stream ${i} sending:`,w),p.send(w))},Zo:()=>p.close()}),R=(w,A,S)=>{w.listen(A,I=>{try{S(I)}catch(O){setTimeout(()=>{throw O},0)}})};return R(p,Tn.EventType.OPEN,()=>{j||(q(Me,`RPC '${e}' stream ${i} transport opened.`),k.o_())}),R(p,Tn.EventType.CLOSE,()=>{j||(j=!0,q(Me,`RPC '${e}' stream ${i} transport closed`),k.a_(),this.E_(p))}),R(p,Tn.EventType.ERROR,w=>{j||(j=!0,Xs(Me,`RPC '${e}' stream ${i} transport errored. Name:`,w.name,"Message:",w.message),k.a_(new z(U.UNAVAILABLE,"The operation could not be completed")))}),R(p,Tn.EventType.MESSAGE,w=>{if(!j){const A=w.data[0];oe(!!A,16349);const S=A,I=S?.error||S[0]?.error;if(I){q(Me,`RPC '${e}' stream ${i} received error:`,I);const O=I.status;let P=function(b){const _=_e[b];if(_!==void 0)return Xh(_)}(O),V=I.message;P===void 0&&(P=U.INTERNAL,V="Unknown error status: "+O+" with message "+I.message),j=!0,k.a_(new z(P,V)),p.close()}else q(Me,`RPC '${e}' stream ${i} received:`,A),k.u_(A)}}),R(c,fh.STAT_EVENT,w=>{w.stat===to.PROXY?q(Me,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===to.NOPROXY&&q(Me,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Sa(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(s){return new mv(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,t,n=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-n);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vu="PersistentStream";class dm{constructor(e,t,n,i,a,l,c,d){this.Mi=e,this.S_=n,this.b_=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new um(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===U.RESOURCE_EXHAUSTED?(kt(t.toString()),kt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.D_===t&&this.G_(n,i)},n=>{e(()=>{const i=new z(U.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(i)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{n(()=>this.z_(i))}),this.stream.onMessage(i=>{n(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return q(Vu,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(q(Vu,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class u_ extends dm{constructor(e,t,n,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,l),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=gv(this.serializer,e),n=function(a){if(!("targetChange"in a))return Q.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Q.min():l.readTime?gt(l.readTime):Q.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=ho(this.serializer),t.addTarget=function(a,l){let c;const d=l.target;if(c=ao(d)?{documents:bv(a,d)}:{query:vv(a,d).ft},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=Zh(a,l.resumeToken);const m=lo(a,l.expectedCount);m!==null&&(c.expectedCount=m)}else if(l.snapshotVersion.compareTo(Q.min())>0){c.readTime=mi(a,l.snapshotVersion.toTimestamp());const m=lo(a,l.expectedCount);m!==null&&(c.expectedCount=m)}return c}(this.serializer,e);const n=wv(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=ho(this.serializer),t.removeTarget=e,this.q_(t)}}class d_ extends dm{constructor(e,t,n,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,l),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=yv(e.writeResults,e.commitTime),n=gt(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=ho(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>xv(this.serializer,n))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{}class m_ extends h_{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new z(U.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Go(e,co(t,n),i,a,l)).catch(a=>{throw a.name==="FirebaseError"?(a.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new z(U.UNKNOWN,a.toString())})}Ho(e,t,n,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Ho(e,co(t,n),i,l,c,a)).catch(l=>{throw l.name==="FirebaseError"?(l.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new z(U.UNKNOWN,l.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class f_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(kt(t),this.aa=!1):q("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns="RemoteStore";class p_{constructor(e,t,n,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(l=>{n.enqueueAndForget(async()=>{Rs(this)&&(q(Ns,"Restarting streams for network reachability change."),await async function(d){const m=X(d);m.Ea.add(4),await cr(m),m.Ra.set("Unknown"),m.Ea.delete(4),await Fi(m)}(this))})}),this.Ra=new f_(n,i)}}async function Fi(s){if(Rs(s))for(const e of s.da)await e(!0)}async function cr(s){for(const e of s.da)await e(!1)}function hm(s,e){const t=X(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),tl(t)?el(t):on(t).O_()&&Zo(t,e))}function Yo(s,e){const t=X(s),n=on(t);t.Ia.delete(e),n.O_()&&mm(t,e),t.Ia.size===0&&(n.O_()?n.L_():Rs(t)&&t.Ra.set("Unknown"))}function Zo(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Q.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}on(s).Y_(e)}function mm(s,e){s.Va.Ue(e),on(s).Z_(e)}function el(s){s.Va=new cv({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),on(s).start(),s.Ra.ua()}function tl(s){return Rs(s)&&!on(s).x_()&&s.Ia.size>0}function Rs(s){return X(s).Ea.size===0}function fm(s){s.Va=void 0}async function g_(s){s.Ra.set("Online")}async function x_(s){s.Ia.forEach((e,t)=>{Zo(s,e)})}async function y_(s,e){fm(s),tl(s)?(s.Ra.ha(e),el(s)):s.Ra.set("Unknown")}async function b_(s,e,t){if(s.Ra.set("Online"),e instanceof Yh&&e.state===2&&e.cause)try{await async function(i,a){const l=a.cause;for(const c of a.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,l),i.Ia.delete(c),i.Va.removeTarget(c))}(s,e)}catch(n){q(Ns,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await pi(s,n)}else if(e instanceof Kr?s.Va.Ze(e):e instanceof Jh?s.Va.st(e):s.Va.tt(e),!t.isEqual(Q.min()))try{const n=await cm(s.localStore);t.compareTo(n)>=0&&await function(a,l){const c=a.Va.Tt(l);return c.targetChanges.forEach((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const f=a.Ia.get(m);f&&a.Ia.set(m,f.withResumeToken(d.resumeToken,l))}}),c.targetMismatches.forEach((d,m)=>{const f=a.Ia.get(d);if(!f)return;a.Ia.set(d,f.withResumeToken(De.EMPTY_BYTE_STRING,f.snapshotVersion)),mm(a,d);const p=new $t(f.target,d,m,f.sequenceNumber);Zo(a,p)}),a.remoteSyncer.applyRemoteEvent(c)}(s,t)}catch(n){q(Ns,"Failed to raise snapshot:",n),await pi(s,n)}}async function pi(s,e,t){if(!an(e))throw e;s.Ea.add(1),await cr(s),s.Ra.set("Offline"),t||(t=()=>cm(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{q(Ns,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await Fi(s)})}function pm(s,e){return e().catch(t=>pi(s,t,e))}async function Bi(s){const e=X(s),t=ss(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Mo;for(;v_(e);)try{const i=await t_(e.localStore,n);if(i===null){e.Ta.length===0&&t.L_();break}n=i.batchId,__(e,i)}catch(i){await pi(e,i)}gm(e)&&xm(e)}function v_(s){return Rs(s)&&s.Ta.length<10}function __(s,e){s.Ta.push(e);const t=ss(s);t.O_()&&t.X_&&t.ea(e.mutations)}function gm(s){return Rs(s)&&!ss(s).x_()&&s.Ta.length>0}function xm(s){ss(s).start()}async function w_(s){ss(s).ra()}async function N_(s){const e=ss(s);for(const t of s.Ta)e.ea(t.mutations)}async function E_(s,e,t){const n=s.Ta.shift(),i=Ho.from(n,e,t);await pm(s,()=>s.remoteSyncer.applySuccessfulWrite(i)),await Bi(s)}async function T_(s,e){e&&ss(s).X_&&await async function(n,i){if(function(l){return av(l)&&l!==U.ABORTED}(i.code)){const a=n.Ta.shift();ss(n).B_(),await pm(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,i)),await Bi(n)}}(s,e),gm(s)&&xm(s)}async function Lu(s,e){const t=X(s);t.asyncQueue.verifyOperationInProgress(),q(Ns,"RemoteStore received new credentials");const n=Rs(t);t.Ea.add(3),await cr(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Fi(t)}async function j_(s,e){const t=X(s);e?(t.Ea.delete(2),await Fi(t)):e||(t.Ea.add(2),await cr(t),t.Ra.set("Unknown"))}function on(s){return s.ma||(s.ma=function(t,n,i){const a=X(t);return a.sa(),new u_(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(s.datastore,s.asyncQueue,{Xo:g_.bind(null,s),t_:x_.bind(null,s),r_:y_.bind(null,s),H_:b_.bind(null,s)}),s.da.push(async e=>{e?(s.ma.B_(),tl(s)?el(s):s.Ra.set("Unknown")):(await s.ma.stop(),fm(s))})),s.ma}function ss(s){return s.fa||(s.fa=function(t,n,i){const a=X(t);return a.sa(),new d_(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:w_.bind(null,s),r_:T_.bind(null,s),ta:N_.bind(null,s),na:E_.bind(null,s)}),s.da.push(async e=>{e?(s.fa.B_(),await Bi(s)):(await s.fa.stop(),s.Ta.length>0&&(q(Ns,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))})),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,t,n,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=a,this.deferred=new Kt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,a){const l=Date.now()+n,c=new sl(e,t,l,i,a);return c.start(n),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nl(s,e){if(kt("AsyncQueue",`${e}: ${s}`),an(s))return new z(U.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{static emptySet(e){return new Hs(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||H.comparator(t.key,n.key):(t,n)=>H.comparator(t.key,n.key),this.keyedMap=jn(),this.sortedSet=new fe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Hs)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=n.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Hs;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(){this.ga=new fe(H.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):K(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class tn{constructor(e,t,n,i,a,l,c,d,m){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(e,t,n,i,a){const l=[];return t.forEach(c=>{l.push({type:0,doc:c})}),new tn(e,t,Hs.emptySet(t),l,n,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Di(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class A_{constructor(){this.queries=Uu(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const i=X(t),a=i.queries;i.queries=Uu(),a.forEach((l,c)=>{for(const d of c.Sa)d.onError(n)})})(this,new z(U.ABORTED,"Firestore shutting down"))}}function Uu(){return new As(s=>Mh(s),Di)}async function S_(s,e){const t=X(s);let n=3;const i=e.query;let a=t.queries.get(i);a?!a.ba()&&e.Da()&&(n=2):(a=new I_,n=e.Da()?0:1);try{switch(n){case 0:a.wa=await t.onListen(i,!0);break;case 1:a.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const c=nl(l,`Initialization of query '${Ls(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&rl(t)}async function R_(s,e){const t=X(s),n=e.query;let i=3;const a=t.queries.get(n);if(a){const l=a.Sa.indexOf(e);l>=0&&(a.Sa.splice(l,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function C_(s,e){const t=X(s);let n=!1;for(const i of e){const a=i.query,l=t.queries.get(a);if(l){for(const c of l.Sa)c.Fa(i)&&(n=!0);l.wa=i}}n&&rl(t)}function k_(s,e,t){const n=X(s),i=n.queries.get(e);if(i)for(const a of i.Sa)a.onError(t);n.queries.delete(e)}function rl(s){s.Ca.forEach(e=>{e.next()})}var po,Fu;(Fu=po||(po={})).Ma="default",Fu.Cache="cache";class P_{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new tn(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=tn.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==po.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e){this.key=e}}class bm{constructor(e){this.key=e}}class D_{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ee(),this.mutatedKeys=ee(),this.eu=Uh(e),this.tu=new Hs(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Mu,i=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,c=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{const x=i.get(f),j=Oi(this.query,p)?p:null,k=!!x&&this.mutatedKeys.has(x.key),R=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let w=!1;x&&j?x.data.isEqual(j.data)?k!==R&&(n.track({type:3,doc:j}),w=!0):this.su(x,j)||(n.track({type:2,doc:j}),w=!0,(d&&this.eu(j,d)>0||m&&this.eu(j,m)<0)&&(c=!0)):!x&&j?(n.track({type:0,doc:j}),w=!0):x&&!j&&(n.track({type:1,doc:x}),w=!0,(d||m)&&(c=!0)),w&&(j?(l=l.add(j),a=R?a.add(f):a.delete(f)):(l=l.delete(f),a=a.delete(f)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const f=this.query.limitType==="F"?l.last():l.first();l=l.delete(f.key),a=a.delete(f.key),n.track({type:1,doc:f})}return{tu:l,iu:n,Cs:c,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort((f,p)=>function(j,k){const R=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K(20277,{Rt:w})}};return R(j)-R(k)}(f.type,p.type)||this.eu(f.doc,p.doc)),this.ou(n),i=i??!1;const c=t&&!i?this._u():[],d=this.Xa.size===0&&this.current&&!i?1:0,m=d!==this.Za;return this.Za=d,l.length!==0||m?{snapshot:new tn(this.query,e.tu,a,l,e.mutatedKeys,d===0,m,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Mu,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ee(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const t=[];return e.forEach(n=>{this.Xa.has(n)||t.push(new bm(n))}),this.Xa.forEach(n=>{e.has(n)||t.push(new ym(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=ee();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return tn.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const il="SyncEngine";class O_{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class V_{constructor(e){this.key=e,this.hu=!1}}class L_{constructor(e,t,n,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new As(c=>Mh(c),Di),this.Iu=new Map,this.Eu=new Set,this.du=new fe(H.comparator),this.Au=new Map,this.Ru=new Ko,this.Vu={},this.mu=new Map,this.fu=en.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function M_(s,e,t=!0){const n=Tm(s);let i;const a=n.Tu.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await vm(n,e,t,!0),i}async function U_(s,e){const t=Tm(s);await vm(t,e,!0,!1)}async function vm(s,e,t,n){const i=await s_(s.localStore,ft(e)),a=i.targetId,l=s.sharedClientState.addLocalQueryTarget(a,t);let c;return n&&(c=await F_(s,e,a,l==="current",i.resumeToken)),s.isPrimaryClient&&t&&hm(s.remoteStore,i),c}async function F_(s,e,t,n,i){s.pu=(p,x,j)=>async function(R,w,A,S){let I=w.view.ru(A);I.Cs&&(I=await ku(R.localStore,w.query,!1).then(({documents:v})=>w.view.ru(v,I)));const O=S&&S.targetChanges.get(w.targetId),P=S&&S.targetMismatches.get(w.targetId)!=null,V=w.view.applyChanges(I,R.isPrimaryClient,O,P);return qu(R,w.targetId,V.au),V.snapshot}(s,p,x,j);const a=await ku(s.localStore,e,!0),l=new D_(e,a.Qs),c=l.ru(a.documents),d=lr.createSynthesizedTargetChangeForCurrentChange(t,n&&s.onlineState!=="Offline",i),m=l.applyChanges(c,s.isPrimaryClient,d);qu(s,t,m.au);const f=new O_(e,t,l);return s.Tu.set(e,f),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),m.snapshot}async function B_(s,e,t){const n=X(s),i=n.Tu.get(e),a=n.Iu.get(i.targetId);if(a.length>1)return n.Iu.set(i.targetId,a.filter(l=>!Di(l,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await mo(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),t&&Yo(n.remoteStore,i.targetId),go(n,i.targetId)}).catch(rn)):(go(n,i.targetId),await mo(n.localStore,i.targetId,!0))}async function q_(s,e){const t=X(s),n=t.Tu.get(e),i=t.Iu.get(n.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),Yo(t.remoteStore,n.targetId))}async function z_(s,e,t){const n=X_(s);try{const i=await function(l,c){const d=X(l),m=me.now(),f=c.reduce((j,k)=>j.add(k.key),ee());let p,x;return d.persistence.runTransaction("Locally write mutations","readwrite",j=>{let k=Pt(),R=ee();return d.Ns.getEntries(j,f).next(w=>{k=w,k.forEach((A,S)=>{S.isValidDocument()||(R=R.add(A))})}).next(()=>d.localDocuments.getOverlayedDocuments(j,k)).next(w=>{p=w;const A=[];for(const S of c){const I=tv(S,p.get(S.key).overlayedDocument);I!=null&&A.push(new Ss(S.key,I,Rh(I.value.mapValue),pt.exists(!0)))}return d.mutationQueue.addMutationBatch(j,m,A,c)}).next(w=>{x=w;const A=w.applyToLocalDocumentSet(p,R);return d.documentOverlayCache.saveOverlays(j,w.batchId,A)})}).then(()=>({batchId:x.batchId,changes:Bh(p)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(l,c,d){let m=l.Vu[l.currentUser.toKey()];m||(m=new fe(Z)),m=m.insert(c,d),l.Vu[l.currentUser.toKey()]=m}(n,i.batchId,t),await ur(n,i.changes),await Bi(n.remoteStore)}catch(i){const a=nl(i,"Failed to persist write");t.reject(a)}}async function _m(s,e){const t=X(s);try{const n=await Zv(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.Au.get(a);l&&(oe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.hu=!0:i.modifiedDocuments.size>0?oe(l.hu,14607):i.removedDocuments.size>0&&(oe(l.hu,42227),l.hu=!1))}),await ur(t,n,e)}catch(n){await rn(n)}}function Bu(s,e,t){const n=X(s);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const i=[];n.Tu.forEach((a,l)=>{const c=l.view.va(e);c.snapshot&&i.push(c.snapshot)}),function(l,c){const d=X(l);d.onlineState=c;let m=!1;d.queries.forEach((f,p)=>{for(const x of p.Sa)x.va(c)&&(m=!0)}),m&&rl(d)}(n.eventManager,e),i.length&&n.Pu.H_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function $_(s,e,t){const n=X(s);n.sharedClientState.updateQueryState(e,"rejected",t);const i=n.Au.get(e),a=i&&i.key;if(a){let l=new fe(H.comparator);l=l.insert(a,Be.newNoDocument(a,Q.min()));const c=ee().add(a),d=new Mi(Q.min(),new Map,new fe(Z),l,c);await _m(n,d),n.du=n.du.remove(a),n.Au.delete(e),al(n)}else await mo(n.localStore,e,!1).then(()=>go(n,e,t)).catch(rn)}async function H_(s,e){const t=X(s),n=e.batch.batchId;try{const i=await Yv(t.localStore,e);Nm(t,n,null),wm(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await ur(t,i)}catch(i){await rn(i)}}async function G_(s,e,t){const n=X(s);try{const i=await function(l,c){const d=X(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let f;return d.mutationQueue.lookupMutationBatch(m,c).next(p=>(oe(p!==null,37113),f=p.keys(),d.mutationQueue.removeMutationBatch(m,p))).next(()=>d.mutationQueue.performConsistencyCheck(m)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(m,f,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,f)).next(()=>d.localDocuments.getDocuments(m,f))})}(n.localStore,e);Nm(n,e,t),wm(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await ur(n,i)}catch(i){await rn(i)}}function wm(s,e){(s.mu.get(e)||[]).forEach(t=>{t.resolve()}),s.mu.delete(e)}function Nm(s,e,t){const n=X(s);let i=n.Vu[n.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),n.Vu[n.currentUser.toKey()]=i}}function go(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const n of s.Iu.get(e))s.Tu.delete(n),t&&s.Pu.yu(n,t);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach(n=>{s.Ru.containsKey(n)||Em(s,n)})}function Em(s,e){s.Eu.delete(e.path.canonicalString());const t=s.du.get(e);t!==null&&(Yo(s.remoteStore,t),s.du=s.du.remove(e),s.Au.delete(t),al(s))}function qu(s,e,t){for(const n of t)n instanceof ym?(s.Ru.addReference(n.key,e),W_(s,n)):n instanceof bm?(q(il,"Document no longer in limbo: "+n.key),s.Ru.removeReference(n.key,e),s.Ru.containsKey(n.key)||Em(s,n.key)):K(19791,{wu:n})}function W_(s,e){const t=e.key,n=t.path.canonicalString();s.du.get(t)||s.Eu.has(n)||(q(il,"New document in limbo: "+t),s.Eu.add(n),al(s))}function al(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new H(he.fromString(e)),n=s.fu.next();s.Au.set(n,new V_(t)),s.du=s.du.insert(t,n),hm(s.remoteStore,new $t(ft(Lh(t.path)),n,"TargetPurposeLimboResolution",Ri.ce))}}async function ur(s,e,t){const n=X(s),i=[],a=[],l=[];n.Tu.isEmpty()||(n.Tu.forEach((c,d)=>{l.push(n.pu(d,e,t).then(m=>{if((m||t)&&n.isPrimaryClient){const f=m?!m.fromCache:t?.targetChanges.get(d.targetId)?.current;n.sharedClientState.updateQueryState(d.targetId,f?"current":"not-current")}if(m){i.push(m);const f=Xo.As(d.targetId,m);a.push(f)}}))}),await Promise.all(l),n.Pu.H_(i),await async function(d,m){const f=X(d);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>M.forEach(m,x=>M.forEach(x.Es,j=>f.persistence.referenceDelegate.addReference(p,x.targetId,j)).next(()=>M.forEach(x.ds,j=>f.persistence.referenceDelegate.removeReference(p,x.targetId,j)))))}catch(p){if(!an(p))throw p;q(Jo,"Failed to update sequence numbers: "+p)}for(const p of m){const x=p.targetId;if(!p.fromCache){const j=f.Ms.get(x),k=j.snapshotVersion,R=j.withLastLimboFreeSnapshotVersion(k);f.Ms=f.Ms.insert(x,R)}}}(n.localStore,a))}async function K_(s,e){const t=X(s);if(!t.currentUser.isEqual(e)){q(il,"User change. New user:",e.toKey());const n=await lm(t.localStore,e);t.currentUser=e,function(a,l){a.mu.forEach(c=>{c.forEach(d=>{d.reject(new z(U.CANCELLED,l))})}),a.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await ur(t,n.Ls)}}function Q_(s,e){const t=X(s),n=t.Au.get(e);if(n&&n.hu)return ee().add(n.key);{let i=ee();const a=t.Iu.get(e);if(!a)return i;for(const l of a){const c=t.Tu.get(l);i=i.unionWith(c.view.nu)}return i}}function Tm(s){const e=X(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=_m.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Q_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$_.bind(null,e),e.Pu.H_=C_.bind(null,e.eventManager),e.Pu.yu=k_.bind(null,e.eventManager),e}function X_(s){const e=X(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=H_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=G_.bind(null,e),e}class gi{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ui(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Jv(this.persistence,new Kv,e.initialUser,this.serializer)}Cu(e){return new om(Qo.mi,this.serializer)}Du(e){return new r_}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gi.provider={build:()=>new gi};class J_ extends gi{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){oe(this.persistence.referenceDelegate instanceof fi,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Pv(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Qe.withCacheSize(this.cacheSizeBytes):Qe.DEFAULT;return new om(n=>fi.mi(n,t),this.serializer)}}class xo{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Bu(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=K_.bind(null,this.syncEngine),await j_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new A_}()}createDatastore(e){const t=Ui(e.databaseInfo.databaseId),n=function(a){return new c_(a)}(e.databaseInfo);return function(a,l,c,d){return new m_(a,l,c,d)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(n,i,a,l,c){return new p_(n,i,a,l,c)}(this.localStore,this.datastore,e.asyncQueue,t=>Bu(this.syncEngine,t,0),function(){return Ou.v()?new Ou:new i_}())}createSyncEngine(e,t){return function(i,a,l,c,d,m,f){const p=new L_(i,a,l,c,d,m);return f&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(t){const n=X(t);q(Ns,"RemoteStore shutting down."),n.Ea.add(5),await cr(n),n.Aa.shutdown(),n.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}xo.provider={build:()=>new xo};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):kt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns="FirestoreClient";class Z_{constructor(e,t,n,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=Ue.UNAUTHENTICATED,this.clientId=Vo.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,async l=>{q(ns,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(n,l=>(q(ns,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Kt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=nl(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Ra(s,e){s.asyncQueue.verifyOperationInProgress(),q(ns,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let n=t.initialUser;s.setCredentialChangeListener(async i=>{n.isEqual(i)||(await lm(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}async function zu(s,e){s.asyncQueue.verifyOperationInProgress();const t=await ew(s);q(ns,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener(n=>Lu(e.remoteStore,n)),s.setAppCheckTokenChangeListener((n,i)=>Lu(e.remoteStore,i)),s._onlineComponents=e}async function ew(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){q(ns,"Using user provided OfflineComponentProvider");try{await Ra(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===U.FAILED_PRECONDITION||i.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Xs("Error using user provided cache. Falling back to memory cache: "+t),await Ra(s,new gi)}}else q(ns,"Using default OfflineComponentProvider"),await Ra(s,new J_(void 0));return s._offlineComponents}async function jm(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(q(ns,"Using user provided OnlineComponentProvider"),await zu(s,s._uninitializedComponentsProvider._online)):(q(ns,"Using default OnlineComponentProvider"),await zu(s,new xo))),s._onlineComponents}function tw(s){return jm(s).then(e=>e.syncEngine)}async function sw(s){const e=await jm(s),t=e.eventManager;return t.onListen=M_.bind(null,e.syncEngine),t.onUnlisten=B_.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=U_.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=q_.bind(null,e.syncEngine),t}function nw(s,e,t={}){const n=new Kt;return s.asyncQueue.enqueueAndForget(async()=>function(a,l,c,d,m){const f=new Y_({next:x=>{f.Nu(),l.enqueueAndForget(()=>R_(a,p)),x.fromCache&&d.source==="server"?m.reject(new z(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(x)},error:x=>m.reject(x)}),p=new P_(c,f,{includeMetadataChanges:!0,qa:!0});return S_(a,p)}(await sw(s),s.asyncQueue,e,t,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $u=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="firestore.googleapis.com",Hu=!0;class Gu{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new z(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Am,this.ssl=Hu}else this.host=e.host,this.ssl=e.ssl??Hu;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=am;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Cv)throw new z(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Im(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new z(U.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new z(U.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new z(U.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qi{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gu({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gu(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new rb;switch(n.type){case"firstParty":return new lb(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new z(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=$u.get(t);n&&(q("ComponentProvider","Removing Datastore"),$u.delete(t),n.terminate())}(this),Promise.resolve()}}function rw(s,e,t,n={}){s=$n(s,qi);const i=rs(e),a=s._getSettings(),l={...a,emulatorOptions:s._getEmulatorOptions()},c=`${e}:${t}`;i&&(wo(`https://${c}`),No("Firestore",!0)),a.host!==Am&&a.host!==c&&Xs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...a,host:c,ssl:i,emulatorOptions:n};if(!ys(d,l)&&(s._setSettings(d),n.mockUserToken)){let m,f;if(typeof n.mockUserToken=="string")m=n.mockUserToken,f=Ue.MOCK_USER;else{m=Td(n.mockUserToken,s._app?.options.projectId);const p=n.mockUserToken.sub||n.mockUserToken.user_id;if(!p)throw new z(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ue(p)}s._authCredentials=new ib(new yh(m,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new zi(this.firestore,e,this._query)}}class ke{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qt(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ke(this.firestore,e,this._key)}toJSON(){return{type:ke._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(ar(t,ke._jsonSchema))return new ke(e,n||null,new H(he.fromString(t.referencePath)))}}ke._jsonSchemaVersion="firestore/documentReference/1.0",ke._jsonSchema={type:we("string",ke._jsonSchemaVersion),referencePath:we("string")};class Qt extends zi{constructor(e,t,n){super(e,t,Lh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ke(this.firestore,null,new H(e))}withConverter(e){return new Qt(this.firestore,e,this._path)}}function Wu(s,e,...t){if(s=Pe(s),bh("collection","path",e),s instanceof qi){const n=he.fromString(e,...t);return au(n),new Qt(s,null,n)}{if(!(s instanceof ke||s instanceof Qt))throw new z(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=s._path.child(he.fromString(e,...t));return au(n),new Qt(s.firestore,null,n)}}function Sm(s,e,...t){if(s=Pe(s),arguments.length===1&&(e=Vo.newId()),bh("doc","path",e),s instanceof qi){const n=he.fromString(e,...t);return iu(n),new ke(s,null,new H(n))}{if(!(s instanceof ke||s instanceof Qt))throw new z(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=s._path.child(he.fromString(e,...t));return iu(n),new ke(s.firestore,s instanceof Qt?s.converter:null,new H(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ku="AsyncQueue";class Qu{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new um(this,"async_queue_retry"),this._c=()=>{const n=Sa();n&&q(Ku,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=Sa();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Sa();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Kt;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!an(e))throw e;q(Ku,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,kt("INTERNAL UNHANDLED ERROR: ",Xu(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=sl.createAndSchedule(this,e,t,n,a=>this.hc(a));return this.tc.push(i),i}uc(){this.nc&&K(47125,{Pc:Xu(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Xu(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class $i extends qi{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new Qu,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Qu(e),this._firestoreClient=void 0,await e}}}function iw(s,e){const t=typeof s=="object"?s:jo(),n=typeof s=="string"?s:oi,i=ji(t,"firestore").getImmediate({identifier:n});if(!i._initialized){const a=wd("firestore");a&&rw(i,...a)}return i}function Rm(s){if(s._terminated)throw new z(U.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||aw(s),s._firestoreClient}function aw(s){const e=s._freezeSettings(),t=function(i,a,l,c){return new Tb(i,a,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,Im(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new Z_(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this._byteString=e}static fromBase64String(e){try{return new st(De.fromBase64String(e))}catch(t){throw new z(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new st(De.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:st._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ar(e,st._jsonSchema))return st.fromBase64String(e.bytes)}}st._jsonSchemaVersion="firestore/bytes/1.0",st._jsonSchema={type:we("string",st._jsonSchemaVersion),bytes:we("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new z(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ce(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new z(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new z(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Z(this._lat,e._lat)||Z(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:xt._jsonSchemaVersion}}static fromJSON(e){if(ar(e,xt._jsonSchema))return new xt(e.latitude,e.longitude)}}xt._jsonSchemaVersion="firestore/geoPoint/1.0",xt._jsonSchema={type:we("string",xt._jsonSchemaVersion),latitude:we("number"),longitude:we("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:yt._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ar(e,yt._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new yt(e.vectorValues);throw new z(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yt._jsonSchemaVersion="firestore/vectorValue/1.0",yt._jsonSchema={type:we("string",yt._jsonSchemaVersion),vectorValues:we("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow=/^__.*__$/;class lw{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Ss(e,this.data,this.fieldMask,t,this.fieldTransforms):new or(e,this.data,t,this.fieldTransforms)}}function km(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K(40011,{Ac:s})}}class ll{constructor(e,t,n,i,a,l){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ll({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return xi(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(km(this.Ac)&&ow.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class cw{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Ui(e)}Cc(e,t,n,i=!1){return new ll({Ac:e,methodName:t,Dc:n,path:Ce.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function uw(s){const e=s._freezeSettings(),t=Ui(s._databaseId);return new cw(s._databaseId,!!e.ignoreUndefinedProperties,t)}function dw(s,e,t,n,i,a={}){const l=s.Cc(a.merge||a.mergeFields?2:0,e,t,i);Vm("Data must be an object, but it was:",l,n);const c=Dm(n,l);let d,m;if(a.merge)d=new at(l.fieldMask),m=l.fieldTransforms;else if(a.mergeFields){const f=[];for(const p of a.mergeFields){const x=hw(e,p,t);if(!l.contains(x))throw new z(U.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);fw(f,x)||f.push(x)}d=new at(f),m=l.fieldTransforms.filter(p=>d.covers(p.field))}else d=null,m=l.fieldTransforms;return new lw(new tt(c),d,m)}function Pm(s,e){if(Om(s=Pe(s)))return Vm("Unsupported field value:",e,s),Dm(s,e);if(s instanceof Cm)return function(n,i){if(!km(i.Ac))throw i.Sc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,i){const a=[];let l=0;for(const c of n){let d=Pm(c,i.wc(l));d==null&&(d={nullValue:"NULL_VALUE"}),a.push(d),l++}return{arrayValue:{values:a}}}(s,e)}return function(n,i){if((n=Pe(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Qb(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=me.fromDate(n);return{timestampValue:mi(i.serializer,a)}}if(n instanceof me){const a=new me(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:mi(i.serializer,a)}}if(n instanceof xt)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof st)return{bytesValue:Zh(i.serializer,n._byteString)};if(n instanceof ke){const a=i.databaseId,l=n.firestore._databaseId;if(!l.isEqual(a))throw i.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Wo(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof yt)return function(l,c){return{mapValue:{fields:{[Ah]:{stringValue:Sh},[li]:{arrayValue:{values:l.toArray().map(m=>{if(typeof m!="number")throw c.Sc("VectorValues must only contain numeric values.");return zo(c.serializer,m)})}}}}}}(n,i);throw i.Sc(`Unsupported field value: ${Lo(n)}`)}(s,e)}function Dm(s,e){const t={};return wh(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Is(s,(n,i)=>{const a=Pm(i,e.mc(n));a!=null&&(t[n]=a)}),{mapValue:{fields:t}}}function Om(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof me||s instanceof xt||s instanceof st||s instanceof ke||s instanceof Cm||s instanceof yt)}function Vm(s,e,t){if(!Om(t)||!vh(t)){const n=Lo(t);throw n==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+n)}}function hw(s,e,t){if((e=Pe(e))instanceof ol)return e._internalPath;if(typeof e=="string")return Lm(s,e);throw xi("Field path arguments must be of type string or ",s,!1,void 0,t)}const mw=new RegExp("[~\\*/\\[\\]]");function Lm(s,e,t){if(e.search(mw)>=0)throw xi(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new ol(...e.split("."))._internalPath}catch{throw xi(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function xi(s,e,t,n,i){const a=n&&!n.isEmpty(),l=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(a||l)&&(d+=" (found",a&&(d+=` in field ${n}`),l&&(d+=` in document ${i}`),d+=")"),new z(U.INVALID_ARGUMENT,c+s+d)}function fw(s,e){return s.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,t,n,i,a){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ke(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Um("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class pw extends Mm{data(){return super.data()}}function Um(s,e){return typeof e=="string"?Lm(s,e):e instanceof ol?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new z(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xw{convertValue(e,t="none"){switch(ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ve(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw K(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Is(e,(i,a)=>{n[i]=this.convertValue(a,t)}),n}convertVectorValue(e){const t=e.fields?.[li].arrayValue?.values?.map(n=>ve(n.doubleValue));return new yt(t)}convertGeoPoint(e){return new xt(ve(e.latitude),ve(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ki(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Gn(e));default:return null}}convertTimestamp(e){const t=Zt(e);return new me(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=he.fromString(e);oe(im(n),9688,{name:e});const i=new Wn(n.get(1),n.get(3)),a=new H(n.popFirst(5));return i.isEqual(t)||kt(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(s,e,t){let n;return n=s?s.toFirestore(e):e,n}class Vr{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gs extends Mm{constructor(e,t,n,i,a,l){super(e,t,n,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Qr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Um("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new z(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Gs._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Gs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Gs._jsonSchema={type:we("string",Gs._jsonSchemaVersion),bundleSource:we("string","DocumentSnapshot"),bundleName:we("string"),bundle:we("string")};class Qr extends Gs{data(e={}){return super.data(e)}}class Ws{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Vr(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Qr(this._firestore,this._userDataWriter,n.key,n,new Vr(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new z(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(c=>{const d=new Qr(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Vr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>a||c.type!==3).map(c=>{const d=new Qr(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Vr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let m=-1,f=-1;return c.type!==0&&(m=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),f=l.indexOf(c.doc.key)),{type:bw(c.type),doc:d,oldIndex:m,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new z(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ws._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Vo.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(t.push(a._document),n.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function bw(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K(61501,{type:s})}}Ws._jsonSchemaVersion="firestore/querySnapshot/1.0",Ws._jsonSchema={type:we("string",Ws._jsonSchemaVersion),bundleSource:we("string","QuerySnapshot"),bundleName:we("string"),bundle:we("string")};class vw extends xw{constructor(e){super(),this.firestore=e}convertBytes(e){return new st(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ke(this.firestore,null,t)}}function _w(s){s=$n(s,zi);const e=$n(s.firestore,$i),t=Rm(e),n=new vw(e);return gw(s._query),nw(t,s._query).then(i=>new Ws(e,n,s,i))}function ww(s){return Fm($n(s.firestore,$i),[new $o(s._key,pt.none())])}function Nw(s,e){const t=$n(s.firestore,$i),n=Sm(s),i=yw(s.converter,e);return Fm(t,[dw(uw(s.firestore),"addDoc",n._key,i,s.converter!==null,{}).toMutation(n._key,pt.exists(!1))]).then(()=>n)}function Fm(s,e){return function(n,i){const a=new Kt;return n.asyncQueue.enqueueAndForget(async()=>z_(await tw(n),i,a)),a.promise}(Rm(s),e)}(function(e,t=!0){(function(i){nn=i})(Ts),bs(new Jt("firestore",(n,{instanceIdentifier:i,options:a})=>{const l=n.getProvider("app").getImmediate(),c=new $i(new ab(n.getProvider("auth-internal")),new cb(l,n.getProvider("app-check-internal")),function(m,f){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new z(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wn(m.options.projectId,f)}(l,i),l);return a={useFetchStreams:t,...a},c._setSettings(a),c},"PUBLIC").setMultipleInstances(!0)),dt(tu,su,e),dt(tu,su,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="firebasestorage.googleapis.com",qm="storageBucket",Ew=2*60*1e3,Tw=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe extends _t{constructor(e,t,n=0){super(Ca(e),`Firebase Storage: ${t} (${Ca(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,xe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ca(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ge;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ge||(ge={}));function Ca(s){return"storage/"+s}function cl(){const s="An unknown error occurred, please check the error payload for server response.";return new xe(ge.UNKNOWN,s)}function jw(s){return new xe(ge.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function Iw(s){return new xe(ge.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Aw(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new xe(ge.UNAUTHENTICATED,s)}function Sw(){return new xe(ge.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Rw(s){return new xe(ge.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function Cw(){return new xe(ge.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function kw(){return new xe(ge.CANCELED,"User canceled the upload/download.")}function Pw(s){return new xe(ge.INVALID_URL,"Invalid URL '"+s+"'.")}function Dw(s){return new xe(ge.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function Ow(){return new xe(ge.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+qm+"' property when initializing the app?")}function Vw(){return new xe(ge.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Lw(){return new xe(ge.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Mw(s){return new xe(ge.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function yo(s){return new xe(ge.INVALID_ARGUMENT,s)}function zm(){return new xe(ge.APP_DELETED,"The Firebase app was deleted.")}function Uw(s){return new xe(ge.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function On(s,e){return new xe(ge.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function wn(s){throw new xe(ge.INTERNAL_ERROR,"Internal error: "+s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Ze.makeFromUrl(e,t)}catch{return new Ze(e,"")}if(n.path==="")return n;throw Dw(e)}static makeFromUrl(e,t){let n=null;const i="([A-Za-z0-9.\\-_]+)";function a(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+i+l,"i"),d={bucket:1,path:3};function m(O){O.path_=decodeURIComponent(O.path)}const f="v[A-Za-z0-9_]+",p=t.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",j=new RegExp(`^https?://${p}/${f}/b/${i}/o${x}`,"i"),k={bucket:1,path:3},R=t===Bm?"(?:storage.googleapis.com|storage.cloud.google.com)":t,w="([^?#]*)",A=new RegExp(`^https?://${R}/${i}/${w}`,"i"),I=[{regex:c,indices:d,postModify:a},{regex:j,indices:k,postModify:m},{regex:A,indices:{bucket:1,path:2},postModify:m}];for(let O=0;O<I.length;O++){const P=I[O],V=P.regex.exec(e);if(V){const v=V[P.indices.bucket];let b=V[P.indices.path];b||(b=""),n=new Ze(v,b),P.postModify(n);break}}if(n==null)throw Pw(e);return n}}class Fw{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(s,e,t){let n=1,i=null,a=null,l=!1,c=0;function d(){return c===2}let m=!1;function f(...w){m||(m=!0,e.apply(null,w))}function p(w){i=setTimeout(()=>{i=null,s(j,d())},w)}function x(){a&&clearTimeout(a)}function j(w,...A){if(m){x();return}if(w){x(),f.call(null,w,...A);return}if(d()||l){x(),f.call(null,w,...A);return}n<64&&(n*=2);let I;c===1?(c=2,I=0):I=(n+Math.random())*1e3,p(I)}let k=!1;function R(w){k||(k=!0,x(),!m&&(i!==null?(w||(c=2),clearTimeout(i),p(0)):w||(c=1)))}return p(0),a=setTimeout(()=>{l=!0,R(!0)},t),R}function qw(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(s){return s!==void 0}function $w(s){return typeof s=="object"&&!Array.isArray(s)}function ul(s){return typeof s=="string"||s instanceof String}function Ju(s){return dl()&&s instanceof Blob}function dl(){return typeof Blob<"u"}function Yu(s,e,t,n){if(n<e)throw yo(`Invalid value for '${s}'. Expected ${e} or greater.`);if(n>t)throw yo(`Invalid value for '${s}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(s,e,t){let n=e;return t==null&&(n=`https://${e}`),`${t}://${n}/v0${s}`}function $m(s){const e=encodeURIComponent;let t="?";for(const n in s)if(s.hasOwnProperty(n)){const i=e(n)+"="+e(s[n]);t=t+i+"&"}return t=t.slice(0,-1),t}var gs;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(gs||(gs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(s,e){const t=s>=500&&s<600,i=[408,429].indexOf(s)!==-1,a=e.indexOf(s)!==-1;return t||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e,t,n,i,a,l,c,d,m,f,p,x=!0,j=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=d,this.timeout_=m,this.progressCallback_=f,this.connectionFactory_=p,this.retry=x,this.isUsingEmulator=j,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,R)=>{this.resolve_=k,this.reject_=R,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new Lr(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const l=c=>{const d=c.loaded,m=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,m)};this.progressCallback_!==null&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const c=a.getErrorCode()===gs.NO_ERROR,d=a.getStatus();if(!c||Hw(d,this.additionalRetryCodes_)&&this.retry){const f=a.getErrorCode()===gs.ABORT;n(!1,new Lr(!1,null,f));return}const m=this.successCodes_.indexOf(d)!==-1;n(!0,new Lr(m,a))})},t=(n,i)=>{const a=this.resolve_,l=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());zw(d)?a(d):a()}catch(d){l(d)}else if(c!==null){const d=cl();d.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,d)):l(d)}else if(i.canceled){const d=this.appDelete_?zm():kw();l(d)}else{const d=Cw();l(d)}};this.canceled_?t(!1,new Lr(!1,null,!0)):this.backoffId_=Bw(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&qw(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Lr{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Ww(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function Kw(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Qw(s,e){e&&(s["X-Firebase-GMPID"]=e)}function Xw(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function Jw(s,e,t,n,i,a,l=!0,c=!1){const d=$m(s.urlParams),m=s.url+d,f=Object.assign({},s.headers);return Qw(f,e),Ww(f,t),Kw(f,a),Xw(f,n),new Gw(m,s.method,f,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,i,l,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Zw(...s){const e=Yw();if(e!==void 0){const t=new e;for(let n=0;n<s.length;n++)t.append(s[n]);return t.getBlob()}else{if(dl())return new Blob(s);throw new xe(ge.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function e1(s,e,t){return s.webkitSlice?s.webkitSlice(e,t):s.mozSlice?s.mozSlice(e,t):s.slice?s.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(s){if(typeof atob>"u")throw Mw("base-64");return atob(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ka{constructor(e,t){this.data=e,this.contentType=t||null}}function s1(s,e){switch(s){case ct.RAW:return new ka(Hm(e));case ct.BASE64:case ct.BASE64URL:return new ka(Gm(s,e));case ct.DATA_URL:return new ka(r1(e),i1(e))}throw cl()}function Hm(s){const e=[];for(let t=0;t<s.length;t++){let n=s.charCodeAt(t);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(t<s.length-1&&(s.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=n,l=s.charCodeAt(++t);n=65536|(a&1023)<<10|l&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function n1(s){let e;try{e=decodeURIComponent(s)}catch{throw On(ct.DATA_URL,"Malformed data URL.")}return Hm(e)}function Gm(s,e){switch(s){case ct.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw On(s,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ct.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw On(s,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=t1(e)}catch(i){throw i.message.includes("polyfill")?i:On(s,"Invalid character found")}const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}class Wm{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw On(ct.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;n!=null&&(this.base64=a1(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function r1(s){const e=new Wm(s);return e.base64?Gm(ct.BASE64,e.rest):n1(e.rest)}function i1(s){return new Wm(s).contentType}function a1(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,t){let n=0,i="";Ju(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Ju(this.data_)){const n=this.data_,i=e1(n,e,t);return i===null?null:new zt(i)}else{const n=new Uint8Array(this.data_.buffer,e,t-e);return new zt(n,!0)}}static getBlob(...e){if(dl()){const t=e.map(n=>n instanceof zt?n.data_:n);return new zt(Zw.apply(null,t))}else{const t=e.map(l=>ul(l)?s1(ct.RAW,l).data:l.data_);let n=0;t.forEach(l=>{n+=l.byteLength});const i=new Uint8Array(n);let a=0;return t.forEach(l=>{for(let c=0;c<l.length;c++)i[a++]=l[c]}),new zt(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(s){let e;try{e=JSON.parse(s)}catch{return null}return $w(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function l1(s,e){const t=e.split("/").filter(n=>n.length>0).join("/");return s.length===0?t:s+"/"+t}function Qm(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(s,e){return e}class He{constructor(e,t,n,i){this.server=e,this.local=t||e,this.writable=!!n,this.xform=i||c1}}let Mr=null;function u1(s){return!ul(s)||s.length<2?s:Qm(s)}function Xm(){if(Mr)return Mr;const s=[];s.push(new He("bucket")),s.push(new He("generation")),s.push(new He("metageneration")),s.push(new He("name","fullPath",!0));function e(a,l){return u1(l)}const t=new He("name");t.xform=e,s.push(t);function n(a,l){return l!==void 0?Number(l):l}const i=new He("size");return i.xform=n,s.push(i),s.push(new He("timeCreated")),s.push(new He("updated")),s.push(new He("md5Hash",null,!0)),s.push(new He("cacheControl",null,!0)),s.push(new He("contentDisposition",null,!0)),s.push(new He("contentEncoding",null,!0)),s.push(new He("contentLanguage",null,!0)),s.push(new He("contentType",null,!0)),s.push(new He("metadata","customMetadata",!0)),Mr=s,Mr}function d1(s,e){function t(){const n=s.bucket,i=s.fullPath,a=new Ze(n,i);return e._makeStorageReference(a)}Object.defineProperty(s,"ref",{get:t})}function h1(s,e,t){const n={};n.type="file";const i=t.length;for(let a=0;a<i;a++){const l=t[a];n[l.local]=l.xform(n,e[l.server])}return d1(n,s),n}function Jm(s,e,t){const n=Km(e);return n===null?null:h1(s,n,t)}function m1(s,e,t,n){const i=Km(e);if(i===null||!ul(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const l=encodeURIComponent;return a.split(",").map(m=>{const f=s.bucket,p=s.fullPath,x="/b/"+l(f)+"/o/"+l(p),j=hl(x,t,n),k=$m({alt:"media",token:m});return j+k})[0]}function f1(s,e){const t={},n=e.length;for(let i=0;i<n;i++){const a=e[i];a.writable&&(t[a.server]=s[a.local])}return JSON.stringify(t)}class Ym{constructor(e,t,n,i){this.url=e,this.method=t,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(s){if(!s)throw cl()}function p1(s,e){function t(n,i){const a=Jm(s,i,e);return Zm(a!==null),a}return t}function g1(s,e){function t(n,i){const a=Jm(s,i,e);return Zm(a!==null),m1(a,i,s.host,s._protocol)}return t}function ef(s){function e(t,n){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=Sw():i=Aw():t.getStatus()===402?i=Iw(s.bucket):t.getStatus()===403?i=Rw(s.path):i=n,i.status=t.getStatus(),i.serverResponse=n.serverResponse,i}return e}function x1(s){const e=ef(s);function t(n,i){let a=e(n,i);return n.getStatus()===404&&(a=jw(s.path)),a.serverResponse=i.serverResponse,a}return t}function y1(s,e,t){const n=e.fullServerUrl(),i=hl(n,s.host,s._protocol),a="GET",l=s.maxOperationRetryTime,c=new Ym(i,a,g1(s,t),l);return c.errorHandler=x1(e),c}function b1(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function v1(s,e,t){const n=Object.assign({},t);return n.fullPath=s.path,n.size=e.size(),n.contentType||(n.contentType=b1(null,e)),n}function _1(s,e,t,n,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let I="";for(let O=0;O<2;O++)I=I+Math.random().toString().slice(2);return I}const d=c();l["Content-Type"]="multipart/related; boundary="+d;const m=v1(e,n,i),f=f1(m,t),p="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+d+`\r
Content-Type: `+m.contentType+`\r
\r
`,x=`\r
--`+d+"--",j=zt.getBlob(p,n,x);if(j===null)throw Vw();const k={name:m.fullPath},R=hl(a,s.host,s._protocol),w="POST",A=s.maxUploadRetryTime,S=new Ym(R,w,p1(s,t),A);return S.urlParams=k,S.headers=l,S.body=j.uploadData(),S.errorHandler=ef(e),S}class w1{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=gs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=gs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=gs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,i,a){if(this.sent_)throw wn("cannot .send() more than once");if(rs(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),a!==void 0)for(const l in a)a.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,a[l].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw wn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw wn("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw wn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw wn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class N1 extends w1{initXhr(){this.xhr_.responseType="text"}}function tf(){return new N1}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,t){this._service=e,t instanceof Ze?this._location=t:this._location=Ze.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Es(e,t)}get root(){const e=new Ze(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Qm(this._location.path)}get storage(){return this._service}get parent(){const e=o1(this._location.path);if(e===null)return null;const t=new Ze(this._location.bucket,e);return new Es(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Uw(e)}}function E1(s,e,t){s._throwIfRoot("uploadBytes");const n=_1(s.storage,s._location,Xm(),new zt(e,!0),t);return s.storage.makeRequestWithTokens(n,tf).then(i=>({metadata:i,ref:s}))}function T1(s){s._throwIfRoot("getDownloadURL");const e=y1(s.storage,s._location,Xm());return s.storage.makeRequestWithTokens(e,tf).then(t=>{if(t===null)throw Lw();return t})}function j1(s,e){const t=l1(s._location.path,e),n=new Ze(s._location.bucket,t);return new Es(s.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(s){return/^[A-Za-z]+:\/\//.test(s)}function A1(s,e){return new Es(s,e)}function sf(s,e){if(s instanceof ml){const t=s;if(t._bucket==null)throw Ow();const n=new Es(t,t._bucket);return e!=null?sf(n,e):n}else return e!==void 0?j1(s,e):s}function S1(s,e){if(e&&I1(e)){if(s instanceof ml)return A1(s,e);throw yo("To use ref(service, url), the first argument must be a Storage instance.")}else return sf(s,e)}function Zu(s,e){const t=e?.[qm];return t==null?null:Ze.makeFromBucketSpec(t,s)}function R1(s,e,t,n={}){s.host=`${e}:${t}`;const i=rs(e);i&&(wo(`https://${s.host}/b`),No("Storage",!0)),s._isUsingEmulator=!0,s._protocol=i?"https":"http";const{mockUserToken:a}=n;a&&(s._overrideAuthToken=typeof a=="string"?a:Td(a,s.app.options.projectId))}class ml{constructor(e,t,n,i,a,l=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=l,this._bucket=null,this._host=Bm,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Ew,this._maxUploadRetryTime=Tw,this._requests=new Set,i!=null?this._bucket=Ze.makeFromBucketSpec(i,this._host):this._bucket=Zu(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ze.makeFromBucketSpec(this._url,e):this._bucket=Zu(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Yu("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Yu("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Ye(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Es(this,e)}_makeRequest(e,t,n,i,a=!0){if(this._deleted)return new Fw(zm());{const l=Jw(e,this._appId,n,i,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,i).getPromise()}}const ed="@firebase/storage",td="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf="storage";function rf(s,e,t){return s=Pe(s),E1(s,e,t)}function af(s){return s=Pe(s),T1(s)}function of(s,e){return s=Pe(s),S1(s,e)}function C1(s=jo(),e){s=Pe(s);const n=ji(s,nf).getImmediate({identifier:e}),i=wd("storage");return i&&k1(n,...i),n}function k1(s,e,t,n={}){R1(s,e,t,n)}function P1(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),n=s.getProvider("auth-internal"),i=s.getProvider("app-check-internal");return new ml(t,n,i,e,Ts)}function D1(){bs(new Jt(nf,P1,"PUBLIC").setMultipleInstances(!0)),dt(ed,td,""),dt(ed,td,"esm2020")}D1();const lf={apiKey:"AIzaSyCtpOMtw3GR5yZhokfVox8eP9Ldo5srLrE",authDomain:"mypictures-9dc8b.firebaseapp.com",projectId:"mypictures-9dc8b",storageBucket:"mypictures-9dc8b.firebasestorage.app",messagingSenderId:"722783244073",appId:"1:722783244073:web:e29da99ccd0602e2b3b138"},fl=Cc().length===0?Ad(lf):Cc()[0],Ur=sb(fl),Pa=iw(fl),pl=C1(fl);console.log("Firebase Storage configuré:",pl);console.log("Storage bucket:",lf.storageBucket);function O1({isOpen:s,onClose:e,onBoatAdded:t}){if(console.log("🔍 AddBoat render - isOpen:",s),!s)return console.log("🔍 AddBoat: Modal fermé, pas de rendu"),null;const[n,i]=D.useState({nom:"",type:"voilier",longueur:"",prix_jour:"",capacite:"",image:"",localisation:"",description:"",equipements:[]}),[a,l]=D.useState(null),[c,d]=D.useState(null),[m,f]=D.useState(!1),[p,x]=D.useState(""),[j,k]=D.useState(""),R=["Climatisation","Wifi","Cuisine équipée","Salle de bain","Pont solarium","GPS","Radio VHF","Gilets de sauvetage","Équipement de pêche","Panneaux solaires"],w=O=>{const{name:P,value:V,type:v,checked:b}=O.target;i(v==="checkbox"?b?_=>({..._,equipements:[..._.equipements,V]}):_=>({..._,equipements:_.equipements.filter(N=>N!==V)}):_=>({..._,[P]:V}))},A=O=>{const P=O.target.files[0];if(P){l(P);const V=new FileReader;V.onload=v=>{d(v.target.result)},V.readAsDataURL(P)}},S=async O=>{O.preventDefault(),f(!0),x("");try{let P="";if(a){console.log("🔄 Upload de l'image vers Firebase Storage...");const b=of(pl,`boats/${Date.now()}_${a.name}`),_=await rf(b,a);P=await af(_.ref),console.log("✅ Image uploadée:",P)}const V=localStorage.getItem("token");if(!V)throw new Error("Vous devez être connecté pour ajouter un bateau");console.log("🔄 Ajout du bateau dans MongoDB...");const v=await le(ae.BOATS,{method:"POST",headers:Fe(V),body:JSON.stringify({nom:n.nom,type:n.type,longueur:Number(n.longueur),prix_jour:Number(n.prix_jour),capacite:Number(n.capacite),image:P,destination:n.localisation,description:n.description,equipements:n.equipements})});console.log("✅ Bateau ajouté avec succès:",v),k("Bateau ajouté avec succès !"),i({nom:"",type:"voilier",longueur:"",prix_jour:"",capacite:"",image:"",localisation:"",description:"",equipements:[]}),l(null),d(null),t&&t(v.data||v),setTimeout(()=>{e(),k("")},2e3)}catch(P){console.error("❌ Erreur lors de l'ajout du bateau:",P),console.error("❌ Détails de l'erreur:",{message:P.message,stack:P.stack,formData:n}),x("Erreur lors de l'ajout du bateau: "+P.message)}finally{f(!1)}},I=()=>{i({nom:"",type:"voilier",longueur:"",prix_jour:"",capacite:"",image:"",localisation:"",description:"",equipements:[]}),l(null),d(null),x(""),k(""),e()};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[r.jsx(Et,{className:"h-6 w-6 text-blue-600"}),"Ajouter un bateau"]}),r.jsx("button",{onClick:I,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(It,{className:"h-6 w-6 text-gray-500"})})]}),r.jsxs("form",{onSubmit:S,className:"p-6 space-y-6",children:[p&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:p}),j&&r.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:j}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom du bateau *"}),r.jsx("input",{type:"text",name:"nom",value:n.nom,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Le Grand Bleu",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type *"}),r.jsxs("select",{name:"type",value:n.type,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[r.jsx("option",{value:"voilier",children:"Voilier"}),r.jsx("option",{value:"bateau à moteur",children:"Bateau à moteur"}),r.jsx("option",{value:"catamaran",children:"Catamaran"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[r.jsx(Et,{className:"h-4 w-4"}),"Longueur (m) *"]}),r.jsx("input",{type:"number",name:"longueur",value:n.longueur,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"12.5",min:"2",max:"100",step:"0.1",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[r.jsx(Et,{className:"h-4 w-4"}),"Prix/jour (€) *"]}),r.jsx("input",{type:"number",name:"prix_jour",value:n.prix_jour,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"150",min:"1",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[r.jsx(Et,{className:"h-4 w-4"}),"Capacité *"]}),r.jsx("input",{type:"number",name:"capacite",value:n.capacite,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"8",min:"1",max:"50",required:!0})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[r.jsx(fs,{className:"h-4 w-4"}),"Image *"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"file",accept:"image/*",onChange:A,className:"hidden",id:"image-upload"}),r.jsxs("div",{className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center gap-2",children:[r.jsx(fs,{className:"h-4 w-4"}),"Choisir une image"]})]}),a&&r.jsxs("span",{className:"text-sm text-green-600 flex items-center gap-1",children:[r.jsx(fs,{className:"h-4 w-4"}),a.name]})]}),c&&r.jsxs("div",{className:"mt-3",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Aperçu de l'image :"}),r.jsxs("div",{className:"relative inline-block",children:[r.jsx("img",{src:c,alt:"Aperçu",className:"w-32 h-32 object-cover rounded-lg border shadow-sm"}),r.jsx("button",{type:"button",onClick:()=>{l(null),d(null),i(O=>({...O,image:""}))},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600 transition-colors text-xs",title:"Supprimer l'image",children:"×"})]})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[r.jsx(Et,{className:"h-4 w-4"}),"Destination *"]}),r.jsxs("select",{name:"localisation",value:n.localisation,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[r.jsx("option",{value:"",children:"Choisir une destination"}),r.jsx("option",{value:"saint-malo",children:"Saint-Malo"}),r.jsx("option",{value:"les-glenan",children:"Les Glénan"}),r.jsx("option",{value:"crozon",children:"Crozon"}),r.jsx("option",{value:"la-rochelle",children:"La Rochelle"}),r.jsx("option",{value:"marseille",children:"Marseille"}),r.jsx("option",{value:"cannes",children:"Cannes"}),r.jsx("option",{value:"ajaccio",children:"Ajaccio"}),r.jsx("option",{value:"barcelone",children:"Barcelone"}),r.jsx("option",{value:"palma",children:"Palma de Majorque"}),r.jsx("option",{value:"athenes",children:"Athènes"}),r.jsx("option",{value:"venise",children:"Venise"}),r.jsx("option",{value:"amsterdam",children:"Amsterdam"}),r.jsx("option",{value:"split",children:"Split"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),r.jsx("textarea",{name:"description",value:n.description,onChange:w,rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Description détaillée du bateau..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Équipements disponibles"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:R.map(O=>r.jsxs("label",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",value:O,checked:n.equipements.includes(O),onChange:w,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),r.jsx("span",{className:"text-sm text-gray-700",children:O})]},O))})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:I,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),r.jsx("button",{type:"submit",disabled:m,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:m?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Ajout en cours..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Et,{className:"h-4 w-4"}),"Ajouter le bateau"]})})]})]})]})})}function V1({isOpen:s,onClose:e,onBoatUpdated:t,boatData:n}){const[i,a]=D.useState({nom:"",type:"voilier",longueur:"",prix_jour:"",capacite:"",image:"",destination:"",description:"",equipements:[]}),[l,c]=D.useState(null),[d,m]=D.useState(null),[f,p]=D.useState(!1),[x,j]=D.useState(!1),[k,R]=D.useState(""),[w,A]=D.useState(""),S=["Climatisation","Wifi","Cuisine équipée","Salle de bain","Pont solarium","GPS","Radio VHF","Gilets de sauvetage","Équipement de pêche","Panneaux solaires"];D.useEffect(()=>{n&&s&&(a({nom:n.nom||"",type:n.type||"voilier",longueur:n.longueur||"",prix_jour:n.prix_jour||"",capacite:n.capacite||"",image:n.image||"",destination:n.destination||"",description:n.description||"",equipements:n.equipements||[]}),n.image&&m(n.image),c(null),p(!1))},[n,s]);const I=v=>{const{name:b,value:_,type:N,checked:E}=v.target;a(N==="checkbox"?E?T=>({...T,equipements:[...T.equipements,_]}):T=>({...T,equipements:T.equipements.filter(y=>y!==_)}):T=>({...T,[b]:_}))},O=v=>{const b=v.target.files[0];if(b){c(b),p(!0);const _=new FileReader;_.onload=N=>{m(N.target.result)},_.readAsDataURL(b)}},P=async v=>{v.preventDefault(),j(!0),R(""),A("");try{if(!i.nom||!i.type||!i.longueur||!i.prix_jour||!i.capacite||!i.destination)throw new Error("Tous les champs obligatoires doivent être remplis");if(!i.destination)throw new Error("Veuillez sélectionner une destination");let b=i.image;if(f&&l){A("Upload de la nouvelle image en cours...");const E=of(pl,`boats/${Date.now()}_${l.name}`),T=await rf(E,l);b=await af(T.ref),A("Nouvelle image uploadée ! Modification du bateau...")}const _=localStorage.getItem("token");if(!_)throw new Error("Vous devez être connecté");console.log("🔄 Modification du bateau dans MongoDB...");const N=await le(ae.BOAT_DETAIL(n._id),{method:"PUT",headers:Fe(_),body:JSON.stringify({nom:i.nom,type:i.type,longueur:Number(i.longueur),prix_jour:Number(i.prix_jour),capacite:Number(i.capacite),image:b,destination:i.destination,description:i.description,equipements:i.equipements})});console.log("✅ Bateau modifié avec succès:",N),A("Bateau modifié avec succès !"),t&&t(N),setTimeout(()=>{e(),A("")},2e3)}catch(b){R(b.message)}finally{j(!1)}},V=()=>{c(null),m(null),p(!1),R(""),A(""),e()};return s?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[r.jsx(Ua,{className:"h-6 w-6 text-blue-600"}),"Modifier le bateau"]}),r.jsx("button",{onClick:V,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(It,{className:"h-6 w-6 text-gray-500"})})]}),r.jsxs("form",{onSubmit:P,className:"p-6 space-y-6",children:[k&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:k}),w&&r.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:w}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom du bateau *"}),r.jsx("input",{type:"text",name:"nom",value:i.nom,onChange:I,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Le Grand Bleu",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type *"}),r.jsxs("select",{name:"type",value:i.type,onChange:I,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[r.jsx("option",{value:"voilier",children:"Voilier"}),r.jsx("option",{value:"bateau à moteur",children:"Bateau à moteur"}),r.jsx("option",{value:"catamaran",children:"Catamaran"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[r.jsx(_i,{className:"h-4 w-4"}),"Longueur (m) *"]}),r.jsx("input",{type:"number",name:"longueur",value:i.longueur,onChange:I,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"12.5",min:"2",max:"100",step:"0.1",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[r.jsx(bo,{className:"h-4 w-4"}),"Prix/jour (€) *"]}),r.jsx("input",{type:"number",name:"prix_jour",value:i.prix_jour,onChange:I,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"150",min:"1",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[r.jsx(Xt,{className:"h-4 w-4"}),"Capacité *"]}),r.jsx("input",{type:"number",name:"capacite",value:i.capacite,onChange:I,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"8",min:"1",max:"50",required:!0})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[r.jsx(fs,{className:"h-4 w-4"}),"Image *"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"file",accept:"image/*",onChange:O,className:"hidden",id:"image-upload-edit"}),r.jsxs("div",{className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center gap-2",children:[r.jsx(fs,{className:"h-4 w-4"}),f?"Changer l'image":"Choisir une image"]})]}),l&&r.jsxs("span",{className:"text-sm text-green-600 flex items-center gap-1",children:[r.jsx(fs,{className:"h-4 w-4"}),l.name]})]}),d&&r.jsxs("div",{className:"mt-3",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:f?"Nouvelle image :":"Image actuelle :"}),r.jsxs("div",{className:"relative inline-block",children:[r.jsx("img",{src:d,alt:"Aperçu",className:"w-32 h-32 object-cover rounded-lg border shadow-sm"}),f&&r.jsx("button",{type:"button",onClick:()=>{c(null),p(!1),m(n.image||""),a(v=>({...v,image:n.image||""}))},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600 transition-colors text-xs",title:"Annuler le changement d'image",children:"×"})]})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[r.jsx(ut,{className:"h-4 w-4"}),"Destination *"]}),r.jsxs("select",{name:"destination",value:i.destination,onChange:I,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[r.jsx("option",{value:"",children:"Choisir une destination"}),r.jsx("option",{value:"saint-malo",children:"Saint-Malo"}),r.jsx("option",{value:"les-glenan",children:"Les Glénan"}),r.jsx("option",{value:"crozon",children:"Crozon"}),r.jsx("option",{value:"la-rochelle",children:"La Rochelle"}),r.jsx("option",{value:"marseille",children:"Marseille"}),r.jsx("option",{value:"cannes",children:"Cannes"}),r.jsx("option",{value:"ajaccio",children:"Ajaccio"}),r.jsx("option",{value:"barcelone",children:"Barcelone"}),r.jsx("option",{value:"palma",children:"Palma de Majorque"}),r.jsx("option",{value:"athenes",children:"Athènes"}),r.jsx("option",{value:"venise",children:"Venise"}),r.jsx("option",{value:"amsterdam",children:"Amsterdam"}),r.jsx("option",{value:"split",children:"Split"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),r.jsx("textarea",{name:"description",value:i.description,onChange:I,rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Description détaillée du bateau..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Équipements disponibles"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:S.map(v=>r.jsxs("label",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",value:v,checked:i.equipements.includes(v),onChange:I,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),r.jsx("span",{className:"text-sm text-gray-700",children:v})]},v))})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:V,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),r.jsx("button",{type:"submit",disabled:x,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:x?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Modification en cours..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Ua,{className:"h-4 w-4"}),"Modifier le bateau"]})})]})]})]})}):null}function L1(){const s=vi(),[e,t]=D.useState([]),[n,i]=D.useState(!1),[a,l]=D.useState(!1),[c,d]=D.useState(null),[m,f]=D.useState(!0),[p,x]=D.useState("");D.useEffect(()=>{if(!localStorage.getItem("token")){console.log("🔍 Pas de token, redirection vers la connexion"),s("/login");return}j()},[s]);const j=async()=>{try{f(!0),x("");const P=localStorage.getItem("token");if(!P){x("Vous devez être connecté"),s("/login");return}console.log("🔄 Récupération des bateaux depuis MongoDB...");const V=await le(ae.MY_BOATS,{headers:Fe(P)});console.log("✅ Bateaux récupérés:",V),t(V||[])}catch(P){console.error("❌ Erreur lors de la récupération des bateaux:",P),x("Erreur lors de la récupération des bateaux: "+P.message)}finally{f(!1)}},k=async P=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer ce bateau ?"))try{const V=localStorage.getItem("token");console.log("🔄 Suppression du bateau depuis MongoDB..."),await le(ae.BOAT_DETAIL(P),{method:"DELETE",headers:Fe(V)}),console.log("✅ Bateau supprimé avec succès"),t(e.filter(v=>v._id!==P))}catch(V){console.error("❌ Erreur lors de la suppression:",V),alert("Erreur lors de la suppression: "+V.message)}},R=P=>{d(P),l(!0)},w=()=>{console.log("🔍 handleAdd appelé, ouverture du modal"),i(!0),console.log("🔍 showModal mis à true:",!0)},A=P=>{console.log("🔍 handleBoatAdded appelé avec:",P),t([...e,P])},S=P=>{console.log("🔍 handleBoatUpdated appelé avec:",P),t(e.map(V=>V._id===P._id?P:V))},I=()=>{console.log("🔍 handleModalClose appelé, fermeture du modal"),i(!1)},O=()=>{l(!1),d(null)};return m?r.jsx("div",{className:"min-h-screen bg-gray-50 pt-24 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Chargement de vos bateaux..."})]})}):p?r.jsx("div",{className:"min-h-screen bg-gray-50 pt-24 flex items-center justify-center",children:r.jsxs("div",{className:"text-center max-w-md mx-auto",children:[r.jsx(Ge,{className:"h-16 w-16 text-red-400 mx-auto mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Erreur de chargement"}),r.jsx("p",{className:"text-gray-600 mb-6",children:p}),r.jsxs("div",{className:"space-x-3",children:[r.jsx("button",{onClick:j,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"🔄 Réessayer"}),r.jsx("button",{onClick:()=>s("/login"),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"🔑 Se connecter"})]})]})}):r.jsxs("div",{className:"min-h-screen bg-gray-50 pt-24 flex flex-col items-center",children:[r.jsxs("div",{className:"w-full max-w-6xl bg-white rounded-2xl shadow-xl p-8",children:[r.jsxs("div",{className:"flex justify-between items-center mb-8",children:[r.jsxs("h2",{className:"text-3xl font-bold text-blue-700 flex items-center gap-3",children:[r.jsx(Ge,{className:"h-8 w-8"}),"Gestion de mes bateaux"]}),r.jsxs("button",{onClick:w,className:"inline-flex items-center space-x-2 bg-orange-500 text-white px-6 py-3 rounded-full font-bold hover:bg-orange-600 transition-colors shadow-lg",children:[r.jsx(Fa,{className:"h-5 w-5"}),"Ajouter un bateau"]})]}),p&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:p}),e.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Ge,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-medium text-gray-600 mb-2",children:"Aucun bateau trouvé"}),r.jsx("p",{className:"text-gray-500",children:"Commencez par ajouter votre premier bateau !"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(P=>r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"h-48 bg-gray-200 rounded-t-xl flex items-center justify-center",children:[P.image?r.jsx("img",{src:P.image,alt:P.nom,className:"w-full h-full object-cover rounded-t-xl",onError:V=>{V.target.style.display="none",V.target.nextSibling.style.display="flex"}}):null,r.jsx("div",{className:"hidden items-center justify-center text-gray-400",children:r.jsx(Et,{className:"h-12 w-12"})})]}),r.jsxs("div",{className:"p-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:P.nom}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[r.jsx(Ge,{className:"h-4 w-4"}),r.jsx("span",{className:"capitalize",children:P.type})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[r.jsx(_i,{className:"h-4 w-4"}),r.jsxs("span",{children:[P.longueur,"m"]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[r.jsx(Xt,{className:"h-4 w-4"}),r.jsxs("span",{children:[P.capacite," personnes"]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[r.jsx(bo,{className:"h-4 w-4"}),r.jsxs("span",{children:[P.prix_jour,"€/jour"]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[r.jsx(ut,{className:"h-4 w-4"}),r.jsx("span",{children:P.localisation})]})]}),P.description&&r.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:P.description}),P.equipements&&P.equipements.length>0&&r.jsxs("div",{className:"mb-4",children:[r.jsx("p",{className:"text-xs font-medium text-gray-500 mb-2",children:"Équipements :"}),r.jsxs("div",{className:"flex flex-wrap gap-1",children:[P.equipements.slice(0,3).map((V,v)=>r.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:V},v)),P.equipements.length>3&&r.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:["+",P.equipements.length-3]})]})]}),r.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-100",children:[r.jsxs("button",{onClick:()=>R(P),className:"flex items-center gap-2 px-3 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[r.jsx(Ua,{className:"h-4 w-4"}),"Modifier"]}),r.jsxs("button",{onClick:()=>k(P._id),className:"flex items-center gap-2 px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[r.jsx(Yr,{className:"h-4 w-4"}),"Supprimer"]})]})]})]},P._id))})]}),r.jsx(O1,{isOpen:n,onClose:I,onBoatAdded:A}),r.jsx(V1,{isOpen:a,onClose:O,onBoatUpdated:S,boatData:c})]})}function M1(){const[s,e]=D.useState("overview"),[t,n]=D.useState([]),[i,a]=D.useState([]),[l,c]=D.useState(!0),[d,m]=D.useState(!1),[f,p]=D.useState(!1),[x,j]=D.useState(!1),[k,R]=D.useState(null),[w,A]=D.useState(null),[S,I]=D.useState({nom:"",prenom:"",email:"",tel:"",role:"client"}),[O,P]=D.useState({nom:"",prenom:"",email:"",tel:"",password:"",role:"client"}),[V,v]=D.useState({totalUsers:0,totalBoats:0,totalBookings:0,totalRevenue:0});D.useEffect(()=>{b()},[]);const b=async()=>{try{c(!0);const F=localStorage.getItem("token");if(!F){J.error("Token d'authentification manquant"),window.location.href="/connexion";return}console.log("🔄 Récupération des données du dashboard depuis MongoDB...");const ne=await le(ae.DASHBOARD,{headers:Fe(F)});let ye=[];try{console.log("🔄 Récupération des bateaux depuis MongoDB..."),ye=await le(ae.BOATS,{headers:Fe(F)})||[],console.log(`✅ ${ye.length} bateaux récupérés depuis MongoDB`)}catch(te){console.log("❌ Erreur API bateaux:",te.message)}let be=[];try{console.log("🔄 Récupération des réservations depuis MongoDB..."),be=(await le(ae.BOOKINGS,{headers:Fe(F)})).bookings||[],console.log(`✅ ${be.length} réservations récupérées depuis MongoDB`)}catch(te){console.log("❌ Erreur API réservations:",te.message)}const nt=ye.length,et=be.length,je=be.reduce((te,Ke)=>{if(Ke.prix_jour&&Ke.dateDebut&&Ke.dateFin){const Hi=new Date(Ke.dateDebut),Cs=new Date(Ke.dateFin),Gi=Math.ceil((Cs-Hi)/(1e3*60*60*24));return te+Ke.prix_jour*Gi}else if(Ke.prix_total)return te+Ke.prix_total;return te},0);ye.length===0?console.log("Aucun bateau trouvé dans la base de données"):console.log("Bateaux récupérés:",ye.map(te=>({nom:te.nom,type:te.type,prix:te.prix_jour}))),be.length===0&&console.log("Aucune réservation trouvée dans la base de données"),v({totalUsers:ne.stats.totalUsers,totalBoats:nt,totalBookings:et,totalRevenue:je}),n(ne.recentUsers.map(te=>({id:te._id,nom:te.nom,prenom:te.prenom,email:te.email,role:te.role,status:te.status||"actif",tel:te.tel||""}))),a(ye.map(te=>({id:te._id,nom:te.nom,type:te.type,longueur:te.longueur,capacite:te.capacite,prix:te.prix_jour,localisation:te.localisation,status:te.disponible?"disponible":"indisponible",image:te.image,createdAt:te.createdAt})))}catch(F){J.error("Erreur lors du chargement des données"),console.error(F)}finally{c(!1)}},_=()=>{localStorage.removeItem("token"),localStorage.removeItem("userNom"),localStorage.removeItem("userPrenom"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("userTel"),window.location.href="/connexion"},N=async F=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer cet utilisateur ?"))try{const ne=localStorage.getItem("token");if(!ne){J.error("Token d'authentification manquant"),window.location.href="/connexion";return}const ye=await le(`${ae.USERS}/${F}`,{method:"DELETE",headers:Fe(ne)});if(!ye.ok){const be=await ye.json();throw new Error(be.message||"Erreur lors de la suppression")}n(t.filter(be=>be.id!==F)),J.success("Utilisateur supprimé avec succès"),b()}catch(ne){J.error(ne.message||"Erreur lors de la suppression de l'utilisateur"),console.error(ne)}},E=F=>{A(F),p(!0)},T=F=>{R(F),I({nom:F.nom,prenom:F.prenom,email:F.email,tel:F.tel||"",role:F.role}),m(!0)},y=()=>{P({nom:"",prenom:"",email:"",tel:"",password:"",role:"client"}),j(!0)},ue=async F=>{F.preventDefault();try{const ne=localStorage.getItem("token");if(!ne){J.error("Token d'authentification manquant"),window.location.href="/connexion";return}const ye=await le(ae.REGISTER,{method:"POST",headers:Fe(ne),body:JSON.stringify(O)});if(!ye.ok){const et=await ye.json();throw new Error(et.message||"Erreur lors de la création")}const be=await ye.json(),nt={id:be.user.id,nom:be.user.nom,prenom:be.user.prenom,email:be.user.email,tel:be.user.tel,role:be.user.role,status:"active"};n([nt,...t]),J.success("Utilisateur créé avec succès"),j(!1),b()}catch(ne){J.error(ne.message||"Erreur lors de la création de l'utilisateur"),console.error(ne)}},Ne=async F=>{F.preventDefault();try{const ne=localStorage.getItem("token");if(!ne){J.error("Token d'authentification manquant"),window.location.href="/connexion";return}const ye=await le(`${ae.USERS}/${k.id}`,{method:"PUT",headers:Fe(ne),body:JSON.stringify(S)});if(!ye.ok){const nt=await ye.json();throw new Error(nt.message||"Erreur lors de la modification")}const be=await ye.json();n(t.map(nt=>nt.id===k.id?{...nt,...be.user}:nt)),J.success("Utilisateur modifié avec succès"),m(!1),R(null),b()}catch(ne){J.error(ne.message||"Erreur lors de la modification de l'utilisateur"),console.error(ne)}},Dt=F=>{window.confirm("Êtes-vous sûr de vouloir supprimer ce bateau ?")&&(a(i.filter(ne=>ne.id!==F)),J.success("Bateau supprimé avec succès"))};return l?r.jsx("div",{className:"min-h-screen bg-gray-50 pt-20 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Chargement du tableau de bord..."})]})}):r.jsxs("div",{className:"min-h-screen bg-gray-50 pt-20",children:[r.jsx(_o,{}),r.jsx("div",{className:"bg-white shadow-sm border-b",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center py-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Tableau de Bord Admin"}),r.jsx("p",{className:"text-gray-600",children:"Gestion de la plateforme SailingLoc"})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsxs("button",{onClick:b,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",title:"Rafraîchir les données",children:[r.jsx(ya,{className:"h-5 w-5 mr-2"}),"Actualiser"]}),r.jsxs("button",{onClick:_,className:"flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[r.jsx(op,{className:"h-5 w-5 mr-2"}),"Déconnexion"]})]})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:r.jsx(Xt,{className:"h-8 w-8 text-blue-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Utilisateurs"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:V.totalUsers})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:r.jsx(Da,{className:"h-8 w-8 text-green-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Bateaux"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:V.totalBoats})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:r.jsx(ya,{className:"h-8 w-8 text-purple-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Réservations"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:V.totalBookings})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:r.jsx(ya,{className:"h-8 w-8 text-yellow-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Revenus"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[V.totalRevenue,"€"]})]})]})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border mb-8",children:[r.jsx("div",{className:"border-b border-gray-200",children:r.jsxs("nav",{className:"flex space-x-8 px-6",children:[r.jsx("button",{onClick:()=>e("overview"),className:`py-4 px-1 border-b-2 font-medium text-sm ${s==="overview"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Vue d'ensemble"}),r.jsx("button",{onClick:()=>e("users"),className:`py-4 px-1 border-b-2 font-medium text-sm ${s==="users"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Utilisateurs"}),r.jsx("button",{onClick:()=>e("boats"),className:`py-4 px-1 border-b-2 font-medium text-sm ${s==="boats"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Bateaux"})]})}),r.jsxs("div",{className:"p-6",children:[s==="overview"&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Activité récente"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Utilisateurs récents"}),r.jsx("div",{className:"space-y-2",children:t.slice(0,3).map(F=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"text-sm text-gray-600",children:[F.prenom," ",F.nom," (",F.role,")"]}),r.jsx("span",{className:"text-xs text-gray-400",children:F.email})]},F.id))})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Bateaux disponibles"}),r.jsx("div",{className:"space-y-2",children:i.slice(0,3).map(F=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:F.nom}),r.jsxs("span",{className:"text-xs text-gray-400",children:[F.prix,"€/jour - ",F.type]})]},F.id))})]})]})]}),s==="users"&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Gestion des utilisateurs"}),r.jsxs("button",{onClick:y,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(Fa,{className:"h-4 w-4 mr-2"}),"Ajouter un utilisateur"]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Utilisateur"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rôle"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(F=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[F.prenom," ",F.nom]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-900",children:F.email})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${F.role==="admin"?"bg-red-100 text-red-800":F.role==="proprietaire"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:F.role})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${F.status==="actif"?"bg-green-100 text-green-800":F.status==="inactif"?"bg-red-100 text-red-800":F.status==="suspendu"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:F.status})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>E(F),className:"text-blue-600 hover:text-blue-900",title:"Voir les détails",children:r.jsx(Ks,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>T(F),className:"text-indigo-600 hover:text-indigo-900",title:"Modifier",children:r.jsx(_c,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>N(F.id),className:"text-red-600 hover:text-red-900",title:"Supprimer",children:r.jsx(Yr,{className:"h-4 w-4"})})]})})]},F.id))})]})})]}),s==="boats"&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Gestion des bateaux"}),r.jsxs("button",{className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(Fa,{className:"h-4 w-4 mr-2"}),"Ajouter un bateau"]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bateau"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Longueur"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Capacité"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prix/jour"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(F=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm font-medium text-gray-900",children:F.nom})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-900 capitalize",children:F.type})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"text-sm text-gray-900",children:[F.longueur,"m"]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"text-sm text-gray-900",children:[F.capacite," pers."]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"text-sm text-gray-900",children:[F.prix,"€"]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${F.status==="disponible"?"bg-green-100 text-green-800":F.status==="loué"?"bg-blue-100 text-blue-800":F.status==="maintenance"?"bg-yellow-100 text-yellow-800":F.status==="réservé"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:F.status})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:r.jsx(Ks,{className:"h-4 w-4"})}),r.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:r.jsx(_c,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>Dt(F.id),className:"text-red-600 hover:text-red-900",children:r.jsx(Yr,{className:"h-4 w-4"})})]})})]},F.id))})]})})]})]})]})]}),d&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full mx-4",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Modifier l'utilisateur"}),r.jsx("button",{onClick:()=>{m(!1),R(null)},className:"text-gray-400 hover:text-gray-600",children:r.jsx(It,{className:"h-6 w-6"})})]}),r.jsxs("form",{onSubmit:Ne,className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prénom"}),r.jsx("input",{type:"text",value:S.prenom,onChange:F=>I({...S,prenom:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom"}),r.jsx("input",{type:"text",value:S.nom,onChange:F=>I({...S,nom:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),r.jsx("input",{type:"email",value:S.email,onChange:F=>I({...S,email:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Téléphone"}),r.jsx("input",{type:"tel",value:S.tel,onChange:F=>I({...S,tel:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0123456789"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rôle"}),r.jsxs("select",{value:S.role,onChange:F=>I({...S,role:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"client",children:"Client"}),r.jsx("option",{value:"proprietaire",children:"Propriétaire"}),r.jsx("option",{value:"admin",children:"Admin"})]})]}),r.jsxs("div",{className:"flex space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>{m(!1),R(null)},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),r.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Modifier"})]})]})]})}),f&&w&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full mx-4",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Détails de l'utilisateur"}),r.jsx("button",{onClick:()=>{p(!1),A(null)},className:"text-gray-400 hover:text-gray-600",children:r.jsx(It,{className:"h-6 w-6"})})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[r.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:[w.prenom.charAt(0),w.nom.charAt(0)]})}),r.jsxs("div",{children:[r.jsxs("h4",{className:"text-xl font-semibold text-gray-900",children:[w.prenom," ",w.nom]}),r.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${w.role==="admin"?"bg-red-100 text-red-800":w.role==="proprietaire"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:w.role})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[r.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Prénom"}),r.jsx("span",{className:"text-sm text-gray-900",children:w.prenom})]}),r.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[r.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Nom"}),r.jsx("span",{className:"text-sm text-gray-900",children:w.nom})]}),r.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[r.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Email"}),r.jsx("span",{className:"text-sm text-gray-900",children:w.email})]}),r.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[r.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Téléphone"}),r.jsx("span",{className:"text-sm text-gray-900",children:w.tel||"Non renseigné"})]}),r.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[r.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Statut"}),r.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:w.status||"Actif"})]})]}),r.jsxs("div",{className:"flex space-x-3 pt-6",children:[r.jsx("button",{onClick:()=>{p(!1),A(null),T(w)},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Modifier"}),r.jsx("button",{onClick:()=>{p(!1),A(null)},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Fermer"})]})]})]})}),x&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full mx-4",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Ajouter un utilisateur"}),r.jsx("button",{onClick:()=>{j(!1)},className:"text-gray-400 hover:text-gray-600",children:r.jsx(It,{className:"h-6 w-6"})})]}),r.jsxs("form",{onSubmit:ue,className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prénom *"}),r.jsx("input",{type:"text",value:O.prenom,onChange:F=>P({...O,prenom:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom *"}),r.jsx("input",{type:"text",value:O.nom,onChange:F=>P({...O,nom:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),r.jsx("input",{type:"email",value:O.email,onChange:F=>P({...O,email:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mot de passe *"}),r.jsx("input",{type:"password",value:O.password,onChange:F=>P({...O,password:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,minLength:"6"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Téléphone *"}),r.jsx("input",{type:"tel",value:O.tel,onChange:F=>P({...O,tel:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0123456789",pattern:"[0-9]{10}",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rôle *"}),r.jsxs("select",{value:O.role,onChange:F=>P({...O,role:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[r.jsx("option",{value:"client",children:"Client"}),r.jsx("option",{value:"proprietaire",children:"Propriétaire"}),r.jsx("option",{value:"admin",children:"Admin"})]})]}),r.jsxs("div",{className:"flex space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>{j(!1)},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),r.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Créer"})]})]})]})})]})}function U1(){return r.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[r.jsx(Jn,{}),r.jsx("main",{className:"flex-1 flex flex-col items-center justify-center pt-24 pb-12",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-4xl",children:[r.jsxs("header",{className:"text-center mb-12",children:[r.jsx("h1",{className:"text-4xl font-bold text-blue-700 mb-4",children:"Politique de confidentialité"}),r.jsx("p",{className:"text-gray-600 text-lg",children:"Dernière mise à jour : 01/01/2025"})]}),r.jsxs("section",{className:"mb-10",children:[r.jsxs("h2",{className:"text-2xl font-bold mb-6 text-blue-700 flex items-center",children:[r.jsx(cd,{className:"h-7 w-7 mr-3"}),"1. Introduction"]}),r.jsx("p",{className:"text-gray-700 leading-relaxed text-lg",children:"La présente politique de confidentialité a pour but d'expliquer comment SailingLoc collecte, utilise, protège et partage les données personnelles de ses utilisateurs conformément au Règlement Général sur la Protection des Données (RGPD)."})]}),r.jsxs("section",{className:"mb-10",children:[r.jsxs("h2",{className:"text-2xl font-bold mb-6 text-blue-700 flex items-center",children:[r.jsx(Ks,{className:"h-7 w-7 mr-3"}),"2. Données collectées"]}),r.jsx("p",{className:"text-gray-700 mb-4 text-lg",children:"Lors de l'utilisation de la plateforme SailingLoc, nous pouvons collecter les données suivantes :"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:[r.jsx("li",{children:"Nom, prénom"}),r.jsx("li",{children:"Adresse e-mail"}),r.jsx("li",{children:"Numéro de téléphone"}),r.jsx("li",{children:"Adresse IP et données de navigation"})]}),r.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:[r.jsx("li",{children:"Données de géolocalisation (si autorisées)"}),r.jsx("li",{children:"Informations de paiement (via Stripe ou PayPal)"}),r.jsx("li",{children:"Historique des réservations"}),r.jsx("li",{children:"Préférences de navigation"})]})]})]}),r.jsxs("section",{className:"mb-10",children:[r.jsx("h2",{className:"text-2xl font-bold mb-6 text-blue-700",children:"3. Finalités de la collecte"}),r.jsx("p",{className:"text-gray-700 mb-4 text-lg",children:"Les données collectées ont pour objectif :"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:[r.jsx("li",{children:"La création et la gestion du compte utilisateur"}),r.jsx("li",{children:"La mise en relation entre propriétaires et locataires"}),r.jsx("li",{children:"Le traitement des paiements"}),r.jsx("li",{children:"La gestion des réservations"})]}),r.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:[r.jsx("li",{children:"Le service client"}),r.jsx("li",{children:"L'envoi de notifications ou emails (rappels, suggestions, sécurité)"}),r.jsx("li",{children:"L'amélioration continue de nos services"}),r.jsx("li",{children:"La personnalisation de l'expérience utilisateur"})]})]})]}),r.jsxs("section",{className:"mb-10",children:[r.jsx("h2",{className:"text-2xl font-bold mb-6 text-blue-700",children:"4. Consentement"}),r.jsx("p",{className:"text-gray-700 mb-4 text-lg",children:"Le consentement est obtenu explicitement via :"}),r.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:[r.jsx("li",{children:"Case à cocher lors de la création de compte"}),r.jsx("li",{children:"Bandeau cookie au premier accès au site"}),r.jsx("li",{children:"Formulaires spécifiques pour la newsletter ou contact"}),r.jsx("li",{children:"Paramètres de confidentialité dans le profil utilisateur"})]})]}),r.jsxs("section",{className:"mb-10",children:[r.jsx("h2",{className:"text-2xl font-bold mb-6 text-blue-700",children:"5. Cookies"}),r.jsx("p",{className:"text-gray-700 mb-4 text-lg",children:"Le site utilise des cookies pour :"}),r.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:[r.jsx("li",{children:"Analyser la fréquentation (Google Analytics)"}),r.jsx("li",{children:"Optimiser les performances du site"}),r.jsx("li",{children:"Mémoriser vos préférences de navigation"}),r.jsx("li",{children:"Assurer la sécurité de votre session"})]}),r.jsx("p",{className:"text-gray-700 mt-4 text-lg",children:"Vous pouvez configurer les cookies à tout moment via notre bandeau de gestion (outil : Axeptio, Cookiebot...)"})]}),r.jsxs("section",{className:"mb-10",children:[r.jsx("h2",{className:"text-2xl font-bold mb-6 text-blue-700",children:"6. Durée de conservation"}),r.jsx("p",{className:"text-gray-700 leading-relaxed text-lg",children:"Les données sont conservées pour une durée maximale de 3 ans après la dernière interaction. Les données liées aux paiements sont conservées selon les obligations fiscales et légales."})]}),r.jsxs("section",{className:"mb-10",children:[r.jsx("h2",{className:"text-2xl font-bold mb-6 text-blue-700",children:"7. Vos droits"}),r.jsx("p",{className:"text-gray-700 mb-4 text-lg",children:"Conformément au RGPD, vous disposez des droits suivants :"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:[r.jsx("li",{children:"Droit d'accès à vos données"}),r.jsx("li",{children:"Droit de rectification"}),r.jsx("li",{children:`Droit à l'effacement ("droit à l'oubli")`}),r.jsx("li",{children:"Droit à la portabilité"})]}),r.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:[r.jsx("li",{children:"Droit d'opposition et de retrait du consentement"}),r.jsx("li",{children:"Droit à la limitation du traitement"}),r.jsx("li",{children:"Droit de réclamation auprès de la CNIL"}),r.jsx("li",{children:"Droit à la notification des violations"})]})]}),r.jsxs("p",{className:"text-gray-700 mt-4 text-lg",children:["Pour exercer vos droits, envoyez un e-mail à : ",r.jsx("a",{href:"mailto:sailinglocequipe@gmail.com",className:"text-orange-500 underline hover:text-orange-600 transition-colors",children:"sailinglocequipe@gmail.com"})]})]}),r.jsxs("section",{className:"mb-10",children:[r.jsxs("h2",{className:"text-2xl font-bold mb-6 text-blue-700 flex items-center",children:[r.jsx(Ma,{className:"h-7 w-7 mr-3"}),"8. Sécurité des données"]}),r.jsx("p",{className:"text-gray-700 mb-4 text-lg",children:"SailingLoc utilise les technologies suivantes pour assurer la sécurité des données :"}),r.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:[r.jsx("li",{children:"Hachage des mots de passe via bcryptjs"}),r.jsx("li",{children:"Token d'authentification sécurisés (JWT)"}),r.jsx("li",{children:"Certificat SSL (HTTPS)"}),r.jsx("li",{children:"Accès limité au personnel autorisé"}),r.jsx("li",{children:"Chiffrement des données sensibles"}),r.jsx("li",{children:"Audit de sécurité régulier"})]})]}),r.jsxs("section",{className:"mb-10",children:[r.jsxs("h2",{className:"text-2xl font-bold mb-6 text-blue-700 flex items-center",children:[r.jsx(od,{className:"h-7 w-7 mr-3"}),"9. Hébergement"]}),r.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-4",children:"Vercel Inc."}),r.jsxs("div",{className:"text-sm text-gray-700 space-y-2",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Adresse :"})," 340 S Lemon Ave #4133, Walnut, CA 91789, États-Unis"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Site web :"})," ",r.jsx("a",{href:"https://vercel.com",target:"_blank",rel:"noopener noreferrer",className:"text-orange-500 underline hover:text-orange-600 transition-colors",children:"vercel.com"})]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Conformité :"})," RGPD, SOC 2 Type II, ISO 27001"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Sécurité :"})," Infrastructure cloud sécurisée avec chiffrement des données en transit et au repos"]})]})]}),r.jsxs("section",{className:"mb-10",children:[r.jsxs("h2",{className:"text-2xl font-bold mb-6 text-blue-700 flex items-center",children:[r.jsx(Oa,{className:"h-7 w-7 mr-3"}),"10. Développement et maintenance"]}),r.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-4",children:"Agence Pandawan"}),r.jsxs("div",{className:"text-sm text-gray-700 space-y-2",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Dénomination sociale :"})," Pandawan"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Date de création :"})," 14/03/2014"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Siège social :"})," 25 Rue du Faubourg Saint-Antoine, 75011 Paris"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Statut juridique :"})," SAS"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Expertise :"})," Développement web, IA, UX design, référencement"]})]}),r.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:r.jsxs("p",{className:"text-gray-700 text-sm leading-relaxed",children:[r.jsx("strong",{children:"Présentation :"})," Pandawan est une agence digitale internationale spécialisée dans la création de contenus digitaux de haute qualité, valorisant l'identité de ses clients à travers l'innovation et la créativité."]})})]}),r.jsxs("section",{className:"mb-10",children:[r.jsx("h2",{className:"text-2xl font-bold mb-6 text-blue-700",children:"11. Modifications"}),r.jsx("p",{className:"text-gray-700 leading-relaxed text-lg",children:"Cette politique peut être modifiée à tout moment. Les utilisateurs seront informés des changements par notification sur le site ou par e-mail."})]}),r.jsxs("section",{className:"mb-10",children:[r.jsxs("h2",{className:"text-2xl font-bold mb-6 text-blue-700 flex items-center",children:[r.jsx(Qs,{className:"h-7 w-7 mr-3"}),"12. Contact"]}),r.jsxs("p",{className:"text-gray-700 leading-relaxed text-lg",children:["Pour toute question concernant cette politique de confidentialité ou pour exercer vos droits, contactez-nous à : ",r.jsx("a",{href:"mailto:sailinglocequipe@gmail.com",className:"text-orange-500 underline hover:text-orange-600 transition-colors",children:"sailinglocequipe@gmail.com"})]}),r.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:r.jsxs("p",{className:"text-gray-600 text-sm",children:[r.jsx("strong",{children:"Note :"})," Cette politique est conforme au RGPD et aux dernières recommandations de la CNIL. Pour plus d'informations sur vos droits, consultez le site de la ",r.jsx("a",{href:"https://www.cnil.fr",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline hover:text-blue-700 transition-colors",children:"CNIL"}),"."]})})]})]})})]})}var cf={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},sd=re.createContext&&re.createContext(cf),F1=["attr","size","title"];function B1(s,e){if(s==null)return{};var t=q1(s,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(s,n)&&(t[n]=s[n])}return t}function q1(s,e){if(s==null)return{};var t={};for(var n in s)if(Object.prototype.hasOwnProperty.call(s,n)){if(e.indexOf(n)>=0)continue;t[n]=s[n]}return t}function yi(){return yi=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},yi.apply(this,arguments)}function nd(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),t.push.apply(t,n)}return t}function bi(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?nd(Object(t),!0).forEach(function(n){z1(s,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):nd(Object(t)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(t,n))})}return s}function z1(s,e,t){return e=$1(e),e in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function $1(s){var e=H1(s,"string");return typeof e=="symbol"?e:e+""}function H1(s,e){if(typeof s!="object"||!s)return s;var t=s[Symbol.toPrimitive];if(t!==void 0){var n=t.call(s,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}function uf(s){return s&&s.map((e,t)=>re.createElement(e.tag,bi({key:t},e.attr),uf(e.child)))}function df(s){return e=>re.createElement(G1,yi({attr:bi({},s.attr)},e),uf(s.child))}function G1(s){var e=t=>{var{attr:n,size:i,title:a}=s,l=B1(s,F1),c=i||t.size||"1em",d;return t.className&&(d=t.className),s.className&&(d=(d?d+" ":"")+s.className),re.createElement("svg",yi({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,l,{className:d,style:bi(bi({color:s.color||t.color},t.style),s.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),a&&re.createElement("title",null,a),s.children)};return sd!==void 0?re.createElement(sd.Consumer,null,t=>e(t)):e(cf)}function W1(s){return df({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(s)}function K1(s){return df({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(s)}function Q1(){const[s,e]=D.useState({nom:localStorage.getItem("userNom")||"",prenom:localStorage.getItem("userPrenom")||"",email:localStorage.getItem("userEmail")||"",telephone:localStorage.getItem("userTel")||"",password:""}),[t,n]=D.useState(""),[i,a]=D.useState(!1),l=d=>{e({...s,[d.target.name]:d.target.value})},c=async d=>{d.preventDefault(),n("");try{const m=localStorage.getItem("userId"),f=await fetch("sailingloc-back-lilac.vercel.app/api/user/update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:m,nom:s.nom,prenom:s.prenom,email:s.email,telephone:s.telephone,password:s.password})}),p=await f.json();if(!f.ok)throw new Error(p.message||"Erreur lors de la mise à jour");localStorage.setItem("userNom",p.user.nom),localStorage.setItem("userPrenom",p.user.prenom),localStorage.setItem("userEmail",p.user.email),localStorage.setItem("userTel",p.user.tel),J.success(r.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[r.jsx("span",{style:{fontSize:22,marginRight:10},children:"✅"}),r.jsx("div",{children:r.jsx("strong",{style:{color:"#16a34a"},children:"Profil mis à jour avec succès !"})})]}),{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light",style:{background:"#e6f9ec",color:"#16a34a",fontWeight:500,fontSize:18,border:"2px solid #16a34a"},icon:!1}),n("")}catch(m){n(m.message)}};return r.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[r.jsx(Jn,{}),r.jsx(_o,{}),r.jsx("main",{className:"flex-1 flex flex-col items-center justify-center pt-24 pb-12",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[r.jsx("h2",{className:"text-3xl font-bold text-blue-700 mb-6 text-center",children:"Mon profil"}),r.jsxs("form",{onSubmit:c,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Nom"}),r.jsx("input",{type:"text",name:"nom",value:s.nom,onChange:l,className:"w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 border-gray-200",placeholder:"Votre nom"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Prénom"}),r.jsx("input",{type:"text",name:"prenom",value:s.prenom,onChange:l,className:"w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 border-gray-200",placeholder:"Votre prénom"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Email"}),r.jsx("input",{type:"email",name:"email",value:s.email,onChange:l,className:"w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 border-gray-200",placeholder:"Votre email"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Téléphone"}),r.jsx("input",{type:"tel",name:"telephone",value:s.telephone,onChange:l,className:"w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 border-gray-200",placeholder:"Votre téléphone"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Mot de passe"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:i?"text":"password",name:"password",value:s.password,onChange:l,className:"w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 border-gray-200 pr-12",placeholder:"Nouveau mot de passe (laisser vide pour ne pas changer)"}),r.jsx("span",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 cursor-pointer text-gray-500",onClick:()=>a(d=>!d),tabIndex:0,role:"button","aria-label":i?"Masquer le mot de passe":"Afficher le mot de passe",children:i?r.jsx(W1,{size:22}):r.jsx(K1,{size:22})})]})]}),r.jsx("button",{type:"submit",className:"w-full py-3 px-6 rounded-full font-bold text-lg bg-orange-500 text-white hover:bg-orange-600 transition-colors shadow-lg",children:"Enregistrer"}),t&&r.jsx("div",{className:"text-green-600 text-center mt-2",children:t})]})]})})]})}function X1(){return r.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[r.jsx(Jn,{}),r.jsx("main",{className:"flex-1 flex flex-col items-center justify-center pt-24 pb-12",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-2xl",children:[r.jsx("h2",{className:"text-3xl font-bold text-blue-700 mb-6 text-center",children:"Conditions Générales d’Utilisation (CGU) et de Vente (CGV)"}),r.jsx("p",{className:"mb-4 text-gray-700 text-center",children:"Dernière mise à jour : 01/04/2025"}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h3",{className:"text-xl font-bold mb-2 text-blue-700",children:"1. Présentation de la plateforme"}),r.jsx("p",{className:"text-gray-700",children:"SailingLoc est une plateforme de mise en relation entre propriétaires de bateaux et particuliers souhaitant louer un voilier ou bateau à moteur en Europe. La société est basée à La Rochelle, sous le statut SAS (RCS La Rochelle B 923 456 789)."})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h3",{className:"text-xl font-bold mb-2 text-blue-700",children:"2. Acceptation des CGU/CGV"}),r.jsx("p",{className:"text-gray-700",children:"En accédant ou en utilisant le site SailingLoc, tout utilisateur reconnaît avoir lu, compris et accepté les présentes CGU/CGV sans réserve."})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h3",{className:"text-xl font-bold mb-2 text-blue-700",children:"3. Obligations des parties"}),r.jsxs("ul",{className:"list-disc pl-6 text-gray-700 mb-2",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Propriétaires :"})," doivent fournir des informations exactes sur leur bateau (entretien, assurance, équipements)."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Locataires :"})," s’engagent à utiliser les bateaux de manière responsable et à respecter les conditions de location."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"SailingLoc :"})," s’assure de la conformité juridique des contrats et du respect du RGPD."]})]})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h3",{className:"text-xl font-bold mb-2 text-blue-700",children:"4. Réservation et Paiement"}),r.jsx("p",{className:"text-gray-700",children:"Les réservations sont effectuées directement via la plateforme, avec paiement sécurisé via Stripe ou PayPal. Des frais de service peuvent s’appliquer."})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h3",{className:"text-xl font-bold mb-2 text-blue-700",children:"5. Droit de rétractation et annulation"}),r.jsx("p",{className:"text-gray-700",children:"Les conditions d’annulation sont définies dans chaque annonce. SailingLoc permet l’annulation selon les délais spécifiés par le propriétaire."})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h3",{className:"text-xl font-bold mb-2 text-blue-700",children:"6. Données personnelles"}),r.jsxs("p",{className:"text-gray-700",children:["Les données collectées (nom, email, numéro, localisation, etc.) sont utilisées dans le cadre de la mise en relation et sont traitées conformément au RGPD. Consultez notre "," ",r.jsx($,{to:"/politique-confidentialite",className:"text-orange-500 underline",children:"politique de confidentialité"}),"."]})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h3",{className:"text-xl font-bold mb-2 text-blue-700",children:"7. Responsabilité"}),r.jsx("p",{className:"text-gray-700",children:"SailingLoc décline toute responsabilité en cas de litige entre les utilisateurs. Toutefois, une équipe de modération peut intervenir en cas de signalement."})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h3",{className:"text-xl font-bold mb-2 text-blue-700",children:"8. Modification des CGU/CGV"}),r.jsx("p",{className:"text-gray-700",children:"SailingLoc se réserve le droit de modifier les présentes conditions à tout moment. Les utilisateurs seront notifiés lors de la mise à jour."})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h3",{className:"text-xl font-bold mb-2 text-blue-700",children:"9. Contact"}),r.jsxs("p",{className:"text-gray-700",children:["Pour toute question, vous pouvez contacter l’équipe via : ",r.jsx("a",{href:"mailto:sailinglocequipe@gmail.com",className:"text-orange-500 underline",children:"sailinglocequipe@gmail.com"}),"."]})]})]})})]})}function J1(){return r.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[r.jsx(Jn,{}),r.jsx("main",{className:"flex-1 flex flex-col items-center justify-center pt-24 pb-12",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-4xl",children:[r.jsx("h2",{className:"text-3xl font-bold text-blue-700 mb-8 text-center",children:"Mentions légales"}),r.jsxs("section",{className:"mb-8",children:[r.jsxs("h3",{className:"text-xl font-bold mb-4 text-blue-700 flex items-center",children:[r.jsx(Oa,{className:"h-6 w-6 mr-2"}),"1. Éditeur du site"]}),r.jsx("p",{className:"text-gray-700 mb-3",children:"Le site SailingLoc est édité par :"}),r.jsxs("ul",{className:"list-disc pl-6 text-gray-700 mb-3 space-y-1",children:[r.jsx("li",{children:"SailingLoc SAS"}),r.jsx("li",{children:"Société par actions simplifiée au capital de [à compléter] €"}),r.jsx("li",{children:"RCS La Rochelle B 923 456 789"}),r.jsx("li",{children:"Siège social : 12 Rue du Port, 17000 La Rochelle, France"}),r.jsxs("li",{children:["Email : ",r.jsx("a",{href:"mailto:sailinglocequipe@gmail.com",className:"text-orange-500 underline hover:text-orange-600 transition-colors",children:"sailinglocequipe@gmail.com"})]}),r.jsx("li",{children:"Directeur de la publication : [Nom du responsable légal ou fondateur]"})]})]}),r.jsxs("section",{className:"mb-8",children:[r.jsxs("h3",{className:"text-xl font-bold mb-4 text-blue-700 flex items-center",children:[r.jsx(od,{className:"h-6 w-6 mr-2"}),"2. Hébergement"]}),r.jsxs("ul",{className:"list-disc pl-6 text-gray-700 mb-3 space-y-1",children:[r.jsx("li",{children:"Le site est hébergé par :"}),r.jsx("li",{children:r.jsx("strong",{children:"Vercel Inc."})}),r.jsxs("li",{children:[r.jsx("strong",{children:"Adresse :"})," 340 S Lemon Ave #4133, Walnut, CA 91789, États-Unis"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Site web :"})," ",r.jsx("a",{href:"https://vercel.com",target:"_blank",rel:"noopener noreferrer",className:"text-orange-500 underline hover:text-orange-600 transition-colors",children:"vercel.com"})]}),r.jsx("li",{children:"Le prestataire assure un niveau de sécurité conforme aux exigences du RGPD."})]})]}),r.jsxs("section",{className:"mb-8",children:[r.jsxs("h3",{className:"text-xl font-bold mb-4 text-blue-700 flex items-center",children:[r.jsx(Oa,{className:"h-6 w-6 mr-2"}),"3. Conception et développement"]}),r.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200",children:[r.jsx("h4",{className:"text-lg font-semibold text-blue-800 mb-4",children:"Agence Pandawan"}),r.jsxs("div",{className:"text-sm text-gray-700 space-y-2",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Dénomination sociale :"})," Pandawan"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Date de création :"})," 14/03/2014"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Siège social :"})," 25 Rue du Faubourg Saint-Antoine, 75011 Paris"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Statut juridique :"})," SAS"]})]}),r.jsxs("div",{className:"mt-4 p-4 bg-white rounded-lg border border-blue-100",children:[r.jsxs("p",{className:"text-gray-700 text-sm leading-relaxed",children:[r.jsx("strong",{children:"Présentation :"})," Pandawan est une agence digitale internationale fondée en 2014, spécialisée dans le développement web, l'intelligence artificielle, le UX design et le référencement performant. Experte dans la création de contenus digitaux, tant pour le web que pour le mobile, l'agence poursuit son expansion dans plusieurs grandes villes à travers le monde."]}),r.jsxs("p",{className:"text-gray-700 text-sm leading-relaxed mt-2",children:[r.jsx("strong",{children:"Son ambition :"})," offrir des services et produits de haute qualité, en valorisant l'identité de ses clients tout en y apportant une véritable valeur ajoutée à travers l'innovation et la créativité."]})]})]})]}),r.jsxs("section",{className:"mb-8",children:[r.jsx("h3",{className:"text-xl font-bold mb-4 text-blue-700",children:"4. Propriété intellectuelle"}),r.jsxs("p",{className:"text-gray-700 leading-relaxed",children:["L'ensemble des éléments du site (textes, images, graphismes, logo, vidéos, base de données, etc.) est protégé par le Code de la propriété intellectuelle.",r.jsx("br",{}),"Toute reproduction, représentation, modification ou extraction, totale ou partielle, sans autorisation écrite de SailingLoc est interdite."]})]}),r.jsxs("section",{className:"mb-8",children:[r.jsx("h3",{className:"text-xl font-bold mb-4 text-blue-700",children:"5. Responsabilité"}),r.jsxs("p",{className:"text-gray-700 leading-relaxed",children:["SailingLoc met tout en œuvre pour assurer l'exactitude des informations diffusées, mais ne saurait être tenue responsable des erreurs ou omissions.",r.jsx("br",{}),"SailingLoc décline toute responsabilité quant à l'utilisation du site ou aux dommages directs ou indirects pouvant en résulter."]})]}),r.jsxs("section",{className:"mb-8",children:[r.jsx("h3",{className:"text-xl font-bold mb-4 text-blue-700",children:"6. Données personnelles"}),r.jsxs("p",{className:"text-gray-700 leading-relaxed",children:["Pour consulter notre politique de confidentialité, veuillez vous rendre sur la page dédiée :",r.jsx("br",{}),r.jsx($,{to:"/politique-confidentialite",className:"text-orange-500 underline hover:text-orange-600 transition-colors inline-flex items-center mt-2",children:r.jsx("span",{children:"👉 Politique de confidentialité"})})]})]}),r.jsxs("section",{className:"mb-8",children:[r.jsx("h3",{className:"text-xl font-bold mb-4 text-blue-700",children:"7. Cookies"}),r.jsxs("p",{className:"text-gray-700 leading-relaxed",children:["Lors de votre navigation, des cookies peuvent être déposés sur votre terminal. Vous pouvez à tout moment gérer vos préférences via notre bandeau dédié.",r.jsx("br",{}),"Pour plus d'informations, consultez notre ",r.jsx($,{to:"/politique-confidentialite",className:"text-orange-500 underline hover:text-orange-600 transition-colors",children:"politique de confidentialité"}),"."]})]}),r.jsxs("section",{className:"mb-8",children:[r.jsxs("h3",{className:"text-xl font-bold mb-4 text-blue-700 flex items-center",children:[r.jsx(Qs,{className:"h-6 w-6 mr-2"}),"8. Contact"]}),r.jsxs("p",{className:"text-gray-700 leading-relaxed",children:["Pour toute question ou signalement, vous pouvez nous écrire à :",r.jsx("br",{}),r.jsxs("a",{href:"mailto:sailinglocequipe@gmail.com",className:"text-orange-500 underline hover:text-orange-600 transition-colors inline-flex items-center mt-2",children:[r.jsx(Qs,{className:"h-4 w-4 mr-1"}),r.jsx("span",{children:"📧 sailinglocequipe@gmail.com"})]})]})]})]})})]})}function Y1(){const{boatId:s}=id(),e=vi(),[t,n]=D.useState(null),[i,a]=D.useState(!0),[l,c]=D.useState(!1),[d,m]=D.useState(!1),[f,p]=D.useState(""),[x,j]=D.useState({startDate:"",endDate:"",numberOfGuests:1,specialRequests:"",totalPrice:0});D.useEffect(()=>{s&&k()},[s]),D.useEffect(()=>{x.startDate&&x.endDate&&t&&R()},[x.startDate,x.endDate,x.numberOfGuests,t]);const k=async()=>{try{a(!0),console.log("🔄 Récupération des détails du bateau depuis MongoDB...");const S=await le(ae.BOAT_DETAIL(s));console.log("✅ Détails du bateau récupérés:",S),n(S)}catch(S){console.error("❌ Erreur lors de la récupération des détails:",S),p("Bateau non trouvé: "+S.message)}finally{a(!1)}},R=()=>{if(!x.startDate||!x.endDate||!t)return;const S=new Date(x.startDate),I=new Date(x.endDate),O=Math.ceil((I-S)/(1e3*60*60*24));if(O>0){const P=O*t.prix_jour;j(V=>({...V,totalPrice:P}))}},w=(S,I)=>{j(O=>({...O,[S]:I}))},A=async S=>{if(S.preventDefault(),!x.startDate||!x.endDate){p("Veuillez sélectionner les dates de début et de fin");return}const I=new Date(x.startDate),O=new Date(x.endDate);if(I>=O){p("La date de fin doit être postérieure à la date de début");return}if(I<new Date){p("La date de début ne peut pas être dans le passé");return}try{c(!0),p("");const P=localStorage.getItem("token")||sessionStorage.getItem("token");if(!P){p("Vous devez être connecté pour effectuer une réservation");return}console.log("🔄 Création de la réservation dans MongoDB...");const V=await le(ae.BOOKINGS,{method:"POST",headers:Fe(P),body:JSON.stringify({boatId:s,startDate:x.startDate,endDate:x.endDate,numberOfGuests:x.numberOfGuests,specialRequests:x.specialRequests,totalPrice:x.totalPrice})});console.log("✅ Réservation créée avec succès:",V),m(!0),setTimeout(()=>{e("/mes-reservations")},3e3)}catch(P){console.error("❌ Erreur lors de la création de la réservation:",P),p("Erreur lors de la réservation: "+P.message)}finally{c(!1)}};return i?r.jsx("div",{className:"min-h-screen bg-gray-50 pt-20 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Ln,{className:"h-12 w-12 animate-spin text-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Chargement du bateau..."})]})}):f&&!t?r.jsx("div",{className:"min-h-screen bg-gray-50 pt-20 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Ge,{className:"h-16 w-16 text-red-400 mx-auto mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:f}),r.jsx($,{to:"/bateaux",className:"text-blue-600 hover:text-blue-700",children:"Retourner à la liste des bateaux"})]})}):d?r.jsx("div",{className:"min-h-screen bg-gray-50 pt-20 flex items-center justify-center",children:r.jsxs("div",{className:"text-center max-w-md mx-auto",children:[r.jsx(Xr,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Réservation confirmée !"}),r.jsx("p",{className:"text-gray-600 mb-6",children:'Votre réservation a été créée avec succès ! Elle apparaîtra dans votre espace "Mes Réservations".'}),r.jsx("p",{className:"text-sm text-gray-500",children:'Redirection vers "Mes Réservations" dans quelques secondes...'})]})}):r.jsxs("div",{className:"min-h-screen bg-gray-50 pt-20",children:[r.jsx("div",{className:"bg-white shadow-sm border-b",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[r.jsxs($,{to:`/bateaux/${s}`,className:"inline-flex items-center space-x-2 text-blue-600 hover:text-blue-700 mb-4",children:[r.jsx(ad,{size:20}),r.jsx("span",{children:"Retour au bateau"})]}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Réserver ce bateau"})]})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Détails de la réservation"}),f&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md mb-6",children:f}),r.jsxs("form",{onSubmit:A,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de début"}),r.jsx("input",{type:"date",value:x.startDate,onChange:S=>w("startDate",S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de fin"}),r.jsx("input",{type:"date",value:x.endDate,onChange:S=>w("endDate",S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre de personnes"}),r.jsx("select",{value:x.numberOfGuests,onChange:S=>w("numberOfGuests",parseInt(S.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[...Array(t.capacite)].map((S,I)=>r.jsxs("option",{value:I+1,children:[I+1," personne",I+1>1?"s":""]},I+1))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Demandes spéciales (optionnel)"}),r.jsx("textarea",{value:x.specialRequests,onChange:S=>w("specialRequests",S.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Équipements supplémentaires, préférences particulières..."})]}),r.jsx("button",{type:"submit",disabled:l,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx(Ln,{className:"h-5 w-5 animate-spin"}),r.jsx("span",{children:"Création de la réservation..."})]}):"Confirmer la réservation"})]})]})}),r.jsx("div",{className:"lg:col-span-1",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 sticky top-24",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Résumé"}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[r.jsx("img",{src:t.image,alt:t.nom,className:"w-16 h-16 object-cover rounded-lg"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:t.nom}),r.jsx("p",{className:"text-sm text-gray-600 capitalize",children:t.type})]})]}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ut,{size:16}),r.jsx("span",{children:t.localisation})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Xt,{size:16}),r.jsxs("span",{children:["Capacité : ",t.capacite," personnes"]})]})]})]}),r.jsxs("div",{className:"space-y-3 mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Prix par jour"}),r.jsxs("span",{className:"font-medium",children:[t.prix_jour,"€"]})]}),x.startDate&&x.endDate&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Durée"}),r.jsxs("span",{className:"font-medium",children:[Math.ceil((new Date(x.endDate)-new Date(x.startDate))/(1e3*60*60*24))," jours"]})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Nombre de personnes"}),r.jsx("span",{className:"font-medium",children:x.numberOfGuests})]})]}),r.jsx("div",{className:"border-t pt-3",children:r.jsxs("div",{className:"flex items-center justify-between font-semibold",children:[r.jsx("span",{children:"Total"}),r.jsxs("span",{className:"text-lg text-blue-600",children:[x.totalPrice,"€"]})]})})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[r.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Informations importantes"}),r.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[r.jsx("li",{children:"• Réservation sécurisée"}),r.jsx("li",{children:"• Annulation gratuite jusqu'à 24h avant"}),r.jsx("li",{children:"• Paiement sécurisé"}),r.jsx("li",{children:"• Support client 24/7"})]})]})]})})]})})]})}function Z1(){const[s,e]=D.useState([]),[t,n]=D.useState(!0),[i,a]=D.useState(""),[l,c]=D.useState(!1),[d,m]=D.useState(null);D.useEffect(()=>{f()},[]);const f=async()=>{try{n(!0);const A=localStorage.getItem("token")||sessionStorage.getItem("token");if(!A){a("Vous devez être connecté pour voir vos réservations"),n(!1);return}console.log("🔄 Récupération des réservations depuis MongoDB...");const S=await le(ae.MY_BOOKINGS,{headers:Fe(A)});console.log("✅ Réservations récupérées:",S),e(S.data||[])}catch(A){console.error("❌ Erreur lors de la récupération des réservations:",A),a("Erreur lors de la récupération des réservations: "+A.message)}finally{n(!1)}},p=A=>{switch(A){case"completed":return{icon:r.jsx(Xr,{size:20,className:"text-green-600"}),label:"Terminée",color:"bg-green-100 text-green-800 border-green-200"};case"confirmed":return{icon:r.jsx(hs,{size:20,className:"text-blue-600"}),label:"Confirmée",color:"bg-blue-100 text-blue-800 border-blue-200"};case"pending":return{icon:r.jsx(hs,{size:20,className:"text-yellow-600"}),label:"En attente",color:"bg-yellow-100 text-yellow-800 border-yellow-200"};case"cancelled":return{icon:r.jsx(hp,{size:20,className:"text-red-600"}),label:"Annulée",color:"bg-red-100 text-red-800 border-red-200"};default:return{icon:r.jsx(yc,{size:20,className:"text-gray-600"}),label:A,color:"bg-gray-100 text-gray-800 border-gray-200"}}},x=A=>new Date(A).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}),j=(A,S)=>{const I=new Date(A),O=new Date(S);return Math.ceil((O-I)/(1e3*60*60*24))},k=A=>{m(A),c(!0)},R=A=>{c(!1),m(null)},w=()=>{c(!1),m(null)};return t?r.jsx("div",{className:"min-h-screen bg-gray-50 pt-20 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Ln,{className:"h-12 w-12 animate-spin text-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Chargement de vos réservations..."})]})}):i?r.jsx("div",{className:"min-h-screen bg-gray-50 pt-20 flex items-center justify-center",children:r.jsxs("div",{className:"text-center max-w-md mx-auto",children:[r.jsx(yc,{className:"h-16 w-16 text-red-400 mx-auto mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Erreur"}),r.jsx("p",{className:"text-gray-600 mb-6",children:i}),r.jsx($,{to:"/connexion",className:"inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Se connecter"})]})}):r.jsxs("div",{className:"min-h-screen bg-gray-50 pt-20",children:[r.jsx("div",{className:"bg-white shadow-sm border-b",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mes Réservations"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Gérez et suivez toutes vos réservations de bateaux"})]}),r.jsx($,{to:"/bateaux",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Réserver un bateau"})]})})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.length===0?r.jsxs("div",{className:"text-center py-16",children:[r.jsx(Ge,{className:"h-24 w-24 text-gray-300 mx-auto mb-6"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Aucune réservation pour le moment"}),r.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"Vous n'avez pas encore de réservations. Commencez par explorer nos bateaux disponibles et réservez votre première sortie en mer !"}),r.jsx($,{to:"/bateaux",className:"inline-block bg-orange-500 text-white px-8 py-4 rounded-lg text-lg font-medium hover:bg-orange-600 transition-colors",children:"Découvrir nos bateaux"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(Vn,{className:"h-6 w-6 text-blue-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.length})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx(Xr,{className:"h-6 w-6 text-green-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Terminées"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.filter(A=>A.status==="completed").length})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(hs,{className:"h-6 w-6 text-blue-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Confirmées"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.filter(A=>A.status==="confirmed").length})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:r.jsx(hs,{className:"h-6 w-6 text-yellow-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"En attente"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.filter(A=>A.status==="pending").length})]})]})})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Toutes vos réservations"}),s.map(A=>{const S=p(A.status),I=j(A.startDate,A.endDate);return r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:A.boatId?.nom||"Bateau"}),r.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${S.color}`,children:[S.icon,r.jsx("span",{className:"ml-1",children:S.label})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Vn,{className:"h-4 w-4 text-gray-400"}),r.jsxs("span",{className:"text-gray-600",children:["Du ",x(A.startDate)," au ",x(A.endDate)]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(hs,{className:"h-4 w-4 text-gray-400"}),r.jsxs("span",{className:"text-gray-600",children:[I," jour",I>1?"s":""]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Xt,{className:"h-4 w-4 text-gray-400"}),r.jsxs("span",{className:"text-gray-600",children:[A.numberOfGuests," personne",A.numberOfGuests>1?"s":""]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(bo,{className:"h-4 w-4 text-gray-400"}),r.jsxs("span",{className:"text-gray-600 font-medium",children:[A.totalPrice,"€"]})]})]}),A.specialRequests&&r.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-md",children:r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"Demandes spéciales :"})," ",A.specialRequests]})})]}),r.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[r.jsx($,{to:`/bateaux/${A.boatId?._id||A.boatId}`,className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Voir le bateau"}),A.status==="completed"&&r.jsx("button",{onClick:()=>k(A),className:"text-green-600 hover:text-green-700 text-sm font-medium",children:"Laisser un avis"})]})]})})},A._id)})]})]})}),d&&r.jsx(ud,{isOpen:l,onClose:w,onReviewAdded:R,boatData:d.boatId,bookingId:d._id})]})}function eN(){const{pathname:s}=rd();return D.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[s]),null}function tN(){const[s,e]=D.useState(null),[t,n]=D.useState(""),[i,a]=D.useState(""),[l,c]=D.useState([]),[d,m]=D.useState({nom:"",type:"voilier",prix:"",capacite:""}),[f,p]=D.useState(null),[x,j]=D.useState(null),[k,R]=D.useState("");D.useEffect(()=>{const V=Ur.onAuthStateChanged(v=>{e(v),v&&w()});return()=>V()},[]);const w=async()=>{try{const v=(await _w(Wu(Pa,"boats"))).docs.map(b=>({id:b.id,...b.data()}));c(v)}catch(V){R(`Erreur lors de la récupération: ${V.message}`)}},A=async V=>{try{V?(await q0(Ur,t,i),R("Connexion réussie !")):(await B0(Ur,t,i),R("Compte créé avec succès !")),n(""),a("")}catch(v){R(`Erreur: ${v.message}`)}},S=async()=>{try{await H0(Ur),R("Déconnexion réussie !")}catch(V){R(`Erreur lors de la déconnexion: ${V.message}`)}},I=async V=>{if(V.preventDefault(),!s){R("Vous devez être connecté pour ajouter un bateau");return}try{const v={...d,prix:parseFloat(d.prix),capacite:parseInt(d.capacite),userId:s.uid,createdAt:new Date,imageName:f?f.name:null,imagePreview:x||null};await Nw(Wu(Pa,"boats"),v),R("Bateau ajouté avec succès !"),m({nom:"",type:"voilier",prix:"",capacite:""}),p(null),j(null),w()}catch(v){R(`Erreur lors de l'ajout: ${v.message}`)}},O=V=>{const v=V.target.files[0];if(v){p(v);const b=new FileReader;b.onload=_=>{j(_.target.result)},b.readAsDataURL(v)}},P=async V=>{try{await ww(Sm(Pa,"boats",V)),R("Bateau supprimé avec succès !"),w()}catch(v){R(`Erreur lors de la suppression: ${v.message}`)}};return r.jsxs("div",{className:"max-w-4xl mx-auto p-6 bg-white rounded-lg shadow-md",children:[r.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Test Firebase - Nouvelle Configuration"}),r.jsxs("div",{className:"mb-6 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold mb-2 text-orange-800",children:"🗄️ Test API MongoDB"}),r.jsx("p",{className:"text-orange-700 mb-3",children:"Testez la connexion à votre API backend MongoDB pour récupérer les données des bateaux et avis."}),r.jsx($,{to:"/api-test",className:"inline-block bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600 transition-colors",children:"🧪 Tester l'API MongoDB"})]}),r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-3 text-blue-800",children:"🔐 Authentication"}),s?r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-blue-800",children:[r.jsx("strong",{children:"Connecté :"})," ",s.email]}),r.jsxs("p",{className:"text-sm text-blue-600",children:["UID: ",s.uid]})]}),r.jsx("button",{onClick:S,className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition-colors",children:"Se déconnecter"})]}):r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsx("input",{type:"email",placeholder:"Email",value:t,onChange:V=>n(V.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),r.jsx("input",{type:"password",placeholder:"Mot de passe",value:i,onChange:V=>a(V.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>A(!1),className:"flex-1 bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600 transition-colors",children:"Créer un compte"}),r.jsx("button",{onClick:()=>A(!0),className:"flex-1 bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 transition-colors",children:"Se connecter"})]})]})]}),r.jsxs("div",{className:"bg-green-50 p-4 rounded-lg mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-3 text-green-800",children:"🗄️ Firestore Database"}),s?r.jsxs(r.Fragment,{children:[r.jsxs("form",{onSubmit:I,className:"space-y-4 mb-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[r.jsx("input",{type:"text",placeholder:"Nom du bateau",value:d.nom,onChange:V=>m({...d,nom:V.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",required:!0}),r.jsxs("select",{value:d.type,onChange:V=>m({...d,type:V.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[r.jsx("option",{value:"voilier",children:"Voilier"}),r.jsx("option",{value:"moteur",children:"Bateau à moteur"}),r.jsx("option",{value:"catamaran",children:"Catamaran"})]}),r.jsx("input",{type:"number",placeholder:"Prix/jour",value:d.prix,onChange:V=>m({...d,prix:V.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",required:!0}),r.jsx("input",{type:"number",placeholder:"Capacité",value:d.capacite,onChange:V=>m({...d,capacite:V.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",required:!0})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"file",accept:"image/*",onChange:O,className:"hidden",id:"image-upload"}),r.jsx("div",{className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"📷 Ajouter une image"})]}),f&&r.jsxs("span",{className:"text-sm text-green-600",children:["✓ ",f.name]})]}),x&&r.jsxs("div",{className:"mt-3",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Aperçu de l'image :"}),r.jsx("img",{src:x,alt:"Aperçu",className:"w-32 h-32 object-cover rounded-lg border"})]})]}),r.jsx("button",{type:"submit",className:"w-full bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600 transition-colors",children:"Ajouter le bateau"})]}),r.jsxs("div",{children:[r.jsxs("h4",{className:"font-medium mb-2",children:["Bateaux enregistrés (",l.length,")"]}),l.length===0?r.jsx("p",{className:"text-gray-500 text-center py-4",children:"Aucun bateau trouvé"}):r.jsx("div",{className:"space-y-2",children:l.map(V=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border",children:[r.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[V.imagePreview&&r.jsx("img",{src:V.imagePreview,alt:V.nom,className:"w-16 h-16 object-cover rounded-lg border"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:V.nom}),r.jsxs("div",{className:"text-sm text-gray-600",children:[V.type," • ",V.prix,"€/jour • ",V.capacite," personnes"]}),V.imageName&&r.jsxs("div",{className:"text-xs text-blue-600",children:["📷 ",V.imageName]})]})]}),r.jsx("button",{onClick:()=>P(V.id),className:"bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600 transition-colors",children:"Supprimer"})]},V.id))})]})]}):r.jsx("p",{className:"text-green-700",children:"Connectez-vous pour gérer les bateaux"})]}),k&&r.jsx("div",{className:"mt-4 p-3 bg-blue-100 border border-blue-300 rounded-md",children:r.jsx("p",{className:"text-sm text-blue-800",children:k})}),r.jsxs("div",{className:"mt-6 text-xs text-gray-500",children:[r.jsx("p",{children:"✅ Firebase configuré avec le projet : mypictures-9dc8b"}),r.jsx("p",{children:"🔐 Authentication et Firestore activés"})]})]})}function sN(){const[s,e]=D.useState("Vérification..."),[t,n]=D.useState(0),[i,a]=D.useState(0),[l,c]=D.useState("");D.useEffect(()=>{d()},[]);const d=async()=>{try{e("🔄 Test de connexion à l'API MongoDB..."),console.log("🧪 Test 1: Récupération des bateaux...");const x=await le(ae.BOATS);n(x.length||0),console.log(`✅ ${x.length||0} bateaux trouvés`),console.log("🧪 Test 2: Récupération des avis...");const j=await le(ae.FIVE_STAR_REVIEWS);a(j.data?.length||0),console.log(`✅ ${j.data?.length||0} avis trouvés`),console.log("🧪 Test 3: Test de l'API de réservation...");try{const k=localStorage.getItem("token");if(k){const R=await le(ae.BOOKINGS,{headers:Fe(k)});console.log("✅ API de réservation accessible:",R)}else console.log("⚠️ Pas de token, test de réservation ignoré")}catch(k){console.log("⚠️ API de réservation non accessible:",k.message)}console.log("🧪 Test 4: Test de l'API d'ajout de bateaux...");try{const k=localStorage.getItem("token");if(k){const R=await le(ae.BOATS,{method:"GET",headers:Fe(k)});console.log("✅ API d'ajout de bateaux accessible:",R)}else console.log("⚠️ Pas de token, test d'ajout de bateaux ignoré")}catch(k){console.log("⚠️ API d'ajout de bateaux non accessible:",k.message)}e(`✅ API MongoDB accessible - ${x.length||0} bateaux, ${j.data?.length||0} avis`),c("")}catch(x){console.error("❌ Erreur de connexion API:",x),e(`❌ Erreur de connexion: ${x.message}`),c(x.message)}},m=()=>{d()},f=async()=>{try{e("🧪 Test d'ajout de bateau...");const x=localStorage.getItem("token");if(!x){c("Vous devez être connecté pour tester l'ajout de bateau");return}const j={nom:"Bateau Test",type:"voilier",longueur:10,prix_jour:100,capacite:4,image:"https://via.placeholder.com/300x200?text=Test",destination:"saint-malo",description:"Bateau de test",equipements:["GPS","Radio VHF"]};console.log("🧪 Test d'ajout de bateau avec:",j);const k=await le(ae.BOATS,{method:"POST",headers:Fe(x),body:JSON.stringify(j)});console.log("✅ Test d'ajout réussi:",k),e("✅ Test d'ajout de bateau réussi !"),c("")}catch(x){console.error("❌ Test d'ajout échoué:",x),e("❌ Test d'ajout de bateau échoué"),c("Erreur lors du test: "+x.message)}},p=async()=>{try{e("🧪 Test de l'API d'inscription...");const x={nom:"Test",prenom:"User",email:`test${Date.now()}@example.com`,password:"test123",tel:"0612345678",role:Ba("locataire")};console.log("🧪 Test d'inscription avec:",x);const j=await le(ae.REGISTER,{method:"POST",body:JSON.stringify(x)});console.log("✅ Test d'inscription réussi:",j),e("✅ API d'inscription fonctionne correctement")}catch(x){console.error("❌ Test d'inscription échoué:",x),e(`❌ Erreur API d'inscription: ${x.message}`)}};return r.jsxs("div",{className:"max-w-4xl mx-auto p-6 bg-white rounded-lg shadow-md",children:[r.jsx("h2",{className:"text-2xl font-bold mb-6",children:"🧪 Test de Connexion API MongoDB"}),r.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold mb-2 text-blue-800",children:"Statut de l'API"}),r.jsx("p",{className:"text-blue-700",children:s}),l&&r.jsx("div",{className:"mt-3 p-3 bg-red-100 border border-red-300 rounded",children:r.jsxs("p",{className:"text-red-800 text-sm",children:[r.jsx("strong",{children:"Erreur:"})," ",l]})}),r.jsxs("div",{className:"mt-3 space-x-3",children:[r.jsx("button",{onClick:m,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors",children:"🔄 Réessayer"}),r.jsx("button",{onClick:f,className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition-colors",children:"🧪 Tester Ajout Bateau"}),r.jsx("button",{onClick:p,className:"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600 transition-colors",children:"🧪 Tester Inscription"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold mb-2 text-green-800",children:"📊 Bateaux"}),r.jsx("p",{className:"text-3xl font-bold text-green-600",children:t}),r.jsx("p",{className:"text-green-700 text-sm",children:"bateaux trouvés dans MongoDB"})]}),r.jsxs("div",{className:"p-4 bg-purple-50 border border-purple-200 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold mb-2 text-purple-800",children:"⭐ Avis"}),r.jsx("p",{className:"text-3xl font-bold text-purple-600",children:i}),r.jsx("p",{className:"text-purple-700 text-sm",children:"avis 5 étoiles trouvés"})]})]}),r.jsxs("div",{className:"mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold mb-2 text-gray-800",children:"🔧 Informations techniques"}),r.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"URL de base:"})," ",ae.BOATS.replace("/api/boats","")]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Endpoint bateaux:"})," ",ae.BOATS]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Endpoint avis:"})," ",ae.FIVE_STAR_REVIEWS]})]})]})]})}function nN(){return r.jsx("div",{className:"min-h-screen bg-gray-50 pt-20",children:r.jsx("div",{className:"container mx-auto px-4",children:r.jsx(sN,{})})})}function rN(){return r.jsxs($f,{children:[r.jsx(eN,{}),r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(Jn,{}),r.jsx("main",{children:r.jsxs(Hf,{children:[r.jsx(Ie,{path:"/",element:r.jsx(xp,{})}),r.jsx(Ie,{path:"/bateaux",element:r.jsx(yp,{})}),r.jsx(Ie,{path:"/bateaux/:id",element:r.jsx(Np,{})}),r.jsx(Ie,{path:"/reservation/:boatId",element:r.jsx(Y1,{})}),r.jsx(Ie,{path:"/mes-reservations",element:r.jsx(Z1,{})}),r.jsx(Ie,{path:"/a-propos",element:r.jsx(vp,{})}),r.jsx(Ie,{path:"/contact",element:r.jsx(_p,{})}),r.jsx(Ie,{path:"/connexion",element:r.jsx(rg,{})}),r.jsx(Ie,{path:"/inscription",element:r.jsx(ig,{})}),r.jsx(Ie,{path:"/favoris",element:r.jsx(ag,{})}),r.jsx(Ie,{path:"/gestion-bateaux",element:r.jsx(L1,{})}),r.jsx(Ie,{path:"/admin",element:r.jsx(M1,{})}),r.jsx(Ie,{path:"/politique-confidentialite",element:r.jsx(U1,{})}),r.jsx(Ie,{path:"/profil",element:r.jsx(Q1,{})}),r.jsx(Ie,{path:"/cgu-cgv",element:r.jsx(X1,{})}),r.jsx(Ie,{path:"/mentions-legales",element:r.jsx(J1,{})}),r.jsx(Ie,{path:"/firebase-test",element:r.jsx(tN,{})}),r.jsx(Ie,{path:"/api-test",element:r.jsx(nN,{})})]})}),r.jsx(pp,{})]})]})}Qf.createRoot(document.getElementById("root")).render(r.jsx(D.StrictMode,{children:r.jsx(rN,{})}));
